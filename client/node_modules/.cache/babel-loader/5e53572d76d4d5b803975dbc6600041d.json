{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { attachEventProps } from './utils/attachEventProps';\nexport function createControllerComponent(displayName, controller) {\n  const dismissEventName = `on${displayName}DidDismiss`;\n  return class ReactControllerComponent extends React.Component {\n    constructor(props) {\n      super(props);\n    }\n\n    static get displayName() {\n      return displayName;\n    }\n\n    componentDidMount() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const {\n          isOpen\n        } = this.props;\n\n        if (isOpen) {\n          this.present();\n        }\n      });\n    }\n\n    componentDidUpdate(prevProps) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n          this.present(prevProps);\n        }\n\n        if (this.controller && prevProps.isOpen !== this.props.isOpen && this.props.isOpen === false) {\n          yield this.controller.dismiss();\n        }\n      });\n    }\n\n    present(prevProps) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const _a = this.props,\n              {\n          isOpen,\n          onDidDismiss\n        } = _a,\n              cProps = __rest(_a, [\"isOpen\", \"onDidDismiss\"]);\n\n        const elementProps = Object.assign(Object.assign({}, cProps), {\n          [dismissEventName]: onDidDismiss\n        });\n        this.controller = yield controller.create(Object.assign({}, elementProps));\n        attachEventProps(this.controller, elementProps, prevProps);\n        this.controller.present();\n      });\n    }\n\n    render() {\n      return null;\n    }\n\n  };\n}","map":{"version":3,"sources":["../../src/react-component-lib/createControllerComponent.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,gBAAT,QAAiC,0BAAjC;AAYA,OAAM,SAAU,yBAAV,CAIJ,WAJI,EAIiB,UAJjB,EAIsF;AAC1F,QAAM,gBAAgB,GAAG,KAAK,WAAW,YAAzC;AAIA,SAAO,MAAM,wBAAN,SAAuC,KAAK,CAAC,SAA7C,CAA6D;AAGlE,IAAA,WAAA,CAAY,KAAZ,EAAwB;AACtB,YAAM,KAAN;AACD;;AAED,eAAW,WAAX,GAAsB;AACpB,aAAO,WAAP;AACD;;AAEK,IAAA,iBAAiB,GAAA;;AACrB,cAAM;AAAE,UAAA;AAAF,YAAa,KAAK,KAAxB;;AACA,YAAI,MAAJ,EAAY;AACV,eAAK,OAAL;AACD;AACF,O;AAAA;;AAEK,IAAA,kBAAkB,CAAC,SAAD,EAAiB;;AACvC,YAAI,SAAS,CAAC,MAAV,KAAqB,KAAK,KAAL,CAAW,MAAhC,IAA0C,KAAK,KAAL,CAAW,MAAX,KAAsB,IAApE,EAA0E;AACxE,eAAK,OAAL,CAAa,SAAb;AACD;;AACD,YACE,KAAK,UAAL,IACA,SAAS,CAAC,MAAV,KAAqB,KAAK,KAAL,CAAW,MADhC,IAEA,KAAK,KAAL,CAAW,MAAX,KAAsB,KAHxB,EAIE;AACA,gBAAM,KAAK,UAAL,CAAgB,OAAhB,EAAN;AACD;AACF,O;AAAA;;AAEK,IAAA,OAAO,CAAC,SAAD,EAAkB;;AAC7B,cAAM,EAAA,GAAA,KAAA,KAAN;AAAA,cAAM;AAAE,UAAA,MAAF;AAAU,UAAA;AAAV,YAAsB,EAA5B;AAAA,cAA8B,MAAA,GAAA,MAAA,CAAA,EAAA,EAAA,CAAA,QAAA,EAAA,cAAA,CAAA,CAA9B;;AACA,cAAM,YAAY,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACb,MADa,CAAA,EACP;AACT,WAAC,gBAAD,GAAoB;AADX,SADO,CAAlB;AAIA,aAAK,UAAL,GAAkB,MAAM,UAAU,CAAC,MAAX,CAAiB,MAAA,CAAA,MAAA,CAAA,EAAA,EACpC,YADoC,CAAjB,CAAxB;AAGA,QAAA,gBAAgB,CAAC,KAAK,UAAN,EAAyB,YAAzB,EAAuC,SAAvC,CAAhB;AACA,aAAK,UAAL,CAAgB,OAAhB;AACD,O;AAAA;;AAED,IAAA,MAAM,GAAA;AACJ,aAAO,IAAP;AACD;;AA9CiE,GAApE;AAgDD","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { attachEventProps } from './utils/attachEventProps';\nexport function createControllerComponent(displayName, controller) {\n    const dismissEventName = `on${displayName}DidDismiss`;\n    return class ReactControllerComponent extends React.Component {\n        constructor(props) {\n            super(props);\n        }\n        static get displayName() {\n            return displayName;\n        }\n        componentDidMount() {\n            return __awaiter(this, void 0, void 0, function* () {\n                const { isOpen } = this.props;\n                if (isOpen) {\n                    this.present();\n                }\n            });\n        }\n        componentDidUpdate(prevProps) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n                    this.present(prevProps);\n                }\n                if (this.controller &&\n                    prevProps.isOpen !== this.props.isOpen &&\n                    this.props.isOpen === false) {\n                    yield this.controller.dismiss();\n                }\n            });\n        }\n        present(prevProps) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const _a = this.props, { isOpen, onDidDismiss } = _a, cProps = __rest(_a, [\"isOpen\", \"onDidDismiss\"]);\n                const elementProps = Object.assign(Object.assign({}, cProps), { [dismissEventName]: onDidDismiss });\n                this.controller = yield controller.create(Object.assign({}, elementProps));\n                attachEventProps(this.controller, elementProps, prevProps);\n                this.controller.present();\n            });\n        }\n        render() {\n            return null;\n        }\n    };\n}\n//# sourceMappingURL=createControllerComponent.js.map"]},"metadata":{},"sourceType":"module"}