{"ast":null,"code":"import _defineProperty from \"C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { attachEventProps } from './utils/attachEventProps';\nexport function createControllerComponent(displayName, controller) {\n  var dismissEventName = \"on\".concat(displayName, \"DidDismiss\");\n  return /*#__PURE__*/function (_React$Component) {\n    _inherits(ReactControllerComponent, _React$Component);\n\n    var _super = _createSuper(ReactControllerComponent);\n\n    function ReactControllerComponent(props) {\n      _classCallCheck(this, ReactControllerComponent);\n\n      return _super.call(this, props);\n    }\n\n    _createClass(ReactControllerComponent, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var isOpen;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  isOpen = this.props.isOpen;\n\n                  if (isOpen) {\n                    this.present();\n                  }\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n                    this.present(prevProps);\n                  }\n\n                  if (!(this.controller && prevProps.isOpen !== this.props.isOpen && this.props.isOpen === false)) {\n                    _context2.next = 4;\n                    break;\n                  }\n\n                  _context2.next = 4;\n                  return this.controller.dismiss();\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n      }\n    }, {\n      key: \"present\",\n      value: function present(prevProps) {\n        return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          var _a, isOpen, onDidDismiss, cProps, elementProps;\n\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _a = this.props, isOpen = _a.isOpen, onDidDismiss = _a.onDidDismiss, cProps = __rest(_a, [\"isOpen\", \"onDidDismiss\"]);\n                  elementProps = Object.assign(Object.assign({}, cProps), _defineProperty({}, dismissEventName, onDidDismiss));\n                  _context3.next = 4;\n                  return controller.create(Object.assign({}, elementProps));\n\n                case 4:\n                  this.controller = _context3.sent;\n                  attachEventProps(this.controller, elementProps, prevProps);\n                  this.controller.present();\n\n                case 7:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return null;\n      }\n    }], [{\n      key: \"displayName\",\n      get: function get() {\n        return displayName;\n      }\n    }]);\n\n    return ReactControllerComponent;\n  }(React.Component);\n}","map":{"version":3,"sources":["../../src/react-component-lib/createControllerComponent.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,gBAAT,QAAiC,0BAAjC;AAYA,OAAM,SAAU,yBAAV,CAIJ,WAJI,EAIiB,UAJjB,EAIsF;AAC1F,MAAM,gBAAgB,eAAQ,WAAR,eAAtB;AAIA;AAAA;;AAAA;;AAGE,sCAAY,KAAZ,EAAwB;AAAA;;AAAA,+BAChB,KADgB;AAEvB;;AALH;AAAA;AAAA,0CAWyB;;;;;;;AACb,kBAAA,M,GAAW,KAAK,K,CAAhB,M;;AACR,sBAAI,MAAJ,EAAY;AACV,yBAAK,OAAL;AACD;;;;;;;;;AACF;AAhBH;AAAA;AAAA,yCAkB2B,SAlB3B,EAkB2C;;;;;;AACvC,sBAAI,SAAS,CAAC,MAAV,KAAqB,KAAK,KAAL,CAAW,MAAhC,IAA0C,KAAK,KAAL,CAAW,MAAX,KAAsB,IAApE,EAA0E;AACxE,yBAAK,OAAL,CAAa,SAAb;AACD;;wBAEC,KAAK,UAAL,IACA,SAAS,CAAC,MAAV,KAAqB,KAAK,KAAL,CAAW,MADhC,IAEA,KAAK,KAAL,CAAW,MAAX,KAAsB,K;;;;;;AAEtB,yBAAM,KAAK,UAAL,CAAgB,OAAhB,EAAN;;;;;;;;;AAEH;AA7BH;AAAA;AAAA,8BA+BgB,SA/BhB,EA+BiC;;;;;;;;AACvB,kBAAA,E,GAAA,KAAA,K,EAAE,M,GAAoB,E,CAApB,M,EAAQ,Y,GAAY,E,CAAZ,Y,EAAc,M,GAAA,MAAA,CAAA,EAAA,EAAA,CAAA,QAAA,EAAA,cAAA,CAAA,C;AACxB,kBAAA,Y,GAAY,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACb,MADa,CAAA,sBAEf,gBAFe,EAEI,YAFJ,E;;AAIA,yBAAM,UAAU,CAAC,MAAX,CAAiB,MAAA,CAAA,MAAA,CAAA,EAAA,EACpC,YADoC,CAAjB,CAAN;;;AAAlB,uBAAK,U;AAGL,kBAAA,gBAAgB,CAAC,KAAK,UAAN,EAAyB,YAAzB,EAAuC,SAAvC,CAAhB;AACA,uBAAK,UAAL,CAAgB,OAAhB;;;;;;;;;AACD;AA1CH;AAAA;AAAA,+BA4CQ;AACJ,eAAO,IAAP;AACD;AA9CH;AAAA;AAAA,0BAOwB;AACpB,eAAO,WAAP;AACD;AATH;;AAAA;AAAA,IAA8C,KAAK,CAAC,SAApD;AAgDD","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { attachEventProps } from './utils/attachEventProps';\nexport function createControllerComponent(displayName, controller) {\n    const dismissEventName = `on${displayName}DidDismiss`;\n    return class ReactControllerComponent extends React.Component {\n        constructor(props) {\n            super(props);\n        }\n        static get displayName() {\n            return displayName;\n        }\n        componentDidMount() {\n            return __awaiter(this, void 0, void 0, function* () {\n                const { isOpen } = this.props;\n                if (isOpen) {\n                    this.present();\n                }\n            });\n        }\n        componentDidUpdate(prevProps) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n                    this.present(prevProps);\n                }\n                if (this.controller &&\n                    prevProps.isOpen !== this.props.isOpen &&\n                    this.props.isOpen === false) {\n                    yield this.controller.dismiss();\n                }\n            });\n        }\n        present(prevProps) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const _a = this.props, { isOpen, onDidDismiss } = _a, cProps = __rest(_a, [\"isOpen\", \"onDidDismiss\"]);\n                const elementProps = Object.assign(Object.assign({}, cProps), { [dismissEventName]: onDidDismiss });\n                this.controller = yield controller.create(Object.assign({}, elementProps));\n                attachEventProps(this.controller, elementProps, prevProps);\n                this.controller.present();\n            });\n        }\n        render() {\n            return null;\n        }\n    };\n}\n//# sourceMappingURL=createControllerComponent.js.map"]},"metadata":{},"sourceType":"module"}