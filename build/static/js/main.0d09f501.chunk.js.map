{"version":3,"sources":["../node_modules/@ion-phaser/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","components/MatchRoomBox.js","images/KeyBoard.png","images/GamePad.png","components/ControlsButton.js","components/InfoMenuBox.js","images/GameShot5.png","api.js","pages/MenuPage.js","images/OnlineGame.png","phaser/sprites/Player.js","phaser/controls/Controls.js","phaser/sprites/MagicBlast.js","phaser/sprites/SwordSwing.js","phaser/sprites/HealthBar.js","phaser/sprites/CoolDownBar.js","phaser/sprites/CoolDown.js","phaser/sprites/lightningBolt.js","phaser/sprites/lightningBoltHitbox.js","phaser/scenes/LocalGameScene.js","phaser/scenes/OnlineGameScene.js","pages/GamePage.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","MatchRoomBox","props","toggleHighlight","setState","highlight","state","highlightColor","this","onClick","onMouseEnter","onMouseLeave","style","border","cursor","textAlign","borderRadius","width","height","margin","backgroundColor","matchType","src","image","alt","React","Component","ControlsButton","toggle","selected","hoverToggle","hoverHighlight","paddingTop","InfoMenuBox","toggleControlsHighlight","highlightControls","toggleNotesHighlight","highlightNotes","showNotes","showControls","controlSetToggle1","setControlConfig","controlSetToggle2","textP1","textP2","textNotes","keyBoardButtons","gamePadButtons","notesPageGridPadding","controlsHighlightColor","notesHighlightColor","controls","notes","Grid","item","xs","KeyBoardIcon","GamePadIcon","fontSize","color","paddingLeft","container","padding","verticalAlign","socket","io","MenuPage","setRoomState","newRooms","rooms","controlConfigSelected","controlConfig","player1","Movement","SwordSlash","MagicBlast","player2","matchRoomClicked","gameType","roomName","playerId","emit","joinRoom","passGameConfig","passControlConfig","console","log","cb","cb2","err","room","on","JSON","stringify","removeAllListeners","roomCount","maxWidth","minWidth","minHeight","maxHeight","fontFamily","paddingBottom","to","LocalGameImage","font","align","index","name","Player","scene","x","y","texture","add","existing","physics","body","setSize","createAnimations","orientationVector","alive","dodging","stunned","setPlayerSpeed","toggleStun","time","delayedCall","onEvent","gameObj","gameObjCenter","getCenter","playerCenter","vectorAngle","Phaser","Math","Angle","Between","movementX","cos","movementY","sin","setVelocity","setAlpha","setBounce","finishedDodging","speed","playerSpeed","velocityVector","anims","stop","play","key","abs","healthBar","create","frames","generateFrameNumbers","start","end","frameRate","repeat","Physics","Arcade","Sprite","Controls","type","gamePadCount","gamePadNumber","setKeyInput","directionals","input","keyboard","addKeys","up","Input","Keyboard","KeyCodes","W","down","S","left","A","right","D","magicBlastAttack","addKey","P","swordSwing","SPACE","dodge","SHIFT","lightningBolt","O","createCursorKeys","NUMPAD_NINE","NUMPAD_ZERO","NUMPAD_FOUR","NUMPAD_EIGHT","magicBlast","setWASDControls","setArrowKeyControls","gamePadMode","xAxis","yAxis","isDown","gamepad","once","pad","event","button","X","R2","R1","L2","total","isActive","pad1","pad2","axes","getValue","lightningBoltFiring","dodgeFiring","magicBlastFiring","swordSwingFiring","GameObjects","owner","setScale","magicSpeed","setCircle","explodeTimer","anim","destroy","explode","velocity","enable","player","SwordSwing","setOffset","displayWidth","displayHeight","swinging","hideOnComplete","followOwner","playerOrientationVector","newOrientation","atan2","PI","angle","orientSword","getOrientationVector","gameObject","collisionAngle","HealthBar","config","bar","Graphics","canTakeDamage","value","p","draw","amount","setTakeDamage","clear","fillStyle","fillRect","d","floor","CoolDownBar","duration","running","timer","progress","getProgress","CoolDown","coolDownMS","coolDownBar","active","update","LightningBolt","endLightningBolt","lightningHB","animationSprite","Olength","onCompleteHandler","tween","targets","self","oscillationLength","startingOlength","tweens","orientationx","orientationy","yoyo","onComplete","countRuns","setVisible","onCompleteParams","LocalGameScene","preload","load","spritesheet","frameWidth","frameHeight","deflectBlast","swordHitbox","inSwordSweep","deflectFrom","getOwner","explosionAnim","playerHit","getStun","getDodging","playStun","getHealthBar","decrease","gameOver","redirect","knockBack","playerHitSwordSwing","playerHitLightning","destroyAnimationSprite","lightningBolts","getChildren","forEach","window","location","replace","background","sprite","youWin","text","healthBarP1","healthBarP2","swordCoolDownP1","swordCoolDownP2","magicCoolDownP1","magicCoolDownP2","dodgeCoolDownP1","dodgeCoolDownP2","lightningCoolDownP1","lightningCoolDownP2","controlsP1","controlsP2","magicBlasts","group","swordHitBoxes","players","setHealthBar","overlap","leftWall","immovable","rightWall","topWall","bottomWall","walls","staticGroup","midWall","collider","createMagicBlast","getX","getY","setMagicBlastVelocity","setCollideWorldBounds","checkForSwingThenSwing","attackInput","coolDown","swordToCheck","swordSpawnX","swordSpawnY","newSwordSwing","swingSword","startCoolDown","isAlive","setText","movementVectorP1","getMovementVector","movementVectorP2","setOrientationVector","setPlayerVelocity","attackInputsP1","getMoveInput","attackInputsP2","lightningBoltHB1","LightningHB","lightningBoltHB2","lightningBoltHB3","lightningBoltHB4","swordSwings","length","setCoolDowns","swordCoolDown","dodgeCoolDown","magicCoolDown","lightningCoolDown","position","gameConfig","moving","moveTimer","opponentSocketId","player2Movement","direction","setMovementAnim","onlinePlayerSwing","createLightningBolt","lightningAnimDestroyed","getTotalFrames","oldPosition","pause","GamePage","newScene","OnlineGameScene","initialize","game","AUTO","default","arcade","debug","gravity","init","App","dataFromMenuPage","gameSelectionFromMenuPage","roomNameFromMenuPage","path","exact","addNewRoom","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0d09f501.chunk.js","sourcesContent":["var map = {\n\t\"./ion-phaser.entry.js\": [\n\t\t110,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 106;\nmodule.exports = webpackAsyncContext;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nclass MatchRoomBox extends React.Component {\r\n  constructor(props) {\r\n            super(props);\r\n            this.state = {highlight: false}\r\n            };\r\n    //Highlights object\r\n    toggleHighlight = () => {\r\n      this.setState({highlight: !this.state.highlight});\r\n    }\r\n  render() {\r\n    let highlightCSS = this.state.highlight;\r\n    let highlightColor;\r\n    \r\n    if (highlightCSS){\r\n      highlightColor = \"3px Solid Green\";\r\n    }\r\n    else {\r\n      highlightColor = \"3px Solid Black\";\r\n    }\r\n    return <div  onClick = {this.props.onClick} onMouseEnter={this.toggleHighlight} onMouseLeave={this.toggleHighlight}\r\n     style={{border: highlightColor,\r\n      cursor:'pointer', textAlign: 'center', borderRadius: 15, width: 200, height: 200, margin: 'auto', backgroundColor: '#9A9A9A'}}>\r\n              <div>{this.props.matchType}</div>\r\n              <div style={{border: '1px solid', width: '100%', height: 160}}>\r\n                <img width=\"100%\" height=\"100%\" src={this.props.image} alt=\"Game Room Image\" /> \r\n              </div>\r\n          </div>\r\n        \r\n}\r\n}\r\n\r\nexport default MatchRoomBox;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAA1CAYAAAAasVavAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAEoSURBVGhD7Zq7DYNAEAXdClWQkNEBrVAMbSDRAAWQUQcROWttAJo7HwHyR/b5jfSy24U38d5MHEgGkAwgGUAywKmMZVms6zprmsaKovj5eA/v473OeJCxbZuN42h1XSeX/nq8l/fznjEPMqZpsqqqkotyiffznjGBjHVdrW3b5ILc4j29LwlkzPNsZVkmh3OL9/S+JJAxDENyMNd4XxLI6Ps+OZRrvC+RDCAZ4LKMeMEOZ7/tzVniWckAkgEkA0gGkAxwWUZOkQxEMpCnZcQLdjj7bW/OEs9KBpAMIBlAMoBkgMsycopkIJKBSAYiGYhkIB+REX/k1bzrPyUDSAaQDCAZQDJAIEMnCUDHKkBnTBE6cAM6fUygo9g/RzKAZADJAJIBJOPA7A5StHKeowSU9gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAA7CAYAAAAkTufiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAQASURBVGhD7ZrNKzZRGMbff8XexsrGRlISiaSUUpQFZSMLZCVKYmGhLCwtLBT+AJENxUpSWPhaECIf+Qj3e65xTu/MM/c58/HMMOM9V135aM495/oxc8+c5/whK7IQhCwEIQtByEIQshCELAQhC0HIQhCyEIRiQ7i+vqaVlRXq7++npqYmKikp+VaXlpZSS0sLDQ8P0+rqKj08PMiZRVdkCDc3NzQ+Pu5MgpvcT7msrIzm5ubo6elJzjS8QkP4/PyktbU1qqqqYieRFTc3N9Pu7q6cdTiFgvD+/k4LCwuZ++vrXFFRQZubm3L2wQqEgP+A5eXl3ABQjgIiEMLh4SHV1tayJ8q6u7q66OrqSibRywjh9fWVRkdH2RPkxbOzs87lbJIRwsHBAVVXV7PF8+LGxkY6PT2ViXgZIaDlcIXz5qWlJZmIlxbCy8uL8yDCFTXZfUJ8zx0T1jj/xcUFfXx8OF/jzAceGRmht7c3OSu/tBBub2+pvb2dLWpyUhB6enro7u5OVvoSfsbvueNNRg7k0UkL4fj4mOrr69miJicFYX5+XlbxCr/njjcZOZBHJy0EPHWVl5ezRU3OIgTkMD1FaiFsbGywBYOcFIQkLwcYeXTSQlhcXGSLBTkpCHBSN0YYeXTSQpienmaLKbvDRlWxcOIYeXRiITw/P9PQ0BBbTDlvEJAHuTixEHDtdXR0sMWU8wYBeQrvMUoshPPzc+e9nCsWZDectMIODg7SycmJ806Ae8XY2Bh7nNvIg1ycWAj7+/tUWVnJFgty2hAGBgZ8q0dYWuvr62OPV0Ye5OLEQojbHuG0Ieju8mG6ma5NshDitkc4yxB0Y1kIQe3R5LQhxL0cYF2b9EEI0x5NThsCHOfGCOvapA9CmPaYV+vapA9CMe0x69a1SR+EYtpj1q1rkz4IW1tbbIHfYuQrlA9CWjezrNh941byQSimPebBXJv0QIi7uJonIx9yuuWBcH9/T93d3ezg32LkQ063PBB+c3tU5tqkB8LR0RHV1NSwg6Maa4FhPgcMI9SJu7ZYaORDTrc8ELa3t9mBUZ0kAKUkQSCnWx4IcZfZ3U4DgFISILgHJg8EvIy0trayg8M4TQBKxYJoa2ujy8tLWe1LHgh4K5uammIHB/k7ACgVA2JmZsb3Ub0HAoRNGfg4myug83cCUIoDAp3h7OxMVvgnHwRofX3d2e7CFSr0TwBQigICG8649waIhYB9Sjs7O9TQ0MAWhLGHaWJigh4fH+WonxE+bQ7aUtjZ2Ul7e3tyhF8sBCUsY2HDZm9vr0MSJ8IGysnJSeeyAawsCPPAfDAvtbG0rq7O2WiKxVVsOzLJCOF/kYUgZCEIWQhCFoKQhSBkIRDRXzzCsURAE5U2AAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nclass ControlsButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {highlight: this.props.selected,\r\n        hoverHighlight: false};\r\n    }\r\n    //toggles 'selected' prop from parent component on click\r\n    toggle = () => {\r\n        if(!this.props.selected){\r\n            //calls function from parent componet prop that was passed in\r\n            this.props.onClick(this.props.id);\r\n        }\r\n        \r\n    };\r\n    //highlight button on hover\r\n    hoverToggle = () => {\r\n        this.setState({hoverHighlight: !this.state.hoverHighlight});\r\n    }\r\n    render() {\r\n        //Change highlight of button on render based on state\r\n        let highlight = this.props.selected;\r\n        let highlightColor = \"3px Solid Black\";\r\n        let hoverHighlight = this.state.hoverHighlight;\r\n        if (hoverHighlight){\r\n            highlightColor = \"3px Solid Green\";\r\n        }\r\n        if (highlight){\r\n            highlightColor = \"4px Solid #1f39bd\";\r\n        }\r\n        return <div>\r\n            {/*set padding from parent*/}\r\n            <div style={{paddingTop: this.props.paddingTop}}>\r\n            </div>\r\n            \r\n            <div onClick = {this.toggle} onMouseEnter={this.hoverToggle} onMouseLeave={this.hoverToggle} style = {{cursor: 'pointer', borderRadius: 2, border: highlightColor}}>\r\n                    <img width=\"100%\" src={this.props.image} alt=\"Game Room Image\" /> \r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nexport default ControlsButton;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport KeyBoardIcon from '../images/KeyBoard.png';\r\nimport GamePadIcon from '../images/GamePad.png';\r\nimport ControlsButton from './ControlsButton.js';\r\nclass InfoMenuBox extends React.Component {\r\n  constructor(props) {\r\n            super(props);\r\n            this.state = {showControls: false,\r\n            showNotes: true,\r\n            controlSetToggle1: true,\r\n            controlSetToggle2: true,\r\n            highlightControls: false,\r\n            highlightNotes: false}; \r\n            \r\n        }\r\n    //Highlights controls tab on menu box\r\n    toggleControlsHighlight = () => {\r\n        this.setState({highlightControls: !this.state.highlightControls});\r\n    }\r\n    //Highlights notes tab on menu box\r\n    toggleNotesHighlight = () => {\r\n        this.setState({highlightNotes: !this.state.highlightNotes});\r\n    }\r\n    //Toggles text under tabs\r\n    showNotes = () => {\r\n      this.setState({showControls: false, showNotes: true});\r\n    }\r\n    //Toggles text under tabs\r\n    showControls = () => {\r\n      this.setState({showControls: true, showNotes: false});\r\n    }\r\n    //Callback that was passed a prop into ControlsButton.js\r\n    onClick = (id) =>\r\n    {\r\n        if (id === \"keyboard1\" || id === \"gamepad1\"){\r\n            \r\n            this.setState({controlSetToggle1: !this.state.controlSetToggle1});\r\n            \r\n                this.props.setControlConfig(id);\r\n           \r\n        }\r\n        else if (id === \"keyboard2\" || id === \"gamepad2\"){\r\n            this.setState({controlSetToggle2: !this.state.controlSetToggle2});\r\n             \r\n                this.props.setControlConfig(id);\r\n           \r\n        }\r\n    }\r\n   \r\n  render() {\r\n    //this variable changes the displayed text values for controls\r\n    let controlSetToggle1 = this.state.controlSetToggle1;\r\n    let controlSetToggle2 = this.state.controlSetToggle2;\r\n\r\n    //default for unselected higlight of tab is 3px solid black \r\n    let controlsHighlightColor = '3px solid black';\r\n    let notesHighlightColor = '3px solid black';\r\n\r\n    //This tracks which tab should be highlighted, informing the user of current selection\r\n    let highlightControls = this.state.highlightControls;\r\n    let highlightNotes = this.state.highlightNotes;\r\n\r\n    let controls = this.state.showControls;\r\n    let notes = this.state.showNotes;\r\n\r\n    //These are variables as they need changed based on state during each render\r\n    let textP1;\r\n    let textP2;\r\n    let textNotes;\r\n    //These buttons are rendered in the controls tab\r\n    let keyBoardButtons;\r\n    let gamePadButtons;\r\n\r\n    //padding to center notes div\r\n    let notesPageGridPadding;\r\n\r\n    if (highlightControls){\r\n        controlsHighlightColor = '3px Solid Green';\r\n    }\r\n    if (highlightNotes){\r\n        notesHighlightColor = '3px Solid Green';\r\n    }\r\n    if (controls){\r\n       \r\n        controlsHighlightColor = '3px solid #1f39bd';\r\n        keyBoardButtons = <Grid item xs = {2}>\r\n                            <ControlsButton id = {\"keyboard1\"} image={KeyBoardIcon} paddingTop = {35} onClick = {this.onClick} selected={this.state.controlSetToggle1}></ControlsButton>\r\n                            <ControlsButton id = {\"keyboard2\"} image={KeyBoardIcon} paddingTop = {65} onClick = {this.onClick} selected={this.state.controlSetToggle2}></ControlsButton>\r\n                        </Grid>;\r\n        gamePadButtons = <Grid item xs = {2}>\r\n                             <ControlsButton id = {\"gamepad1\"} image={GamePadIcon} paddingTop = {33} onClick = {this.onClick} selected={!this.state.controlSetToggle1}></ControlsButton>\r\n                             <ControlsButton id = {\"gamepad2\"} image={GamePadIcon} paddingTop = {62} onClick = {this.onClick} selected={!this.state.controlSetToggle2}></ControlsButton>\r\n                        </Grid>;\r\n        \r\n        if (controlSetToggle1){\r\n            \r\n            textP1 =  <div style = {{ backgroundColor: '#9A9A9A', fontSize: 14, borderRadius: 15, color: 'black', border: '1px solid black'}}>\r\n            <p><u>Player1\r\n            </u>\r\n            <br></br>\r\n            Movement: WASD\r\n            <br></br>\r\n            Sword Slash: SPACE\r\n            <br></br>\r\n            Lightning Bolt: O\r\n            <br></br>\r\n            Magic Blast: P\r\n            <br></br>\r\n            Dodge: SHIFT\r\n            </p>\r\n            </div>\r\n        }\r\n        else {\r\n            \r\n            textP1 = <div style = {{ backgroundColor: '#9A9A9A', fontSize: 14, borderRadius: 15, color: 'black', border: '1px solid black'}}>\r\n            <p><u>Player1\r\n            </u><br></br>\r\n            Movement: Left Stick\r\n            <br></br>\r\n            Sword Slash: X<br></br>\r\n            Magic Blast: Right Trigger\r\n            <br></br>\r\n            Lightning: Left Trigger\r\n            <br></br>\r\n           \r\n            Dodge: Right Bumper\r\n            </p>\r\n            </div>\r\n           \r\n        }\r\n         if (controlSetToggle2){\r\n            textP2 =  <div style = {{ backgroundColor: '#9A9A9A', fontSize: 14, borderRadius: 15, color: 'black', border: '1px solid black'}}><p>\r\n            <u>Player2\r\n            </u>\r\n            <br></br>\r\n            Movement: ArrowKeys\r\n            <br></br>\r\n            Sword Slash: NumPad 0\r\n            <br></br>\r\n            Lightning: NumPad 8\r\n            <br></br>\r\n            Magic Blast: NumPad 9\r\n            <br></br>\r\n            Dodge: NumPad 4\r\n            </p>\r\n            </div>\r\n         }\r\n         else {\r\n             textP2 = <div style = {{ backgroundColor: '#9A9A9A', fontSize: 14, borderRadius: 15, color: 'black', border: '1px solid black'}}>\r\n            <p>\r\n            <u>Player2\r\n            </u><br></br>Movement: Left Stick<br></br>\r\n            Sword Slash: X<br></br>\r\n            Magic Blast: Right Trigger\r\n            <br></br>\r\n            Lightning: Left Trigger\r\n            <br></br>\r\n            Dodge: Right Bumper\r\n            </p>\r\n            </div>\r\n         }\r\n       \r\n    }\r\n    else if (notes){\r\n        \r\n        notesHighlightColor = '3px solid #1f39bd';\r\n        notesPageGridPadding = <Grid item xs = {2}> </Grid>\r\n        textNotes = <div style = {{paddingTop: 13}}><div style = {{ backgroundColor: '#9A9A9A', fontSize: 14, borderRadius: 15, color: 'black', border: '1px solid black'}}>\r\n        <p><u>v0.0.1</u> <br></br> <b>Hello, and welcome to Mild Mayhem!</b> <br></br>The goal is simple, defeat your opponent! Use your lightning bolts and magic blasts. You can deflect the magic blasts with your sword and dodge through attacks.</p>\r\n        </div>\r\n        </div>\r\n    }\r\n    return <div style={{ paddingLeft: 20, paddingTop: 10, height: '100%'}}>\r\n                <Grid container>\r\n                    <Grid item xs = {6}>\r\n                        <div onClick={this.showControls} onMouseEnter={this.toggleControlsHighlight} onMouseLeave={this.toggleControlsHighlight} style={{cursor: 'pointer', borderRadius: 15,backgroundColor: '#9A9A9A', textAlign: 'center', padding: 10, border: controlsHighlightColor}}>\r\n                            Controls\r\n                        </div>\r\n                    </Grid>\r\n                    <Grid item xs = {6}>\r\n                        <div onClick={this.showNotes} onMouseEnter={this.toggleNotesHighlight} onMouseLeave={this.toggleNotesHighlight} style={{cursor: 'pointer', borderRadius: 15,backgroundColor: '#9A9A9A', textAlign: 'center',  padding: 10, border: notesHighlightColor}}>\r\n                            Notes\r\n                        </div>\r\n                    </Grid>\r\n                    \r\n                </Grid>\r\n               \r\n                <div style={{backgroundColor: 'black', borderRadius: 15, textAlign: 'center', color: '#39FF14',verticalAlign: 'center', fontSize: 13,height:220, border: '4px solid black'}}>\r\n                    <Grid container>\r\n                        {/*These curly braced jsx values dissappear if they are not set in render, great for a changing info box values*/}\r\n                        {notesPageGridPadding}\r\n                        {keyBoardButtons}\r\n                        <Grid item xs = {8}>\r\n                            {textP1}\r\n                            {textNotes}\r\n                             {/*distance between control text*/}\r\n                            <div style={{paddingTop: 6}}>\r\n                            </div>\r\n                            {textP2}   \r\n                           \r\n                        </Grid>\r\n                        {gamePadButtons}\r\n                    </Grid>\r\n                </div>\r\n               \r\n            </div>\r\n}\r\n}\r\n\r\nexport default InfoMenuBox;","export default __webpack_public_path__ + \"static/media/GameShot5.80361c81.png\";","import io from 'socket.io-client';\r\nconst socket = io();\r\nfunction subscribeToShowRooms(cb) {\r\n    socket.on('showRooms', room => cb(null,room));\r\n}\r\nfunction clearSocket() {\r\n    socket.removeAllListeners();\r\n}\r\nfunction getRooms(cb2) {\r\n    console.log('getRoomsCalled');\r\n    socket.emit('getRooms');\r\n    socket.on('updateRooms', room => cb2(null,room));\r\n}\r\nfunction checkRoomCreation(){\r\n    socket.emit('checkRoomCreation');\r\n}\r\nfunction joinRoom(playerId){\r\n    socket.emit('joinRoom', playerId);\r\n}\r\n\r\nexport {subscribeToShowRooms,clearSocket,getRooms,socket,joinRoom};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport MatchRoomBox from '../components/MatchRoomBox.js';\r\nimport InfoMenuBox from '../components/InfoMenuBox.js';\r\nimport LocalGameImage from '../images/GameShot5.png';\r\nimport OnlineGameImage from '../images/OnlineGame.png';\r\nimport { Link } from 'react-router-dom';\r\nimport {subscribeToShowRooms, socket, getRooms, joinRoom} from '../api';\r\nclass MenuPage extends React.Component {\r\n  constructor(props) {\r\n            super(props);\r\n            console.log('menupage constructor called');\r\n           \r\n            \r\n            this.state = {\r\n                rooms: {},\r\n                controls: {\r\n                player1: {\r\n                    Movement: 'WASD',\r\n                    SwordSlash: 'SPACE',\r\n                    MagicBlast: 'P'\r\n                },\r\n                player2: {\r\n                    Movement: 'ArrowKeys',\r\n                    SwordSlash: 'NumPad0',\r\n                    MagicBlast: 'NumPad9'\r\n                }\r\n            }};\r\n        };\r\ncomponentDidMount(){\r\n    //Remove event listeners in case user pressed back from online game\r\n    console.log('component mounted');\r\n    \r\n    //Whenever the rooms on the server are updated, the room state is set again\r\n    subscribeToShowRooms((err, room) => {\r\n        let newRooms = room;\r\n        this.setRoomState(newRooms);\r\n    });\r\n    getRooms((err, room) => {\r\n        console.log('room is: ' + JSON.stringify(room));\r\n        let newRooms = room;\r\n        this.setRoomState(newRooms);\r\n    });\r\n    \r\n   \r\n}\r\ncomponentWillUnmount() {\r\n    console.log('componentUnmounted');\r\n    socket.removeAllListeners()\r\n}\r\nsetRoomState = (newRooms) => {\r\n    this.setState({rooms: newRooms});\r\n}\r\n/*Function passed into the infoMenuBox, Sets the control config object which then gets passed up to App.js and then down into the GamePage component and the phaser game \r\nPerhaps custom controls here can detect keycodes and translate directly into a keycode value that gets passed into phaser\r\nFor example, an option to click on swordslash and press a key to get the key code(ex: SPACE), then send that to the phaser game where it will\r\nbe set as the attack.*/\r\n  controlConfigSelected = (controlConfig) => {\r\n      if (controlConfig === \"keyboard1\"){\r\n          this.setState({controls: {\r\n              player1: {\r\n                Movement: 'WASD',\r\n                SwordSlash: 'SPACE',\r\n                MagicBlast: 'P'\r\n              },\r\n              player2: this.state.controls.player2\r\n\r\n          }});\r\n      }\r\n      else if (controlConfig === \"keyboard2\"){\r\n          this.setState({controls: {\r\n              player1: this.state.controls.player1,\r\n              player2: {\r\n                Movement: 'ArrowKeys',\r\n                SwordSlash: 'NumPad0',\r\n                MagicBlast: 'NumPad9'\r\n              },\r\n\r\n          }});\r\n      }\r\n      else if (controlConfig === \"gamepad1\"){\r\n          this.setState({controls: {\r\n              player1: {\r\n                Movement: 'GamePad',\r\n                SwordSlash: '',\r\n                MagicBlast: ''\r\n              },\r\n              player2: this.state.controls.player2\r\n\r\n          }});\r\n      }\r\n      else if (controlConfig === \"gamepad2\"){\r\n          this.setState({controls: {\r\n              player1: this.state.controls.player1,\r\n              player2: {\r\n                Movement: 'GamePad',\r\n                SwordSlash: '',\r\n                MagicBlast: ''\r\n              },\r\n\r\n          }});\r\n      }\r\n  };\r\n  //When a match room is clicked, the control config is passed to the game for the game start\r\n  matchRoomClicked = (gameType,roomName,playerId) => {\r\n      if(gameType === 'joinOnline'){\r\n        joinRoom(playerId);\r\n      }\r\n      \r\n      this.props.passGameConfig(gameType,roomName);\r\n      this.props.passControlConfig(this.state.controls);\r\n  };\r\n  render() {\r\n    let roomCount = this.state.rooms;\r\n    //console.log('roomCount is: ' + JSON.stringify(roomCount));\r\n    let joinMatchBox;\r\n    \r\n    //I set the resolution to 800*600, which is the size of an old school NewGrounds web game. It is currently not responsive\r\n    //This could be changed for a mobile depoloyment or something\r\n    return <div style={{backgroundColor: '#031316', borderRadius: 15, maxWidth: 800, minWidth:800, minHeight:600, maxHeight:600, margin: 'auto'}}>\r\n    <Grid container>\r\n        {/*Title Bar*/}\r\n        <Grid item xs={12}>\r\n            <div style={{textAlign: 'center', borderRadius: 15, backgroundColor: 'black', fontSize: 30, fontFamily: 'Audiowide', padding: 20, border: '4px solid #1f39bd'}}>\r\n                <div style={{color: '#39FF14'}}>\r\n                    <u>\r\n                        Mild Mayhem\r\n                    </u>\r\n                </div>\r\n            \r\n            </div>\r\n        </Grid>\r\n        {/*Interactive information box*/}\r\n        <Grid item xs={4}>\r\n            <InfoMenuBox setControlConfig={this.controlConfigSelected}></InfoMenuBox>\r\n        </Grid>\r\n\r\n        {/*Online match box*/}\r\n        <Grid item xs = {4}>\r\n            <div style={{paddingTop: 40, paddingBottom: 30}}>\r\n                <Link to='/game' style={{color: 'black'}}>\r\n                    <MatchRoomBox onClick={() => this.matchRoomClicked('createOnline')} image={OnlineGameImage} matchType={'Start Online Room'}></MatchRoomBox>\r\n                </Link>\r\n            </div>\r\n        </Grid>\r\n\r\n        {/*Offline match box*/}\r\n        <Grid item xs = {4}>\r\n            <div style={{paddingTop: 40, paddingBottom: 30}}> \r\n                {/*route to game*/}\r\n                <Link to='/game' style={{color: 'black'}}>\r\n                    <MatchRoomBox onClick={() => this.matchRoomClicked('offline')} image={LocalGameImage} matchType={'Start Local Room'}></MatchRoomBox>\r\n                </Link>\r\n            </div>\r\n        </Grid>\r\n\r\n        {/*List of available online rooms*/}\r\n        <Grid item xs = {1}>\r\n        </Grid>\r\n\r\n        <Grid item xs = {10}>\r\n        \r\n                <div style={{ textAlign: 'center', paddingTop: 15, font: 25, color: '#39FF14'}}>\r\n                <b>Available Online Matches</b>\r\n                </div>\r\n                <div style={{ borderRadius: 15, backgroundColor: '#9A9A9A', align: 'left', textAlign: 'left', minHeight:200, maxHeight:200, border: '1px solid'}}>\r\n                <Grid container>\r\n                {\r\n                    \r\n                    Object.keys(roomCount).map((room, index) => (\r\n                        <Grid item xs = {4}>\r\n                            <Link to='/game' style={{color: 'black'}}>\r\n                                <MatchRoomBox key={roomCount[room].id} onClick={() => this.matchRoomClicked('joinOnline', roomCount[room].name, roomCount[room].id)} image={LocalGameImage} matchType={roomCount[room].name}></MatchRoomBox>\r\n                            </Link>\r\n                        </Grid>\r\n                    ))\r\n\r\n                      \r\n                }\r\n                </Grid>\r\n                \r\n                </div>\r\n        </Grid>\r\n\r\n        <Grid item xs = {1}>\r\n        </Grid>\r\n    </Grid>\r\n   \r\n  </div>\r\n}\r\n}\r\n\r\nexport default MenuPage;","export default \"data:image/png;base64,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\"","\r\nimport Phaser from 'phaser';\r\nexport default class Player extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture)\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            this.body.setSize(30,61);\r\n            this.createAnimations(scene);\r\n            //Tracks changes in player orientation\r\n            //Player starts out looking forwards so x: 0, y: -1 makes sense as initial value\r\n            this.orientationVector = {x: 0, y: -1};\r\n            //\r\n            this.alive = true;\r\n            this.x = x;\r\n            this.y = y;\r\n            this.dodging = false;\r\n            this.scene = scene;\r\n            this.stunned = false;\r\n            //This can be passed into contructor later\r\n            //Should I use getters and setters like this?\r\n            this.setPlayerSpeed(400);\r\n           \r\n        }\r\n        \r\n        //Starts stun for player\r\n        playStun(){\r\n            this.toggleStun();\r\n            //calls a timer which removes player stun after 1 second\r\n            let timedEvent = this.scene.time.delayedCall(1000, this.onEvent, [], this);\r\n        }\r\n        knockBack(gameObj){\r\n          //This code finds the angle between the player and the object that damaged the player,\r\n          //then it sends the player flying in the exact opposite direction\r\n          let gameObjCenter = gameObj.getCenter();\r\n          let playerCenter = this.getCenter();\r\n          let vectorAngle = Phaser.Math.Angle.Between(gameObjCenter['x'],gameObjCenter['y'],playerCenter['x'],playerCenter['y']);\r\n          \r\n          let knockBackVel = 1200;\r\n          let movementX = Math.cos(vectorAngle)*knockBackVel;\r\n          let movementY = Math.sin(vectorAngle)*knockBackVel;\r\n          this.setVelocity(movementX,movementY);\r\n        }\r\n        onEvent(){\r\n          this.toggleStun();\r\n        }\r\n        toggleStun(){\r\n          //While player is stunned, changed the player opacity\r\n          this.stunned = !this.stunned;\r\n          if (this.stunned === false){\r\n            this.setAlpha(1);\r\n          }\r\n          else {\r\n            this.setAlpha(.5);\r\n          }\r\n          \r\n        }\r\n        dodge(){\r\n          //Changes player velocity and sets dodge property \r\n          this.body.setVelocity(this.orientationVector.x*1500,this.orientationVector.y*1500);\r\n          this.dodging = true;\r\n          this.setBounce(0);\r\n          console.log(this.orientationVector);\r\n          //This calls after the dodge cooldown completes\r\n          let timedEvent = this.scene.time.delayedCall(150, this.finishedDodging, [], this);\r\n        }\r\n        finishedDodging(){\r\n          this.setBounce(0);\r\n          this.dodging = false;\r\n          this.body.setVelocity(0,0);\r\n        }\r\n        //These two functions are for checking collisions in the scene code,\r\n        //In the event that player is hit while stunned, the player shouldn't take damage or do anything else that's strange.\r\n        getDodging(){\r\n          return this.dodging;\r\n        }\r\n        getStun(){\r\n          return this.stunned;\r\n        }\r\n        setPlayerSpeed(speed)\r\n        {\r\n          this.playerSpeed = speed;\r\n        }\r\n\r\n        setPlayerVelocity(velocityVector)\r\n        {\r\n          \r\n          this.body.setVelocity(velocityVector.x*this.playerSpeed,velocityVector.y*this.playerSpeed);\r\n          //Not Moving\r\n          if(velocityVector.x === 0 && velocityVector.y === 0){\r\n            this.anims.stop();\r\n          }\r\n          //Moving Up\r\n          else if (velocityVector.y > 0){\r\n            this.anims.play(this.texture.key + 'down', true);\r\n          }\r\n          //Moving Down\r\n          else if (velocityVector.y < 0){\r\n            this.anims.play(this.texture.key + 'up', true);\r\n          }\r\n          //Moving Right\r\n          else if (velocityVector.x > 0) {\r\n            this.anims.play(this.texture.key + 'right', true);\r\n          }\r\n          //Moving Left\r\n          else if (velocityVector.x < 0) {\r\n            this.anims.play(this.texture.key + 'left', true);\r\n          }\r\n    \r\n        }\r\n        setMovementAnim(velocityVector){\r\n          if (typeof this.anims !== 'undefined'){\r\n             //Not Moving\r\n              if(velocityVector.x === 0 && velocityVector.y === 0){\r\n                this.anims.stop();\r\n              }\r\n              //Moving Up\r\n              else if (velocityVector.y > 0){\r\n                this.anims.play(this.texture.key + 'down', true);\r\n              }\r\n              //Moving Down\r\n              else if (velocityVector.y < 0){\r\n                this.anims.play(this.texture.key + 'up', true);\r\n              }\r\n              //Moving Right\r\n              else if (velocityVector.x > 0) {\r\n                this.anims.play(this.texture.key + 'right', true);\r\n              }\r\n              //Moving Left\r\n              else if (velocityVector.x < 0) {\r\n                this.anims.play(this.texture.key + 'left', true);\r\n              }\r\n          }\r\n        }\r\n        setOrientationVector(velocityVector){\r\n          //Check to make sure 0,0 is not passed in(that is not a direction)\r\n          if(Math.abs(velocityVector.x)+Math.abs(velocityVector.y)>0){\r\n             \r\n            //Check to see if there is a change in orientation\r\n            if (this.orientationVector.x !== velocityVector.x || this.orientationVector.y !== velocityVector.y){\r\n              this.orientationVector = velocityVector;\r\n            }\r\n\r\n          }\r\n        }\r\n        gameOver(){\r\n          this.alive = false;\r\n        }\r\n        isAlive(){\r\n          return this.alive;\r\n        }\r\n        getOrientationVector(){\r\n          return this.orientationVector;\r\n        }\r\n        setHealthBar(healthBar){\r\n          this.healthBar = healthBar;\r\n        }\r\n        getHealthBar(){\r\n          return this.healthBar;\r\n        }\r\n        getX()\r\n        {\r\n          return this.x;\r\n        }\r\n        getY()\r\n        {\r\n          return this.y;\r\n        }\r\n        //Create player animations\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: this.texture.key + 'left',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 4, end: 5 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: this.texture.key + 'up',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 0, end: 1 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: this.texture.key + 'right',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 2, end: 3 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: this.texture.key + 'down',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 6, end: 7 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          \r\n        }\r\n    }\r\n","import Phaser from 'phaser';\r\nexport default class Controls extends Phaser.GameObjects.Sprite\r\n    {\r\n\r\n        constructor (scene,type,gamePadCount,gamePadNumber)\r\n        {\r\n            //Information is being passed from the react application into here for control config\r\n            super(scene,type,gamePadCount,gamePadNumber);\r\n            this.setKeyInput(scene,type);\r\n            this.scene = scene;\r\n            //The gamePad Count and gamePad number are tracked to make sure that the passed\r\n            //gamepad amounts are equal to the detected gamepads in the scene,\r\n            //Otherwise errors will occurs\r\n            //The onConnect listener does not seem to work normally,  \r\n            //But I am sure there is a better solution for this\r\n            this.gamePadCount = gamePadCount;\r\n            this.gamePadNumber = gamePadNumber;\r\n            \r\n        }\r\n\r\n        setWASDControls(){\r\n          this.directionals = this.directionals = this.scene.input.keyboard.addKeys({\r\n                up:Phaser.Input.Keyboard.KeyCodes.W,\r\n                down:Phaser.Input.Keyboard.KeyCodes.S,\r\n                left:Phaser.Input.Keyboard.KeyCodes.A,\r\n                right:Phaser.Input.Keyboard.KeyCodes.D\r\n            });\r\n          this.magicBlastAttack = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P);\r\n          this.swordSwing = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\r\n          this.dodge = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SHIFT);\r\n          this.lightningBolt = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.O);\r\n        }\r\n        setArrowKeyControls(){\r\n          this.directionals = this.scene.input.keyboard.createCursorKeys();\r\n          this.magicBlastAttack = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_NINE);\r\n          this.swordSwing = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_ZERO);\r\n          this.dodge = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_FOUR);\r\n          this.lightningBolt = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_EIGHT);\r\n        }\r\n        setKeyInput(scene,{directionals,magicBlast,swordSwing,dodge}={}){\r\n          //Potentially can add more configurable controls by using passing keycodes in here in the future\r\n          if (directionals === 'WASD'){\r\n           this.setWASDControls();\r\n          }\r\n          else if (directionals === 'ArrowKeys'){\r\n           this.setArrowKeyControls();\r\n          }\r\n          else if (directionals === 'GamePad'){\r\n            \r\n            this.gamePadMode = true;\r\n            console.log(\"game pad mode active\" + this.gamePadMode);\r\n            this.lightningBolt = {};\r\n            this.swordSwing = {};\r\n            this.magicBlastAttack = {};\r\n            this.dodge = {};\r\n           \r\n            const xAxis = 0;\r\n            const yAxis = 0;\r\n            this.directionals = {\r\n                up: {isDown: yAxis > 0 ? true : false},\r\n                down: {isDown: yAxis < 0 ? true : false},\r\n                left: {isDown: xAxis > 0 ? true : false},\r\n                right: {isDown: xAxis > 0 ? true : false},\r\n              };\r\n            this.scene.input.gamepad.once('connected', function (pad, event) {\r\n             \r\n            }, this);\r\n            this.scene.input.gamepad.on('down', function (pad, button, index) {\r\n             \r\n              this.swordSwing.isDown = pad.X;\r\n              this.magicBlastAttack.isDown = pad.R2;\r\n              this.dodge.isDown =  pad.R1;\r\n              this.lightningBolt.isDown = pad.L2;\r\n              \r\n            }, this);\r\n           this.scene.input.gamepad.on('up', function (pad, button, index) {\r\n              this.swordSwing.isDown = false;\r\n              this.magicBlastAttack.isDown = false;\r\n              this.dodge.isDown = false;\r\n              this.lightningBolt.isDown = false;\r\n              \r\n            }, this);\r\n          }\r\n          \r\n          \r\n          \r\n          \r\n          \r\n         \r\n        }\r\n        \r\n        getMovementVector(){\r\n         //This function returns an x and y value that can easily be multiplied onto\r\n         //direction values in the scene, ex: {x:0*velocity,y:1*velocity}, \r\n          if (this.gamePadMode){\r\n            let pad: Phaser.Input.Gamepad.Gamepad;\r\n\r\n            //If there are any controllers connected and the gamepad isActive at all then...\r\n            if (this.scene.input.gamepad.total&&this.scene.input.gamepad.isActive()){ \r\n               \r\n                //If the total amount of gamepads are greater than or equal to the desired amount...\r\n                if (this.scene.input.gamepad.total>=this.gamePadCount){\r\n                 \r\n                  pad = this.scene.input.gamepad.pad1\r\n                  \r\n                  if (this.scene.input.gamepad.pad2 && this.gamePadNumber===2){\r\n                    pad = this.scene.input.gamepad.pad2;\r\n                  }\r\n\r\n                  const xAxis = pad.axes[0].getValue();\r\n                  const yAxis = pad.axes[1].getValue();\r\n                \r\n                  this.directionals = {\r\n                    up: {isDown: yAxis < 0 ? true : false},\r\n                    down: {isDown: yAxis > 0 ? true : false},\r\n                    left: {isDown: xAxis < 0 ? true : false},\r\n                    right: {isDown: xAxis > 0 ? true : false},\r\n                  }\r\n                }\r\n                \r\n                \r\n                \r\n            }\r\n            else {\r\n                  console.log(\"Hey you didn't connect enough controllers\");\r\n                  //We should create a callback function here that resets the control scheme that is missing\r\n                  //and inform the user of the error of their ways.\r\n                  //We need the player number which is\r\n                  if (this.gamePadNumber == 1){\r\n                    //set controls back to keyboard wasd\r\n                    console.log(\"WASD keyboard Set\");\r\n                    this.setWASDControls();\r\n                    this.gamePadCount-=1;\r\n                  }\r\n                  else\r\n                  {\r\n                    //set controls to arrowkeys\r\n                    console.log(\"Arrow keyboard Set\");\r\n                    this.setArrowKeyControls();\r\n                    this.gamePadCount-=1;\r\n                  }\r\n                }\r\n\r\n       \r\n           }\r\n         return {\r\n           //Gets the vector for a directional press(y is inverted as it is in phaser/html5)\r\n           x: ((this.directionals.right.isDown)? 1:0)+((this.directionals.left.isDown)? -1:0),\r\n           y: ((this.directionals.up.isDown)? -1:0)+((this.directionals.down.isDown)? 1:0)};\r\n        }\r\n        getMoveInput(){\r\n          return {lightningBoltFiring: this.lightningBolt.isDown, dodgeFiring: this.dodge.isDown, magicBlastFiring: this.magicBlastAttack.isDown,swordSwingFiring: this.swordSwing.isDown};\r\n          \r\n        }\r\n        \r\n       \r\n    }","import Phaser from 'phaser';\r\nexport default class MagicBlast extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        //https://www.youtube.com/watch?v=jEaoeEdv7eU I used this tutorial to for extending a sprite in phaser3\r\n        constructor (scene,x,y,texture,{owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            //Make sprite .4 times the size\r\n            this.setScale(.4);\r\n            this.magicSpeed = 800;\r\n            //Turns hitbox into circle\r\n            this.setCircle(85);\r\n            this.createAnimations(scene);\r\n            this.anims.play('magicBlastSpin',true);\r\n            //Set which player owns the magic blast\r\n            this.owner = owner;\r\n            this.x = x;\r\n            this.y = y;\r\n            let magicBlastTimeOut = this.scene.time.delayedCall(1000, this.explodeTimer, [], this);\r\n            //this callback plays at the end of an animation sequence\r\n            this.on('animationcomplete', function(anim) {\r\n              //This nested event emit allows for specific animations to trigger specific actions\r\n              //Without it, the object would destroy itself at the end of any animation loop, \r\n              //AKA before it explodes\r\n              this.emit('animationcomplete_' + anim.key, anim);\r\n            },this);\r\n            this.on('animationcomplete_magicBlastExplode', function() {\r\n              this.destroy();\r\n            });\r\n            \r\n        }\r\n        //Callback for magicBlast timeout timer, \r\n        //this runs if the magicBlast hasn't been destroyed by some other means\r\n        //(Hits player) after a certain amount of time\r\n        explodeTimer(){\r\n          this.explode();\r\n        }\r\n\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'magicBlastSpin',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 1, end: 12 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: 'magicBlastExplode',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 13,end: 29 }),\r\n            frameRate: 20,\r\n           \r\n          });\r\n          \r\n        }\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n        \r\n        setMagicBlastVelocity(velocity){\r\n          \r\n          let vectorAngle = Phaser.Math.Angle.Between(0,0,velocity.x,velocity.y);\r\n          this.body.setVelocity(velocity.x*Math.abs(Math.cos(vectorAngle))*this.magicSpeed,velocity.y*Math.abs(Math.sin(vectorAngle))*this.magicSpeed);\r\n        }\r\n        explode(){\r\n          if (this.body){\r\n            this.body.enable = false;\r\n            this.anims.play('magicBlastExplode',\r\n            true);\r\n          }\r\n         \r\n        }\r\n        deflectFrom(player){\r\n          //This code takes an input object \r\n          //and sets a velocity that moves the magicblast directly away from it\r\n          let vectorAngle = Phaser.Math.Angle.Between(player.x,player.y,this.x,this.y);\r\n          this.body.setVelocity(Math.cos(vectorAngle)*this.magicSpeed,Math.sin(vectorAngle)*this.magicSpeed);\r\n        }\r\n    }","import Phaser from 'phaser';\r\nexport default class SwordSwing extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,{owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n            //Pair sprite to owner sprite(Either will be a player or opponent)\r\n            this.owner = owner;\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n           \r\n            \r\n            \r\n            this.setCircle(220);\r\n            \r\n            this.body.setOffset(this.owner.displayWidth/2,this.owner.displayHeight/2);\r\n            this.setScale(.4);\r\n          \r\n          \r\n            this.createAnimations(scene);\r\n            //When the swing completes, the sword is destroyed\r\n            this.on('animationcomplete', function() {\r\n              this.swinging = false;\r\n              this.destroy();\r\n            },this);\r\n           \r\n\r\n           \r\n            this.x = x;\r\n            this.y = y;\r\n            this.swinging = false;\r\n        }\r\n       \r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'swordSlash',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 1, end: 5 }),\r\n            frameRate: 30,\r\n            hideOnComplete: true\r\n          });\r\n          \r\n          \r\n        }\r\n        update(){\r\n          //This is called in the update l\r\n          if (this.swinging){\r\n            this.followOwner();\r\n          }\r\n        }\r\n        //Orients sword to player, so that the sword doesn't just swing up all the time\r\n        orientSword(playerOrientationVector){\r\n         \r\n          //Convert orientation vector to degrees, shift 90 degrees(The sword animation starts by facing up, it also inverts the orientation y vector as the yaxis is inverted)\r\n          let newOrientation = (Math.atan2(-playerOrientationVector.y,-playerOrientationVector.x)*180/Math.PI-90);\r\n         \r\n          this.angle = newOrientation; \r\n          \r\n        }\r\n        \r\n        swingSword(){\r\n\r\n          this.swinging = true;\r\n          this.orientSword(this.owner.getOrientationVector());\r\n          this.anims.play('swordSlash');\r\n        }\r\n        isSwinging(){\r\n          return this.swinging;\r\n        }\r\n\r\n        followOwner(){\r\n          this.x = this.owner.x;\r\n          this.y = this.owner.y;\r\n        }\r\n        inSwordSweep(gameObject){\r\n          //Checks to see if an object is within the sweep of the sword attack\r\n          //converts the angle between objects to rotate counter clockwise\r\n          //in order to match the rotation of the sword angle math in orient sword\r\n          //**A -270 degrees seems to be automatically converted to 90 inside of phaser.arcade.sprite.angle after it is set\r\n          let collisionAngle = Phaser.Math.Angle.Between(gameObject.x,gameObject.y,this.x,this.y)*180/Math.PI-90;\r\n         \r\n          //This is the collision width of the object\r\n          if (collisionAngle>this.angle-60&&collisionAngle<this.angle+60){\r\n            return true;\r\n          }\r\n          else{\r\n            return false;\r\n          }\r\n        }\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n    }","import Phaser from 'phaser';\r\nexport default class HealthBar extends Phaser.GameObjects.Sprite\r\n {\r\n    //This is from the Phaser3 healthbar example,\r\n    //https://phaser.io/examples/v3/view/game-objects/graphics/health-bars-demo\r\n    // with a few tweaks it seems to work great for this game\r\n    constructor (config)\r\n    {\r\n        super(config.scene,config.x,config.y);\r\n        config.scene.add.existing(this);\r\n        var scene = config.scene;\r\n        var x = config.x;\r\n        var y = config.y;\r\n        this.bar = new Phaser.GameObjects.Graphics(scene);\r\n        this.canTakeDamage = true;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.value = 100;\r\n        //What is this.p?\r\n        this.p = 76 / 100;\r\n\r\n        this.draw();\r\n\r\n        scene.add.existing(this.bar);\r\n    }\r\n\r\n    decrease (amount)\r\n    {\r\n        let concurrentDamageCheck = this.scene.time.delayedCall(200, this.setTakeDamage, [], this);\r\n        if (this.canTakeDamage){\r\n             this.value -= amount*10;\r\n             this.canTakeDamage = false;\r\n        }\r\n       \r\n        if (this.value < 0)\r\n        {\r\n            this.value = 0;\r\n        }\r\n\r\n        this.draw();\r\n\r\n        return (this.value === 0);\r\n    }\r\n\r\n    setTakeDamage()\r\n    {\r\n        this.canTakeDamage = true\r\n    }\r\n\r\n    draw ()\r\n    {\r\n        this.bar.clear();\r\n\r\n        //  BG\r\n        this.bar.fillStyle(0x000000);\r\n        this.bar.fillRect(this.x, this.y, 800, 16);\r\n\r\n        //  Health\r\n\r\n        this.bar.fillStyle(0xffffff);\r\n        this.bar.fillRect(this.x + 2, this.y + 2, 792, 12);\r\n\r\n        if (this.value < 30)\r\n        {\r\n            this.bar.fillStyle(0xff0000);\r\n        }\r\n        else\r\n        {\r\n            this.bar.fillStyle(0x00ff00);\r\n        }\r\n\r\n        var d = Math.floor(this.p * this.value);\r\n\r\n        this.bar.fillRect(this.x + 2, this.y + 2, d*10, 12);\r\n    }\r\n\r\n}","import Phaser from 'phaser';\r\nexport default class CoolDownBar extends Phaser.GameObjects.Sprite\r\n {\r\n    //This is from the Phaser3 healthbar example,\r\n    //https://phaser.io/examples/v3/view/game-objects/graphics/health-bars-demo\r\n    // with a few tweaks it seems to work great for this game\r\n    constructor (config,{duration})\r\n    {\r\n        super(config.scene,config.x,config.y);\r\n        config.scene.add.existing(this);\r\n        this.scene = config.scene;\r\n        this.duration = duration;\r\n        var x = config.x;\r\n        var y = config.y;\r\n        this.bar = new Phaser.GameObjects.Graphics(this.scene);\r\n        this.canTakeDamage = true;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.running = false;\r\n        this.value = 72;\r\n        \r\n        //What is this.p?\r\n        this.p = 100 / 100;\r\n\r\n        this.draw();\r\n\r\n        this.scene.add.existing(this.bar);\r\n    }\r\n\r\n    decrease (amount)\r\n    {\r\n        let concurrentDamageCheck = this.scene.time.delayedCall(40, this.setTakeDamage, [], this);\r\n        if (this.canTakeDamage){\r\n             this.value -= amount;\r\n             this.canTakeDamage = false;\r\n        }\r\n       \r\n        if (this.value < 0)\r\n        {\r\n            this.value = 0;\r\n        }\r\n\r\n        this.draw();\r\n\r\n        return (this.value === 0);\r\n    }\r\n\r\n    setTakeDamage()\r\n    {\r\n        this.canTakeDamage = true\r\n    }\r\n    start()\r\n    {\r\n        console.log(\"start was called\");\r\n        this.running = true;\r\n        this.p = 0;\r\n        this.timer = this.scene.time.delayedCall(this.duration, null, [], this);\r\n    }\r\n    update()\r\n    {\r\n        //if it's running\r\n        if (this.running){\r\n            var progress = this.timer.getProgress();   // ms\r\n            this.p = progress\r\n            //console.log(\"elapsed is:\" + elapsed);\r\n            this.draw();\r\n            if (this.p>=1){\r\n                this.p = 1;\r\n            }\r\n        }\r\n    }\r\n    draw ()\r\n    {\r\n        this.bar.clear();\r\n\r\n        //  BG\r\n        //this.bar.fillStyle(0x000000);\r\n        //this.bar.fillRect(this.x, this.y, 46, 72);\r\n\r\n        //  Health\r\n\r\n        //this.bar.fillStyle(0xffffff);\r\n        //this.bar.fillRect(this.x , this.y ,46, 72);\r\n\r\n       \r\n        this.bar.fillStyle(0x0000ff);\r\n        \r\n\r\n        var d = Math.floor(this.p * this.value);\r\n\r\n        this.bar.fillRect(this.x , this.y + 72, 46, -d);\r\n    }\r\n\r\n}","import Phaser from 'phaser';\r\nimport CoolDownBar from \"../sprites/CoolDownBar.js\"\r\nexport default class CoolDown extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,coolDownMS)\r\n        {\r\n            super(scene,x,y,texture);\r\n            \r\n            //Adds sprite to screen\r\n            this.scene = scene;\r\n            this.coolDownBar = new CoolDownBar({scene: this.scene, x: x-23, y: y-34},{duration: coolDownMS});\r\n            \r\n            //scene.add.existing(this.coolDownBar);\r\n            scene.add.existing(this);\r\n            \r\n            this.setScale(.5);\r\n            this.active = false;\r\n            //Duration of cooldown\r\n            this.coolDownMS = coolDownMS;\r\n            this.x = x;\r\n            this.y = y;\r\n           \r\n            \r\n            \r\n        }\r\n        startCoolDown(){\r\n            this.active = true;\r\n            this.coolDownBar.start();\r\n            //Change opacity\r\n            this.setAlpha(.5);\r\n            console.log('scene is: ' + this.scene);\r\n            if(this.scene){\r\n                let timedEvent = this.scene.time.delayedCall(this.coolDownMS, this.onEvent, [], this);\r\n            }\r\n            //let timedEvent = this.scene.time.delayedCall(this.coolDownMS, this.onEvent, [], this);\r\n        }\r\n        update(){\r\n            this.coolDownBar.update();\r\n        }\r\n        isActive()\r\n        {\r\n            return this.active;\r\n        }\r\n        onEvent(){\r\n            this.setAlpha(1);\r\n            this.active = false;\r\n        }\r\n    }","import Phaser from 'phaser';\r\nexport default class LightningBolt extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n        //This object is purely an animation, it has no hitbox as Axis aligned bounding boxes (AABB)\r\n        //The reason is that to implement a diagonal attack, one would need to create a diagonal bounding box\r\n        //This is impossible with AABB, so another solution was used with\r\n        //a series of lightningBolt Hitbox objects \r\n        constructor (scene,x,y,texture,{owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n           \r\n            scene.add.existing(this);\r\n            \r\n            //create and play lightning strike animations\r\n            this.createAnimations(scene);\r\n            this.anims.play('lightningStrike',true);\r\n            \r\n            //set angle of object to match that of the player\r\n            let vectorAngle = Phaser.Math.Angle.Between(0,0,owner.getOrientationVector().x,owner.getOrientationVector().y);\r\n           \r\n            //Angle is in degrees in phaser,\r\n            //as well, the object needs to be rotated 90 extra degrees to actually line up with the player\r\n            this.angle = vectorAngle*180/Math.PI+90;\r\n            this.owner = owner;\r\n            \r\n            //This code sets the animation position at a distance just outside the width/height\r\n            //of the player so it doesn't look like it spawned right on top of them \r\n            this.x = x + (owner.getOrientationVector().x*owner.width/2) + (owner.getOrientationVector().x*this.height/2*Math.abs(Math.cos(vectorAngle)));\r\n            this.y = y + (owner.getOrientationVector().y*owner.height/2) + (owner.getOrientationVector().y*this.height/2*Math.abs(Math.sin(vectorAngle)));\r\n           \r\n           //This timer is for if the lightning bolt doesn't collide with a player and times out.\r\n           //it then destroys the animation object\r\n            let timedEvent = this.scene.time.delayedCall(3000, this.endLightningBolt, [], this);\r\n            \r\n            this.on('animationcomplete', function(anim) {\r\n              this.emit('animationcomplete_' + anim.key, anim);\r\n            },this);\r\n            //This animation runs once the lightning has reached it's peak 'size'\r\n            //and spreads across the screen, it basically \r\n            //just sits there until a collision or timeout\r\n            this.on('animationcomplete_lightningStrike', function() {\r\n              this.anims.play('lightningSizzle');\r\n            });\r\n            \r\n        }\r\n        endLightningBolt(){\r\n          this.destroy();\r\n        }\r\n        //Creates lightning animations\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'lightningStrike',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 1, end: 17 }),\r\n            frameRate: 30,\r\n          });\r\n          scene.anims.create({\r\n            key: 'lightningSizzle',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 15, end: 17 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n        }\r\n        //Used for checking collisions, etc\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n       \r\n        \r\n       \r\n    }","import Phaser from 'phaser';\r\nexport default class lightningHB extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,{owner, animationSprite, Olength}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            this.setCircle(16);\r\n            //The sprite is an invisible hitbox\r\n            this.setVisible(false);\r\n\r\n            this.texture = texture;\r\n\r\n            //Track which animation sprite this lightning hitbox belongs to. This is needed for collisions.\r\n            this.animationSprite = animationSprite;\r\n\r\n            this.owner = owner;\r\n            \r\n            //Center \r\n            this.x = x+owner.width-8;\r\n            this.y = y+owner.height-8;\r\n            this.oscillationLength = Olength;\r\n            this.startingOlength = Olength;\r\n            this.orientationx = owner.getOrientationVector().x;\r\n            this.orientationy = owner.getOrientationVector().y;\r\n            \r\n            //Creates a recursive, growing oscillation distance that accelerates with the lightning \r\n            //bolt. \r\n            //This allows for an illision of a diagonal, rotating hitbox that arcade physics cannot create,\r\n            //I'd rather not have to use matter just for diagonal hitboxes,\r\n            //or resort to custom hitboxes and collision detection in the update loop\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                x: this.x + this.oscillationLength*this.orientationx,\r\n                y: this.y + this.oscillationLength*this.orientationy,\r\n                duration: 100,\r\n                yoyo: true,\r\n                onComplete: onCompleteHandler,\r\n                onCompleteParams: [this.scene]\r\n            });\r\n           //Recursive callback function that allows for a growing oscillation length to our circular hitbox, simulating a non AABB hitbox effectively\r\n           function onCompleteHandler(tween, targets, scene){\r\n                let self = targets[0];\r\n                if(self){\r\n                        //Each iteration, this multiplies the distance,\r\n                        //an exponential growth occurs\r\n                        self.oscillationLength *= 3;\r\n                    //This runs while the hitboxes don't move at max length\r\n                    if (self.oscillationLength <= 1000*self.startingOlength/100){\r\n                            self.scene.tweens.add({\r\n                            targets: self,\r\n                            x: self.x + self.oscillationLength*self.orientationx,\r\n                            y: self.y + self.oscillationLength*self.orientationy,\r\n                            duration: 100,\r\n                            yoyo: true,\r\n                            onComplete: onCompleteHandler,\r\n                        \r\n                        });\r\n                    }\r\n                    //This runs once the hitboxes have reached the maximum range of movement\r\n                    else {\r\n                        if (self){\r\n                            self.scene.tweens.add({\r\n                            targets: self,\r\n                            //1000 is maximum blast length, then a ratio of that length is calculated in x and y distances\r\n                            x: self.x + 1000*self.orientationx*self.startingOlength/100,\r\n                            y: self.y + 1000*self.orientationy*self.startingOlength/100,\r\n                            duration: 100,\r\n                            onComplete: countRuns,\r\n                            repeat: 10,\r\n                            yoyo: true,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n               \r\n            };\r\n            //This function destroys the object\r\n            function countRuns(tween, targets, scene){\r\n                let self = targets[0];\r\n                self.destroy();\r\n            }\r\n            \r\n        }\r\n        //Reference to animation sprite to destroy for collisions\r\n        destroyAnimationSprite(){\r\n            this.animationSprite.destroy();\r\n        }\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n        \r\n        \r\n      \r\n    }","import { Scene } from 'phaser';\r\nimport Player from \"../sprites/Player.js\";\r\nimport Controls from \"../controls/Controls.js\";\r\nimport MagicBlast from \"../sprites/MagicBlast.js\";\r\nimport SwordSwing from \"../sprites/SwordSwing.js\";\r\nimport Phaser from 'phaser';\r\nimport bckg from '../assets/bckg.png';\r\nimport HealthBar from \"../sprites/HealthBar.js\";\r\nimport CoolDown from \"../sprites/CoolDown.js\";\r\nimport LightningBolt from '../sprites/lightningBolt.js';\r\nimport LightningHB from '../sprites/lightningBoltHitbox.js';\r\n\r\n//import proxy from 'socket.io-proxy';\r\nlet LocalGameScene = {\r\n    \r\n    \r\n    preload: function()\r\n        {\r\n            //I load the images from my publicly hosted imgur\r\n            //because the file system seems to break for some reason when this is run in IonPhaser\r\n            //(Which is inside a React application)\r\n            //I make these drawings/spritesheets in piskel\r\n            this.load.image('bckg', 'https://i.imgur.com/DMVC2IQ.png');\r\n            this.load.image('wall', 'https://i.imgur.com/av8q7Or.png');\r\n            this.load.image('vwall', 'https://i.imgur.com/UB2GdEL.png');\r\n            this.load.spritesheet('swordSwing', 'https://i.imgur.com/ULyXfap.png', {frameWidth: 500, frameHeight: 500});\r\n            this.load.image('swordCool', 'https://i.imgur.com/SnLjQdR.png');\r\n            this.load.image('blastCool', 'https://i.imgur.com/d4Enueh.png');\r\n            this.load.spritesheet('magicBlast', 'https://i.imgur.com/dEhNPqO.png', {frameWidth: 150, frameHeight: 150});\r\n            this.load.spritesheet('explosion','https://i.imgur.com/UHZiUKC.png', {frameWidth: 192, frameHeight: 192});\r\n            this.load.spritesheet('player', 'https://i.imgur.com/WlEeiKT.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('otherPlayer','https://i.imgur.com/NYAJusD.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('Background','https://i.imgur.com/8SzCikO.png', {frameWidth: 800, frameHeight: 600});\r\n            this.load.image('dodgeCool', 'https://i.imgur.com/mTklmkU.png');\r\n            this.load.spritesheet('lightningBolt', 'https://i.imgur.com/3MskIUy.png', {frameWidth: 16, frameHeight: 1000});\r\n            this.load.image('lightningCool', 'https://i.imgur.com/FVquIxw.png');\r\n        },\r\n\r\n    create: function()\r\n        {   \r\n           \r\n           \r\n           /*I define some of the functions ex:this.deflectBlast\r\n           this way instead of outside of the preload/create/update\r\n           because that is the way they don't throw an error while using IonPhaser,\r\n           Perhaps they can be moved to another file and imported in*/\r\n\r\n          //Deflect Magic Blast with sword\r\n            this.deflectBlast = function(magicBlast,swordHitbox){\r\n                if(swordHitbox.inSwordSweep(magicBlast)){\r\n                    magicBlast.deflectFrom(swordHitbox.getOwner());\r\n                }\r\n            };\r\n           //Create explosion animation\r\n            this.explosionAnim = this.anims.create({\r\n                key: 'explode',\r\n                frames: this.anims.generateFrameNumbers('explosion',{ start: 1, end: 23}),\r\n                frameRate: 10,\r\n                repeat: -1\r\n            });\r\n            //Callback function for player/magicBlast Collision\r\n            this.playerHit = function(magicBlast,player){\r\n               //Check that the magicBlast is hitting the right player\r\n                if (magicBlast.getOwner()!==player){\r\n                    magicBlast.explode();\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        player.playStun();\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function \r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(magicBlast);\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            this.playerHitSwordSwing = function(swordSwing, player){\r\n           \r\n                if(swordSwing.getOwner()!==player){\r\n\r\n                    //Problem, this code isn't working. It's because the stun check isn't working at the correct time \r\n                    //and the player set function isn't set before the player takes like double or triple damage\r\n                    //Since the hitbox isn't destroy on impact it does a lot of other stuff\r\n                    //Potential Fixes: \r\n                    //Destroy sword hitbox\r\n                    //Don't let the player take damage within like, a certain amount of time. \r\n                    //Somehow wait for the decrease to happen and then rechecking the stun, async functions?\r\n                    //\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        \r\n                        \r\n                        player.playStun();\r\n\r\n\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function \r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(swordSwing);\r\n                    }\r\n                }\r\n            }\r\n            //Collision between lightning and player\r\n            this.playerHitLightning = function(lightningBolt,player){\r\n                //Players cannot hit themselves with their own attacks\r\n                if(lightningBolt.getOwner()!==player){\r\n                   \r\n                    if (player.getStun() === false && player.getDodging() === false){\r\n                        \r\n                        //Stun is started for player\r\n                        player.playStun();\r\n\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //Player dies\r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Send players back to main menu\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        }\r\n                        \r\n                        player.knockBack(lightningBolt);\r\n                      \r\n                        //Destroy the animation associated with these hitboxes\r\n                        lightningBolt.destroyAnimationSprite();\r\n\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        lightningBolt.scene.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== player) {\r\n                                lightningBolt.body.enable = false;\r\n                            }\r\n                    });\r\n                }\r\n            }\r\n            }\r\n            //Callback for sending user back to main page when game ends\r\n            this.redirect = function(){\r\n                  window.location.replace('https://mildmayhem.herokuapp.com/');\r\n            }\r\n            //Glowing Background Sprite\r\n            this.background = this.add.sprite(400,300,'Background');\r\n            this.anims.create({\r\n                key: 'glow',\r\n                frames: this.anims.generateFrameNumbers('Background', { start: 1, end: 12 }),\r\n                frameRate: 4,\r\n                repeat: -1,\r\n                yoyo: true\r\n            });\r\n            this.background.anims.play('glow');\r\n            \r\n            //Refactoring idea: make every variable passed into constructors \r\n            //descriptive javascript properties for readability\r\n\r\n            //Create Both Players\r\n            this.player1 = new Player(this, 400, 500,'player', this.explosionAnim);\r\n            this.player2 = new Player(this, 400, 100, 'otherPlayer', this.explosionAnim);\r\n            \r\n            //Create Win Text\r\n            this.youWin = this.add.text(150,300-60,'PLAYER2 WINS ',{fontSize: '70px', color: '#66FF00'});\r\n            this.youWin.setVisible(false);\r\n\r\n            //Create Health Bars\r\n            this.healthBarP1 = new HealthBar({scene: this, x: 0, y:584});\r\n            this.healthBarP2 = new HealthBar({scene: this, x: 0, y:0});\r\n\r\n            //Create Cooldowns: Note, final variable passed in is a timer, it sets how long the cooldown lasts in milliseconds            \r\n            this.swordCoolDownP1 = new CoolDown(this, 230, 560, 'swordCool', 700);\r\n            this.swordCoolDownP2 = new CoolDown(this, 570, 40, 'swordCool', 700);\r\n           \r\n            this.magicCoolDownP1 = new CoolDown(this, 278, 560, 'blastCool', 1000);\r\n            this.magicCoolDownP2 = new CoolDown(this, 618, 40, 'blastCool', 1000);\r\n            \r\n            this.dodgeCoolDownP1 = new CoolDown(this, 326, 560, 'dodgeCool', 1000);\r\n            this.dodgeCoolDownP2 = new CoolDown(this, 665, 40, 'dodgeCool', 1000);\r\n\r\n            this.lightningCoolDownP1 = new CoolDown(this, 374, 560, 'lightningCool', 5000);\r\n            this.lightningCoolDownP2 = new CoolDown(this, 713, 40, 'lightningCool', 5000);\r\n\r\n            //Checks for the amount of gamepads connected to the phaser game, if the passed controls do not match the quantity of connected gamepads,\r\n            //the controls will be reset, this can be fixed later\r\n            let pad: Phaser.Input.Gamepad.Gamepad;\r\n            let gamePadCount = ((this.controlConfig.player1.Movement==='GamePad')? 1:0);\r\n            gamePadCount += ((this.controlConfig.player2.Movement=='GamePad')? 1:0);\r\n\r\n            //Create controls object which can be accessed in the update logic for game object interactions\r\n            this.controlsP1 = new Controls(this,{directionals: this.controlConfig.player1.Movement, magicBlast: this.controlConfig.player1.MagicBlast, swordSwing: this.controlConfig.player1.SwordSlash},gamePadCount,1);\r\n            this.controlsP2 = new Controls(this,{directionals: this.controlConfig.player2.Movement, magicBlast: this.controlConfig.player2.MagicBlast, swordSwing: this.controlConfig.player2.SwordSlash},gamePadCount,2);\r\n            \r\n            //These phaser groups allow for collisino detection of classes of objects at scale, for example all magic blasts have the same collision callack that is called\r\n            this.magicBlasts = this.physics.add.group();\r\n            this.swordHitBoxes = this.physics.add.group();\r\n            this.lightningBolts = this.physics.add.group();\r\n\r\n            //Create a sprite group in order to handle collisions\r\n            this.players = this.physics.add.group();\r\n            this.players.add(this.player1);\r\n            this.players.add(this.player2);\r\n\r\n            //Attach healthbars to the selected players, this is so the game knows whose healthbar is whose\r\n            this.player1.setHealthBar(this.healthBarP1);\r\n            this.player2.setHealthBar(this.healthBarP2);\r\n\r\n            //phaser has a prebuilt bounce physics setup, any value greater than 1 causes an exponential growth in object velocity as it multiplies each bounce\r\n            this.player1.setBounce(1);\r\n            this.player2.setBounce(1);\r\n\r\n            //Collision handling for object groups (group1, group2, callback)\r\n            this.physics.add.overlap(this.magicBlasts,this.swordHitBoxes,this.deflectBlast);\r\n            this.physics.add.overlap(this.magicBlasts,this.players,this.playerHit);\r\n            this.physics.add.overlap(this.lightningBolts,this.players,this.playerHitLightning);\r\n            this.physics.add.overlap(this.swordHitBoxes,this.players,this.playerHitSwordSwing);\r\n\r\n            //4 walls on the outside\r\n            this.leftWall = this.physics.add.sprite(-55,300,'vwall');\r\n            //Set immovable allows the objects to not move on collision\r\n            this.leftWall.body.immovable = true;\r\n            this.rightWall = this.physics.add.sprite(855,300,'vwall');\r\n            this.rightWall.body.immovable = true;\r\n            this.topWall = this.physics.add.sprite(400,-55,'wall');\r\n            this.topWall.body.immovable = true;\r\n            this.bottomWall = this.physics.add.sprite(400,655,'wall');\r\n            this.bottomWall.body.immovable = true;\r\n            \r\n            //staticGroup is a different type of group that doesn't move I believe\r\n            this.walls = this.physics.add.staticGroup();\r\n            this.walls.add(this.leftWall);\r\n            this.walls.add(this.rightWall);\r\n            this.walls.add(this.topWall);\r\n            this.walls.add(this.bottomWall);\r\n            \r\n            //midline barrier wall\r\n            this.midWall = this.physics.add.sprite(400,300,'wall');\r\n            this.midWall.setScale(1,.08);\r\n            this.midWall.setVisible(false);\r\n            this.midWall.body.immovable = true;\r\n\r\n            this.physics.add.collider(this.midWall,this.players);\r\n            \r\n            //The order of the objects in the collider matters, magicBlasts \r\n            //will only bounce off the walls if this.magicBlasts is the first argument\r\n            this.physics.add.collider(this.magicBlasts,this.walls);\r\n            this.physics.add.collider(this.walls,this.players);\r\n            \r\n            \r\n            this.createMagicBlast = function(player){\r\n                    //Create magic Blast\r\n                    var magicBlast = new MagicBlast(this,player.getX(),\r\n                    player.getY(),'magicBlast',{owner: player});\r\n                    //Add to collision group\r\n                    this.magicBlasts.add(magicBlast);\r\n                    //Fire in direction of player orientation\r\n                    magicBlast.setMagicBlastVelocity(player.getOrientationVector());\r\n                    //Set magicBlast bounce\r\n                    magicBlast.setCollideWorldBounds(true);\r\n                    magicBlast.setBounce(1);\r\n                    \r\n            };\r\n            this.checkForSwingThenSwing = function(attackInput, player, coolDown){\r\n                //Check if swordSwing exists, and then check if it belongs to the player\r\n                this.swordHitBoxes.getChildren().forEach(swordSwing => {\r\n                    if (swordSwing.getOwner() === player) {\r\n                        let swordToCheck = swordSwing;\r\n                    }\r\n                });\r\n                //Check if sword swing can be activated\r\n                //if the attack button is pressed,\r\n                //and there is no sword currently active on the player,\r\n                //and the cooldown is no active, then the sword can be swung\r\n                 if ((attackInput.swordSwingFiring && typeof swordToCheck == 'undefined' && !coolDown.isActive())){\r\n                    //Set sword swing spawn point\r\n                    let swordSpawnX = player.getX();\r\n                    let swordSpawnY = player.getY();\r\n                   \r\n                    //Create new sword swing\r\n                    let newSwordSwing = new SwordSwing(this,swordSpawnX,swordSpawnY,'swordSwing',{owner: player});\r\n                    newSwordSwing.swingSword();\r\n                    coolDown.startCoolDown();\r\n                    this.swordHitBoxes.add(newSwordSwing);\r\n                   \r\n                 }\r\n            };\r\n        },\r\n\r\n    update: function()\r\n        {\r\n        //Checks if player 1 or player2 have lost, can events be used for this instead?\r\n        if (!this.player1.isAlive()){\r\n            this.youWin.setVisible(true);\r\n            this.youWin.setText('PLAYER2 WINS');\r\n        }\r\n        else if(!this.player2.isAlive()){\r\n            this.youWin.setVisible(true);\r\n            this.youWin.setText('PLAYER1 WINS');\r\n        }\r\n\r\n        //CoolDownAnims\r\n        this.swordCoolDownP1.update();\r\n        this.swordCoolDownP2.update();\r\n        this.magicCoolDownP1.update();\r\n        this.magicCoolDownP2.update();\r\n        this.dodgeCoolDownP1.update();\r\n        this.dodgeCoolDownP2.update();\r\n        this.lightningCoolDownP1.update();\r\n        this.lightningCoolDownP2.update();\r\n        //Get Player input\r\n        this.movementVectorP1 = this.controlsP1.getMovementVector();\r\n        this.movementVectorP2 = this.controlsP2.getMovementVector();\r\n\r\n        //Set the orientation of the player\r\n        this.player1.setOrientationVector(this.movementVectorP1);\r\n        this.player2.setOrientationVector(this.movementVectorP2);\r\n\r\n        //Check to make sure the player is not stunned, alive, and is not dodging\r\n        if(!this.player1.getStun() && this.player1.isAlive() && !this.player1.getDodging()){\r\n            this.player1.setPlayerVelocity(this.movementVectorP1);\r\n        }\r\n\r\n        if(!this.player2.getStun() && this.player2.isAlive() && !this.player2.getDodging()){\r\n            this.player2.setPlayerVelocity(this.movementVectorP2);\r\n        }\r\n\r\n        //Get attack inputs every update cycle\r\n        let attackInputsP1 = this.controlsP1.getMoveInput();\r\n        let attackInputsP2 = this.controlsP2.getMoveInput();\r\n\r\n        //Check for user firing magic blast and that the cooldown is not active\r\n        if (attackInputsP1.magicBlastFiring && !this.magicCoolDownP1.isActive()){\r\n           this.magicCoolDownP1.startCoolDown();\r\n           this.createMagicBlast(this.player1);\r\n        };\r\n        \r\n         if (attackInputsP2.magicBlastFiring && !this.magicCoolDownP2.isActive()){\r\n           this.magicCoolDownP2.startCoolDown();\r\n           this.createMagicBlast(this.player2);\r\n        };\r\n\r\n        //Check for user firing Lightning Bolt\r\n        if (attackInputsP1.lightningBoltFiring && !this.lightningCoolDownP1.isActive()){\r\n           this.lightningCoolDownP1.startCoolDown();\r\n           \r\n           //create lightning Bolt animation object\r\n           let lightningBolt = new LightningBolt(this,this.player1.getX(),this.player1.getY(),'lightningBolt',{owner: this.player1});\r\n           //Creates 4 lightning bolt hitboxes which are the WIDTH of the lightning bolt, they travel \r\n           //at a speed so fast that it mimics a diagonal hitbox. This normally\r\n           //can't be created using Arcade physics and its Axis aligned bounding boxes;\r\n           let lightningBoltHB1 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 100});\r\n           let lightningBoltHB2 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 50});\r\n           let lightningBoltHB3 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 25});\r\n           let lightningBoltHB4 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 75});\r\n           //Add to collision group\r\n           this.lightningBolts.add(lightningBoltHB1);\r\n           this.lightningBolts.add(lightningBoltHB2);\r\n           this.lightningBolts.add(lightningBoltHB3);\r\n           this.lightningBolts.add(lightningBoltHB4);\r\n        };\r\n        if (attackInputsP2.lightningBoltFiring && !this.lightningCoolDownP2.isActive()){\r\n           this.lightningCoolDownP2.startCoolDown();\r\n           let lightningBolt = new LightningBolt(this,this.player2.getX(),this.player2.getY(),'lightningBolt',{owner: this.player2});\r\n           let lightningBoltHB1 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 100});\r\n           let lightningBoltHB2 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 50});\r\n           let lightningBoltHB3 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 25});\r\n           let lightningBoltHB4 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 75});\r\n           this.lightningBolts.add(lightningBoltHB1);\r\n           this.lightningBolts.add(lightningBoltHB2);\r\n           this.lightningBolts.add(lightningBoltHB3);\r\n           this.lightningBolts.add(lightningBoltHB4);\r\n        };\r\n\r\n       \r\n        //Check for user dodging and check that they aren't already in dodge mode\r\n        if (attackInputsP1.dodgeFiring && !this.player1.getDodging() && !this.dodgeCoolDownP1.isActive()){\r\n            this.dodgeCoolDownP1.startCoolDown();\r\n            this.player1.dodge();\r\n        };\r\n        if (attackInputsP2.dodgeFiring && !this.player2.getDodging() && !this.dodgeCoolDownP2.isActive()){\r\n            this.dodgeCoolDownP2.startCoolDown();\r\n            this.player2.dodge();\r\n        };\r\n\r\n        //Check if sword swings exist, and update them as needed, \r\n        //this is the best way I can think of for tracking and following player position in the main loop\r\n        //Perhaps there's a better way? Without it \r\n        //the sword is stuck in place, perhaps it can be attached to a reference to player position?\r\n        //I took a look at an update pattern for a situation like this\r\n        let swordSwings = this.swordHitBoxes.getChildren();\r\n        if (swordSwings.length>0){\r\n            swordSwings.forEach(swordSwing => {\r\n                swordSwing.update();\r\n            }\r\n            );\r\n            \r\n        }\r\n        \r\n        //Check for user swinging sword and then swing, starting the cooldown\r\n        //I think functions are supposed to do only one thing, I'll fix this later\r\n        this.checkForSwingThenSwing(attackInputsP1, this.player1, this.swordCoolDownP1);\r\n        this.checkForSwingThenSwing(attackInputsP2, this.player2, this.swordCoolDownP2);\r\n        }\r\n    \r\n    \r\n\r\n\r\n}\r\n\r\nexport default LocalGameScene;","import { Scene } from 'phaser';\r\nimport Player from \"../sprites/Player.js\";\r\nimport Controls from \"../controls/Controls.js\";\r\nimport MagicBlast from \"../sprites/MagicBlast.js\";\r\nimport SwordSwing from \"../sprites/SwordSwing.js\";\r\nimport Phaser from 'phaser';\r\nimport bckg from '../assets/bckg.png';\r\nimport HealthBar from \"../sprites/HealthBar.js\";\r\nimport CoolDown from \"../sprites/CoolDown.js\";\r\nimport LightningBolt from '../sprites/lightningBolt.js';\r\nimport LightningHB from '../sprites/lightningBoltHitbox.js';\r\nimport io from 'socket.io-client';\r\n//import proxy from 'socket.io-proxy';\r\nlet LocalGameScene = {\r\n    \r\n    \r\n    preload: function()\r\n        {\r\n            //I load the images from my publicly hosted imgur\r\n            //because the file system seems to break for some reason when this is run in IonPhaser\r\n            //(Which is inside a React application)\r\n            //I make these drawings/spritesheets in piskel\r\n            this.load.image('bckg', 'https://i.imgur.com/DMVC2IQ.png');\r\n            this.load.image('wall', 'https://i.imgur.com/av8q7Or.png');\r\n            this.load.image('vwall', 'https://i.imgur.com/UB2GdEL.png');\r\n            this.load.spritesheet('swordSwing', 'https://i.imgur.com/ULyXfap.png', {frameWidth: 500, frameHeight: 500});\r\n            this.load.image('swordCool', 'https://i.imgur.com/SnLjQdR.png');\r\n            this.load.image('blastCool', 'https://i.imgur.com/d4Enueh.png');\r\n            this.load.spritesheet('magicBlast', 'https://i.imgur.com/dEhNPqO.png', {frameWidth: 150, frameHeight: 150});\r\n            this.load.spritesheet('explosion','https://i.imgur.com/UHZiUKC.png', {frameWidth: 192, frameHeight: 192});\r\n            this.load.spritesheet('player', 'https://i.imgur.com/WlEeiKT.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('otherPlayer','https://i.imgur.com/NYAJusD.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('Background','https://i.imgur.com/8SzCikO.png', {frameWidth: 800, frameHeight: 600});\r\n            this.load.image('dodgeCool', 'https://i.imgur.com/mTklmkU.png');\r\n            this.load.spritesheet('lightningBolt', 'https://i.imgur.com/3MskIUy.png', {frameWidth: 16, frameHeight: 1000});\r\n            this.load.image('lightningCool', 'https://i.imgur.com/FVquIxw.png');\r\n        },\r\n\r\n    create: function()\r\n        {   \r\n             let self = this;\r\n           /*I define some of the functions ex:this.deflectBlast\r\n           this way instead of outside of the preload/create/update\r\n           because that is the way they don't throw an error while using IonPhaser,\r\n           Perhaps they can be moved to another file and imported in*/\r\n\r\n          //Deflect Magic Blast with sword\r\n            this.deflectBlast = function(magicBlast,swordHitbox){\r\n                if(swordHitbox.inSwordSweep(magicBlast)){\r\n                    magicBlast.deflectFrom(swordHitbox.getOwner());\r\n                }\r\n            };\r\n           //Create explosion animation\r\n            this.explosionAnim = this.anims.create({\r\n                key: 'explode',\r\n                frames: this.anims.generateFrameNumbers('explosion',{ start: 1, end: 23}),\r\n                frameRate: 10,\r\n                repeat: -1\r\n            });\r\n            //This needs to be added because the player2 animation breaks when called for some reason, unsure why?\r\n            //It must have to do with something where 'explode' is played\r\n            this.explosionAnim = this.anims.create({\r\n                key: 'explode2',\r\n                frames: this.anims.generateFrameNumbers('explosion',{ start: 1, end: 23}),\r\n                frameRate: 10,\r\n                repeat: -1\r\n            });\r\n            //Callback function for player/magicBlast Collision\r\n            this.playerHit = function(magicBlast,player){\r\n               //Check that the magicBlast is hitting the right player\r\n                if (magicBlast.getOwner()!==player){\r\n                    //In online mode, only the opposing player(who does not active hitbox in your game) will get hit, when they do, this is called\r\n                    //Depending on how we implement magic blasts, this may require an index to be sent through for selecting and destroy the object\r\n                    console.log('this.roomName is: ' + self.roomName);\r\n                    self.socket.emit('destroyMagicBlast', self.roomName);\r\n                   \r\n                    magicBlast.explode();\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        self.socket.emit('damagePlayer', self.roomName);\r\n                        player.playStun();\r\n                        //Reduce player health\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function has the player blow up\r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(magicBlast);\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            this.playerHitSwordSwing = function(swordSwing, player){\r\n        \r\n                if(swordSwing.getOwner()!==player){\r\n\r\n                    //Problem, this code isn't working. It's because the stun check isn't working at the correct time \r\n                    //and the player set function isn't set before the player takes like double or triple damage\r\n                    //Since the hitbox isn't destroy on impact it does a lot of other stuff\r\n                    //Potential Fixes: \r\n                    //Destroy sword hitbox\r\n                    //Don't let the player take damage within a certain amount of time. \r\n                    //Somehow wait for the decrease to happen and then rechecking the stun, async functions?\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        \r\n                        self.socket.emit('damagePlayer', self.roomName);\r\n                        \r\n                        player.playStun();\r\n\r\n\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function \r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(swordSwing);\r\n                    }\r\n                }\r\n            }\r\n            //Collision between lightning and player\r\n            this.playerHitLightning = function(lightningBolt,player){\r\n                //Players cannot hit themselves with their own attacks\r\n                if(lightningBolt.getOwner()!==player){\r\n                   \r\n                    if (player.getStun() === false && player.getDodging() === false){\r\n                        \r\n                        //Stun is started for player\r\n                        player.playStun();\r\n                        self.socket.emit('destroyLightningBolt', self.roomName);\r\n                        self.socket.emit('damagePlayer', self.roomName);\r\n                        if(player.getHealthBar().decrease(4)){\r\n                           \r\n                            //Player dies\r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Send players back to main menu\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        }\r\n                        \r\n                        player.knockBack(lightningBolt);\r\n                      \r\n                        //Destroy the animation associated with these hitboxes\r\n                        lightningBolt.destroyAnimationSprite();\r\n\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        lightningBolt.scene.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== player) {\r\n                                lightningBolt.body.enable = false;\r\n                            }\r\n                    });\r\n                }\r\n            }\r\n            }\r\n            //Callback for sending user back to main page when game ends\r\n            this.redirect = function(){\r\n                 window.location.replace('https://mildmayhem.herokuapp.com/');\r\n            }\r\n            //Glowing Background Sprite\r\n            this.background = this.add.sprite(400,300,'Background');\r\n            this.anims.create({\r\n                key: 'glow',\r\n                frames: this.anims.generateFrameNumbers('Background', { start: 1, end: 12 }),\r\n                frameRate: 4,\r\n                repeat: -1,\r\n                yoyo: true\r\n            });\r\n            this.background.anims.play('glow');\r\n            \r\n            //Refactoring idea: make every variable passed into constructors \r\n            //descriptive javascript properties for readability\r\n            this.setCoolDowns = function(swordCoolDown,dodgeCoolDown,magicCoolDown,lightningCoolDown,position){\r\n               if (position === 'top'){\r\n                //Create Cooldowns: Note, final variable passed in is a timer, it sets how long the cooldown lasts in milliseconds            \r\n                this[swordCoolDown] = new CoolDown(this, 570, 40, 'swordCool', 700); \r\n                this[magicCoolDown] = new CoolDown(this, 618, 40, 'blastCool', 1000);  \r\n                this[dodgeCoolDown] = new CoolDown(this, 665, 40, 'dodgeCool', 1000);\r\n                this[lightningCoolDown] = new CoolDown(this, 713, 40, 'lightningCool', 5000);\r\n               }\r\n               else if(position === 'bottom'){\r\n                this[swordCoolDown] = new CoolDown(this, 230, 560, 'swordCool', 700);\r\n                this[magicCoolDown] = new CoolDown(this, 278, 560, 'blastCool', 1000);\r\n                this[dodgeCoolDown] = new CoolDown(this, 326, 560, 'dodgeCool', 1000);\r\n                this[lightningCoolDown] = new CoolDown(this, 374, 560, 'lightningCool', 5000);\r\n               }\r\n            }\r\n           //Create Health Bars\r\n            this.healthBarP1 = new HealthBar({scene: this, x: 0, y:584});\r\n            this.healthBarP2 = new HealthBar({scene: this, x: 0, y:0});\r\n\r\n            //console.log('gameconfig is: ' + this.gameConfig);\r\n            if (this.gameConfig === 'joinOnline') {\r\n                this.player1 = new Player(this, 400, 200,'otherPlayer', this.explosionAnim);\r\n                this.player2 = new Player(this, 400, 500,'player', this.explosionAnim);\r\n                this.player1.setHealthBar(this.healthBarP2);\r\n                this.player2.setHealthBar(this.healthBarP1);\r\n                this.setCoolDowns('swordCoolDownP1','dodgeCoolDownP1','magicCoolDownP1','lightningCoolDownP1',\"top\");\r\n                this.setCoolDowns('swordCoolDownP2','dodgeCoolDownP2','magicCoolDownP2','lightningCoolDownP2',\"bottom\");\r\n                this.player1.createAnimations(this);\r\n                this.player2.createAnimations(this);\r\n                console.log('my id is: ' + this.socket.id);    \r\n                this.player2.setVisible(true);\r\n                \r\n               \r\n            }\r\n            if (this.gameConfig === 'createOnline'){\r\n                this.player1 = new Player(this, 400, 500,'player', this.explosionAnim);\r\n                this.player2 = new Player(this, 400, 200,'otherPlayer', this.explosionAnim);\r\n                this.player1.setHealthBar(this.healthBarP1);\r\n                this.player2.setHealthBar(this.healthBarP2);\r\n                this.player1.createAnimations(this);\r\n                this.setCoolDowns('swordCoolDownP1','dodgeCoolDownP1','magicCoolDownP1','lightningCoolDownP1',\"bottom\");\r\n                this.setCoolDowns('swordCoolDownP2','dodgeCoolDownP2','magicCoolDownP2','lightningCoolDownP2',\"top\");\r\n                this.player2.createAnimations(this);\r\n                this.player2.setVisible(false);\r\n                this.socket.emit('createOnlineRoom');\r\n                this.socket.emit('getRoomName');\r\n                \r\n            }\r\n            \r\n           /* //Create Cooldowns: Note, final variable passed in is a timer, it sets how long the cooldown lasts in milliseconds            \r\n            this.swordCoolDownP1 = new CoolDown(this, 230, 560, 'swordCool', 700);\r\n            this.swordCoolDownP2 = new CoolDown(this, 570, 40, 'swordCool', 700);\r\n           \r\n            this.magicCoolDownP1 = new CoolDown(this, 278, 560, 'blastCool', 1000);\r\n            this.magicCoolDownP2 = new CoolDown(this, 618, 40, 'blastCool', 1000);\r\n            \r\n            this.dodgeCoolDownP1 = new CoolDown(this, 326, 560, 'dodgeCool', 1000);\r\n            this.dodgeCoolDownP2 = new CoolDown(this, 665, 40, 'dodgeCool', 1000);\r\n\r\n            this.lightningCoolDownP1 = new CoolDown(this, 374, 560, 'lightningCool', 5000);\r\n            this.lightningCoolDownP2 = new CoolDown(this, 713, 40, 'lightningCool', 5000);\r\n            */\r\n            this.player2.moving = false;\r\n            this.player2.moveTimer = 0;\r\n            this.socket.on('yourRoomName', function(roomName) {\r\n                //console.log('myroomName is called here');\r\n                self.roomName = roomName;\r\n            });\r\n            this.socket.on('opponentJoined', function(opponentSocketId) {\r\n                self.player2.setVisible(true);\r\n                //console.log('opponentJoined, id: ' + opponentSocketId);\r\n                self.opponentSocketId = opponentSocketId;\r\n                self.socket.emit('confirmJoinRoom', opponentSocketId);\r\n            });\r\n            this.socket.on('joinedRoom', function(opponentSocketId) {\r\n                //console.log('joined Room socket event happened')\r\n                self.opponentSocketId = opponentSocketId;\r\n            });\r\n            this.socket.on('playerMoved', function (player2Movement){\r\n               \r\n                    self.player2.moving = true;\r\n                    self.player2.x = player2Movement.x;\r\n                    self.player2.y = player2Movement.y;\r\n                    self.player2.setOrientationVector(player2Movement.direction);\r\n                    if(self.player2.isAlive()){\r\n                         self.player2.setMovementAnim(player2Movement.direction);\r\n                    }\r\n                   \r\n            });\r\n           this.socket.on('swordSwung', function(){\r\n               self.onlinePlayerSwing(self.player2, self.swordCoolDownP2);\r\n           })\r\n           this.socket.on('magicBlastCreated', function(){\r\n               self.magicCoolDownP2.startCoolDown();\r\n               self.createMagicBlast(self.player2);\r\n           });\r\n           this.socket.on('magicBlastDestroyed', function(){\r\n               //console.log('magicBlastDestroyed ran');\r\n               \r\n                self.magicBlasts.getChildren().forEach(magicBlast => {\r\n                    if (magicBlast.getOwner() !== self.player2) {\r\n                        magicBlast.explode();\r\n                    }\r\n                });\r\n           });\r\n           this.socket.on('playerDamaged', function() {\r\n               self.player2.playStun();\r\n               if (self.player2.getHealthBar().decrease(4)){\r\n                   self.player2.gameOver();\r\n                   self.player2.anims.play('explode2', false);\r\n                   \r\n                   \r\n                   let timedEvent = self.time.delayedCall(3000, self.redirect, [], self);\r\n               }\r\n           });\r\n           this.socket.on('dodgeCoolDownStarted', function(){\r\n               self.dodgeCoolDownP2.startCoolDown();\r\n           });\r\n           this.socket.on('lightningBoltCreated', function(){\r\n               self.lightningCoolDownP2.startCoolDown();\r\n               self.createLightningBolt(self.player2);\r\n           });\r\n           this.socket.on('lightningBoltDestroyed', function(){\r\n               //console.log('animation destruction ran');\r\n                         //Destroy the animation associated with these hitboxes\r\n                        let lightningAnimDestroyed = false;\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        self.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== self.player2) {\r\n                                lightningBolt.body.enable = false;\r\n                                if (lightningAnimDestroyed === false){\r\n                                    //console.log('animation destruction ran');\r\n                                    lightningAnimDestroyed = true;\r\n                                    lightningBolt.destroyAnimationSprite();\r\n                                }\r\n                            }\r\n                    });\r\n           });\r\n            //Create Win Text\r\n            this.youWin = this.add.text(150,300-60,'PLAYER2 WINS ',{fontSize: '70px', color: '#66FF00'});\r\n            this.youWin.setVisible(false);\r\n\r\n            \r\n          \r\n\r\n            //Checks for the amount of gamepads connected to the phaser game, if the passed controls do not match the quantity of connected gamepads,\r\n            //the controls will be reset, this can be fixed later\r\n            let pad: Phaser.Input.Gamepad.Gamepad;\r\n            let gamePadCount = ((this.controlConfig.player1.Movement==='GamePad')? 1:0);\r\n           \r\n\r\n            //Create controls object which can be accessed in the update logic for game object interactions\r\n            this.controlsP1 = new Controls(this,{directionals: this.controlConfig.player1.Movement, magicBlast: this.controlConfig.player1.MagicBlast, swordSwing: this.controlConfig.player1.SwordSlash},gamePadCount,1);\r\n           \r\n            \r\n            //These phaser groups allow for collisino detection of classes of objects at scale, for example all magic blasts have the same collision callack that is called\r\n            this.magicBlasts = this.physics.add.group();\r\n            this.swordHitBoxes = this.physics.add.group();\r\n            this.lightningBolts = this.physics.add.group();\r\n\r\n            //Create a sprite group in order to handle collisions\r\n            this.players = this.physics.add.group();\r\n            this.players.add(this.player1);\r\n          \r\n\r\n            //Attach healthbars to the selected players, this is so the game knows whose healthbar is whose\r\n            //this.player1.setHealthBar(this.healthBarP1);\r\n\r\n          \r\n\r\n            //phaser has a prebuilt bounce physics setup, any value greater than 1 causes an exponential growth in object velocity as it multiplies each bounce\r\n            this.player1.setBounce(1);\r\n\r\n\r\n            //Collision handling for object groups (group1, group2, callback)\r\n            this.physics.add.overlap(this.magicBlasts,this.swordHitBoxes,this.deflectBlast);\r\n            this.physics.add.overlap(this.magicBlasts,this.players,this.playerHit);\r\n            this.physics.add.overlap(this.lightningBolts,this.players,this.playerHitLightning);\r\n            this.physics.add.overlap(this.swordHitBoxes,this.players,this.playerHitSwordSwing);\r\n            \r\n            //4 walls on the outside\r\n            this.leftWall = this.physics.add.sprite(-55,300,'vwall');\r\n            //Set immovable allows the objects to not move on collision\r\n            this.leftWall.body.immovable = true;\r\n            this.rightWall = this.physics.add.sprite(855,300,'vwall');\r\n            this.rightWall.body.immovable = true;\r\n            this.topWall = this.physics.add.sprite(400,-55,'wall');\r\n            this.topWall.body.immovable = true;\r\n            this.bottomWall = this.physics.add.sprite(400,655,'wall');\r\n            this.bottomWall.body.immovable = true;\r\n            \r\n            //staticGroup is a different type of group that doesn't move I believe\r\n            this.walls = this.physics.add.staticGroup();\r\n            this.walls.add(this.leftWall);\r\n            this.walls.add(this.rightWall);\r\n            this.walls.add(this.topWall);\r\n            this.walls.add(this.bottomWall);\r\n            \r\n            //midline barrier wall\r\n            this.midWall = this.physics.add.sprite(400,300,'wall');\r\n            this.midWall.setScale(1,.08);\r\n            this.midWall.setVisible(false);\r\n            this.midWall.body.immovable = true;\r\n\r\n            this.physics.add.collider(this.midWall,this.players);\r\n            \r\n            //The order of the objects in the collider matters, magicBlasts \r\n            //will only bounce off the walls if this.magicBlasts is the first argument\r\n            this.physics.add.collider(this.magicBlasts,this.walls);\r\n            this.physics.add.collider(this.walls,this.players);\r\n             \r\n            self.createMagicBlast = function(player){\r\n                    //Create magic Blast\r\n                    var magicBlast = new MagicBlast(self,player.getX(),\r\n                    player.getY(),'magicBlast',{owner: player});\r\n                    //Add to collision group\r\n                    self.magicBlasts.add(magicBlast);\r\n                    //Fire in direction of player orientation\r\n                    magicBlast.setMagicBlastVelocity(player.getOrientationVector());\r\n                    //Set magicBlast bounce\r\n                    magicBlast.setCollideWorldBounds(true);\r\n                    magicBlast.setBounce(1);\r\n                    \r\n            };\r\n            this.createLightningBolt = function(player)\r\n            {\r\n                //DO NOT CALL SOCKET EMITS IN HERE, INFINITE FEEDBACK LOOP\r\n                 //create lightning Bolt animation object\r\n                let lightningBolt = new LightningBolt(this,player.getX(),player.getY(),'lightningBolt',{owner: player});\r\n                //Creates 4 lightning bolt hitboxes which are the WIDTH of the lightning bolt, they travel \r\n                //at a speed so fast that it mimics a diagonal hitbox. This normally\r\n                //can't be created using Arcade physics and its Axis aligned bounding boxes;\r\n                let lightningBoltHB1 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 100});\r\n                let lightningBoltHB2 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 50});\r\n                let lightningBoltHB3 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 25});\r\n                let lightningBoltHB4 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 75});\r\n                //Add to collision group\r\n                this.lightningBolts.add(lightningBoltHB1);\r\n                this.lightningBolts.add(lightningBoltHB2);\r\n                this.lightningBolts.add(lightningBoltHB3);\r\n                this.lightningBolts.add(lightningBoltHB4);\r\n\r\n            }\r\n            this.checkForSwingThenSwing = function(attackInput, player, coolDown){\r\n                //Check if swordSwing exists, and then check if it belongs to the player\r\n                this.swordHitBoxes.getChildren().forEach(swordSwing => {\r\n                    if (swordSwing.getOwner() === player) {\r\n                        let swordToCheck = swordSwing;\r\n                    }\r\n                });\r\n                //Check if sword swing can be activated\r\n                //if the attack button is pressed,\r\n                //and there is no sword currently active on the player,\r\n                //and the cooldown is no active, then the sword can be swung\r\n                 if ((attackInput.swordSwingFiring && typeof swordToCheck == 'undefined' && !coolDown.isActive())){\r\n                   \r\n                   \r\n                    //Send sword swing to server\r\n                    this.socket.emit('swingSword',this.roomName);\r\n                    //Set sword swing spawn point\r\n                    let swordSpawnX = player.getX();\r\n                    let swordSpawnY = player.getY();\r\n                    //emit sword swing event:\r\n                    //Create new sword swing\r\n                    let newSwordSwing = new SwordSwing(this,swordSpawnX,swordSpawnY,'swordSwing',{owner: player});\r\n                    newSwordSwing.swingSword();\r\n                    coolDown.startCoolDown();\r\n                    this.swordHitBoxes.add(newSwordSwing);\r\n                   \r\n                 }\r\n            };\r\n            this.onlinePlayerSwing = function (player, coolDown){\r\n                //Set sword swing spawn point\r\n                let swordSpawnX = player.getX();\r\n                let swordSpawnY = player.getY();\r\n                //emit sword swing event:\r\n                //Create new sword swing\r\n                let newSwordSwing = new SwordSwing(this,swordSpawnX,swordSpawnY,'swordSwing',{owner: player});\r\n                newSwordSwing.body.active = false;\r\n                newSwordSwing.swingSword();\r\n                coolDown.startCoolDown();\r\n                this.swordHitBoxes.add(newSwordSwing);\r\n            };\r\n           \r\n        },\r\n\r\n    update: function()\r\n        {\r\n        \r\n        //Checks if player 1 or player2 have lost, can events be used for this instead?\r\n        if (!this.player1.isAlive()){\r\n            this.youWin.setVisible(true);\r\n           this.youWin.setText('OPPONENT WINS');\r\n        }\r\n        //Checks if player 1 or player2 have lost, can events be used for this instead?\r\n        else if (!this.player2.isAlive()){\r\n            this.youWin.setVisible(true);\r\n            this.youWin.setText('YOU WIN');\r\n            console.log(\"is player 2 anim playing?\" + this.player2.anims.getTotalFrames());\r\n        }\r\n        \r\n        //CoolDownAnims\r\n        this.swordCoolDownP1.update();\r\n        this.swordCoolDownP2.update();\r\n        this.magicCoolDownP1.update();\r\n        this.magicCoolDownP2.update();\r\n        this.dodgeCoolDownP1.update();\r\n        this.dodgeCoolDownP2.update();\r\n        this.lightningCoolDownP1.update();\r\n        this.lightningCoolDownP2.update();\r\n\r\n        //Get Player input\r\n        this.movementVectorP1 = this.controlsP1.getMovementVector();\r\n        \r\n\r\n        //Set the orientation of the player\r\n        this.player1.setOrientationVector(this.movementVectorP1);\r\n        \r\n        // emit player movement data\r\n        var x = this.player1.x;\r\n        var y = this.player1.y;\r\n        var d = this.player1.getOrientationVector();\r\n        if (this.player1.oldPosition && (x !== this.player1.oldPosition.x || y !== this.player1.oldPosition.y || d !== this.player1.oldPosition.direction)) {\r\n         \r\n            this.socket.emit('playerMovement', { x: x, y: y, direction: d , roomName: this.roomName});\r\n        }\r\n \r\n        // save old position data\r\n        this.player1.oldPosition = {\r\n          x: x,\r\n          y: y,\r\n          direction: d\r\n        };\r\n        //Stop animation if not moving and alive(explode animation can play)\r\n        if (this.player2.moving === false && this.player2.isAlive())\r\n        {\r\n            this.player2.anims.pause();\r\n            \r\n            \r\n        }\r\n        else\r\n        {\r\n            \r\n            //Count some update frames, compensating for server delay,\r\n            //If there is an acceptable delay from the server, then it can be assumed that the opponent\r\n            //has stopped moving since the last time\r\n            //They triggered a movmement event\r\n            this.player2.moveTimer += 1;\r\n            if (this.player2.moveTimer > 17){\r\n                this.player2.moving = false;\r\n                this.player2.moveTimer = 0;\r\n            }\r\n            \r\n        }\r\n        //Check to make sure the player is not stunned, alive, and is not dodging\r\n        if(!this.player1.getStun() && this.player1.isAlive() && !this.player1.getDodging()){\r\n            this.player1.setPlayerVelocity(this.movementVectorP1);\r\n            this.player1.setMovementAnim(this.movementVectorP1);\r\n        }\r\n\r\n\r\n\r\n        //Get attack inputs every update cycle\r\n        let attackInputsP1 = this.controlsP1.getMoveInput();\r\n       \r\n        //Check for user firing magic blast and that the cooldown is not active\r\n        if (attackInputsP1.magicBlastFiring && !this.magicCoolDownP1.isActive()){\r\n           this.magicCoolDownP1.startCoolDown();\r\n           this.socket.emit('createMagicBlast', this.roomName);\r\n           this.createMagicBlast(this.player1);\r\n        };\r\n        \r\n        //Check for user firing Lightning Bolt\r\n        if (attackInputsP1.lightningBoltFiring && !this.lightningCoolDownP1.isActive()){\r\n           this.lightningCoolDownP1.startCoolDown();\r\n           this.socket.emit('createLightningBolt',this.roomName);\r\n           this.createLightningBolt(this.player1);\r\n          \r\n        };\r\n        \r\n\r\n       \r\n        //Check for user dodging and check that they aren't already in dodge mode\r\n        if (attackInputsP1.dodgeFiring && !this.player1.getDodging() && !this.dodgeCoolDownP1.isActive()){\r\n            this.dodgeCoolDownP1.startCoolDown();\r\n            this.socket.emit('startDodgeCoolDown',this.roomName);\r\n            this.player1.dodge();\r\n        };\r\n       \r\n\r\n        //Check if sword swings exist, and update them as needed, \r\n        //this is the best way I can think of for tracking and following player position in the main loop\r\n        //Perhaps there's a better way? Without it \r\n        //the sword is stuck in place, perhaps it can be attached to a reference to player position?\r\n        //I took a look at an update pattern for a situation like this\r\n        let swordSwings = this.swordHitBoxes.getChildren();\r\n        if (swordSwings.length>0){\r\n            swordSwings.forEach(swordSwing => {\r\n                swordSwing.update();\r\n            }\r\n            );\r\n            \r\n        }\r\n        \r\n        //Check for user swinging sword and then swing, starting the cooldown\r\n        //I think functions are supposed to do only one thing, I'll fix this later\r\n        this.checkForSwingThenSwing(attackInputsP1, this.player1, this.swordCoolDownP1);\r\n\r\n        }\r\n    \r\n    \r\n\r\n\r\n}\r\n\r\nexport default LocalGameScene;","import React, { Component } from 'react'\r\nimport Phaser from 'phaser';\r\nimport { IonPhaser } from '@ion-phaser/react';\r\nimport LocalGameScene from '../phaser/scenes/LocalGameScene.js';\r\nimport OnlineGameScene from '../phaser/scenes/OnlineGameScene.js';\r\nimport {socket} from '../api';\r\nclass GamePage extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    let gameConfig = this.props.gameConfig;\r\n    let roomName = this.props.roomName;\r\n    //console.log(\"gameConfig is: \" + gameConfig);\r\n    //let newScene = new Object();\r\n    console.log('gamePage constructor called');\r\n    let newScene = LocalGameScene;\r\n    if (gameConfig==='createOnline'){\r\n      newScene = OnlineGameScene;\r\n    }\r\n    else if (gameConfig=='joinOnline'){\r\n      newScene = OnlineGameScene;\r\n    }\r\n    let controlConfig = this.props.controlConfig;\r\n    this.state = {\r\n    initialize: true,\r\n    //This is the Phaser game code\r\n    game: {\r\n      type: Phaser.AUTO,\r\n      width: 800,\r\n      height: 600,\r\n      physics: {\r\n        default: 'arcade',\r\n        arcade: {\r\n          debug: false,\r\n          gravity: { y: 0 }\r\n        }\r\n      },\r\n      input: {\r\n        gamepad: true\r\n      },\r\n      scene: {\r\n        init: function() {\r\n          //Here we can pass in the Control Config and any other data the Phaser scene needs from React\r\n          this.controlConfig = controlConfig;\r\n          this.gameConfig = gameConfig;\r\n          this.roomName = roomName;\r\n          this.socket = socket;\r\n        },\r\n        preload: newScene.preload,\r\n        create: newScene.create,\r\n        update: newScene.update,\r\n      }\r\n      \r\n    }\r\n  }\r\n  }\r\n  componentWillUnmount() {\r\n    console.log('componentUnmounted');\r\n    socket.removeAllListeners()\r\n    socket.emit('destroyOnlineRoom');\r\n}\r\n  \r\n  render() {\r\n    const { initialize, game } = this.state\r\n    return (\r\n      <div style={{maxWidth: 800, minWidth:800, minHeight:600, maxHeight:600, margin: 'auto'}}>\r\n      {/*Take a look at: https://github.com/proyecto26/ion-phaser/tree/master/react in order to see how this is implemented*/}\r\n        <IonPhaser game={game} initialize={initialize} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GamePage;","import React, {Component} from 'react';\r\nimport styles from './styles/main.css';\r\nimport MenuPage from './pages/MenuPage.js';\r\nimport GamePage from './pages/GamePage.js';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Phaser from 'phaser'\r\nimport { IonPhaser } from '@ion-phaser/react';\r\n\r\n\r\nclass App extends Component {\r\n constructor(props) {\r\n            super(props);\r\n            //listens for a new online room creation\r\n           \r\n\r\n            //ControlConfig is a default value\r\n            this.state = {controlConfig: {\r\n                player1: {\r\n                    Movement: 'WASD',\r\n                    SwordSlash: 'SPACE',\r\n                    MagicBlast: 'P'\r\n                },\r\n                player2: {\r\n                    Movement: 'ArrowKeys',\r\n                    SwordSlash: 'NumPad0',\r\n                    MagicBlast: 'NumPad9'\r\n                }\r\n            },\r\n            gameConfig: 'offline',\r\n            roomName: 'Null'\r\n          }\r\n          };\r\n  //Callback function which comes all the way from the button component in the React application, without redux, \r\n  //I believe state has to be managed/updated like this, which I think it isn't the best way to do it\r\n  //I forget the term but basically you have to pass this one callback function through the entire program if there\r\n  // isn't a common parent component\r\n  \r\n  controlConfig = (dataFromMenuPage) => {\r\n    this.setState({controlConfig: dataFromMenuPage});\r\n  };\r\n  gameConfig = (gameSelectionFromMenuPage,roomNameFromMenuPage) => {\r\n    this.setState({gameConfig: gameSelectionFromMenuPage,roomName: roomNameFromMenuPage});\r\n\r\n  }\r\n  render() {\r\n    \r\n    return (\r\n      \r\n      <Router>\r\n        <div>\r\n            <Switch>\r\n              <Route path=\"/\" exact >\r\n                {/*Getting the control configuration from here*/}\r\n                <MenuPage passControlConfig={this.controlConfig} addNewRoom={this.addNewRoom} passGameConfig={this.gameConfig}/>\r\n              </Route>\r\n              <Route path=\"/game\">\r\n                {/*We are passing the control configuration into the game*/}\r\n                <GamePage controlConfig={this.state.controlConfig} gameConfig={this.state.gameConfig} roomName={this.state.roomName}/>\r\n              </Route>\r\n            </Switch>\r\n         \r\n        </div>\r\n      </Router>\r\n      \r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}