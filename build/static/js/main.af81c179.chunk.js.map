{"version":3,"sources":["../node_modules/@ion-phaser/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","jotai/index.js","components/Notes.js","videos/WorkingShowcase.mp4","videos/ResponsivePlayer.js","components/LocalPVP.js","images/GameShot5.png","components/Room.js","api.js","components/OnlinePVP.js","components/Controls.js","components/DisplayBox.js","components/menuTabButton.js","images/SwordMarker.png","images/ImpressionistBrickButtonG.jpg","images/DeepArted.jpg","pages/MenuPage.js","phaser/sprites/Player.js","phaser/controls/Controls.js","phaser/sprites/MagicBlast.js","phaser/sprites/SwordSwing.js","phaser/sprites/HealthBar.js","phaser/sprites/CoolDownBar.js","phaser/sprites/CoolDown.js","phaser/sprites/lightningBolt.js","phaser/sprites/lightningBoltHitbox.js","phaser/sprites/Shield.js","phaser/scenes/LocalGameScene.js","phaser/scenes/OnlineGameScene.js","pages/GamePage.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","displayModeAtom","atom","controlConfigAtom","player1","Movement","SwordSlash","MagicBlast","player2","roomsAtom","matchAtom","gameType","roomName","roomId","controlsAtom","keyBindingsAtom","Notes","style","lineHeight","textAlign","paddingLeft","width","display","marginBottom","ResponsivePlayer","history","useHistory","height","className","url","localPVPVideo","playing","loop","muted","controls","onClick","push","LocalPVP","StyledRoomContainer","styled","div","Room","room","console","log","src","LocalGameImage","alt","name","socket","io","StyledOnlinePVPContainer","OnlinePVP","matchRoomClicked","isPvpClicked","useRef","useAtom","rooms","setMatch","useEffect","current","startMatch","playerId","emit","color","length","index","textDecoration","StyledControls","KeyTitle","span","KeyValue","ListItem","li","List","ul","controlsList","Controls","controlMode","keyBindings","setControlConfig","toggleControl","target","innerText","toLowerCase","mapKeys","item","slice","DisplayBox","displayMode","displayContent","MenuTabButton","props","highlightColor","swordMarker","underline","selected","backgroundSize","position","top","left","margin","backgroundColor","cursor","borderRadius","border","opacity","fontSize","fontFamily","title","MenuPage","setDisplayMode","useState","Stats","Tutorial","menuTabButtonSelection","setMenuTabButtonSelection","updateDisplayMode","useCallback","DisplayModeString","newSelection","setRooms","cb","err","on","removeAllListeners","backgroundImage","TestImage","maxWidth","minWidth","minHeight","maxHeight","CssBaseline","Grid","container","xs","background","padding","Player","scene","x","y","texture","add","existing","physics","body","setSize","createAnimations","orientationVector","alive","dodging","stunned","setPlayerSpeed","dodgeSpeed","this","setAlpha","time","delayedCall","stunComplete","gameObj","gameObjCenter","getCenter","playerCenter","vectorAngle","Phaser","Math","Angle","Between","movementX","cos","movementY","sin","setVelocity","setBounce","finishedDodging","speed","playerSpeed","velocityVector","anims","stop","play","key","abs","healthBar","create","frames","generateFrameNumbers","start","end","frameRate","repeat","Physics","Arcade","Sprite","type","gamePadCount","gamePadNumber","setKeyInput","directionals","input","keyboard","addKeys","up","Input","Keyboard","KeyCodes","W","down","S","A","right","D","magicBlastAttack","addKey","P","swordSwing","SPACE","dodge","SHIFT","lightningBolt","O","shield","I","createCursorKeys","NUMPAD_NINE","NUMPAD_ZERO","NUMPAD_FOUR","NUMPAD_EIGHT","NUMPAD_ONE","magicBlast","setWASDControls","setArrowKeyControls","gamePadMode","xAxis","yAxis","isDown","gamepad","once","pad","event","button","X","R2","R1","L2","B","total","isActive","pad1","pad2","axes","getValue","lightningBoltFiring","dodgeFiring","magicBlastFiring","swordSwingFiring","shieldFiring","GameObjects","owner","setScale","magicSpeed","setCircle","explodeTimer","anim","destroy","explode","velocity","enable","player","SwordSwing","setOffset","displayWidth","displayHeight","swinging","hideOnComplete","followOwner","playerOrientationVector","newOrientation","atan2","PI","angle","orientSword","getOrientationVector","gameObject","collisionAngle","HealthBar","config","bar","Graphics","canTakeDamage","value","p","draw","amount","setTakeDamage","clear","fillStyle","fillRect","d","floor","CoolDownBar","duration","running","timer","progress","getProgress","CoolDown","coolDownMS","coolDownBar","active","onEvent","update","LightningBolt","endLightningBolt","lightningHB","animationSprite","Olength","onCompleteHandler","tween","targets","self","oscillationLength","startingOlength","tweens","orientationx","orientationy","yoyo","onComplete","countRuns","setVisible","onCompleteParams","Shield","shieldTimer","setCollideWorldBounds","ownerOrientation","setFrame","LocalGameScene","preload","load","image","spritesheet","frameWidth","frameHeight","deflectBlast","swordHitbox","inSwordSweep","deflectFrom","getOwner","explosionAnim","playerHit","getStun","getDodging","playStun","getHealthBar","decrease","gameOver","redirect","knockBack","playerHitSwordSwing","shieldHitLightningBolt","destroyAnimationSprite","lightningBolts","getChildren","forEach","shieldHitMagicBlast","playerHitLightning","window","location","replace","sprite","youWin","text","healthBarP1","healthBarP2","swordCoolDownP1","swordCoolDownP2","magicCoolDownP1","magicCoolDownP2","dodgeCoolDownP1","dodgeCoolDownP2","lightningCoolDownP1","lightningCoolDownP2","shieldCoolDownP1","shieldCoolDownP2","controlConfig","controlsP1","controlsP2","magicBlasts","group","swordHitBoxes","shields","players","setHealthBar","overlap","leftWall","immovable","rightWall","topWall","bottomWall","walls","staticGroup","midWall","collider","createMagicBlast","getX","getY","setMagicBlastVelocity","checkForSwingThenSwing","attackInput","coolDown","swordToCheck","swordSpawnX","swordSpawnY","newSwordSwing","swingSword","startCoolDown","isAlive","setText","movementVectorP1","getMovementVector","movementVectorP2","setOrientationVector","setPlayerVelocity","attackInputsP1","getMoveInput","attackInputsP2","lightningBoltHB1","LightningHB","lightningBoltHB2","lightningBoltHB3","lightningBoltHB4","swordSwings","setCoolDowns","swordCoolDown","dodgeCoolDown","magicCoolDown","lightningCoolDown","shieldCoolDown","gameConfig","moving","moveTimer","opponentSocketId","player2Movement","direction","setMovementAnim","onlinePlayerSwing","createLightningBolt","lightningAnimDestroyed","getTotalFrames","oldPosition","pause","GamePage","newScene","OnlineGameScene","state","initialize","game","AUTO","default","arcade","debug","gravity","init","Component","App","match","path","exact","JSON","stringify","Boolean","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.af81c179.chunk.js","sourcesContent":["var map = {\n\t\"./ion-phaser.entry.js\": [\n\t\t154,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 150;\nmodule.exports = webpackAsyncContext;","import { atom, useAtom } from 'jotai';\r\n\r\nexport const displayModeAtom = atom('');\r\nexport const gameConfigAtom = atom({player1: \"...\"});\r\nexport const controlConfigAtom = atom({\r\n    player1: {\r\n      Movement: 'WASD',\r\n      SwordSlash: 'SPACE',\r\n      MagicBlast: 'P'\r\n    },\r\n    player2: {\r\n      Movement: 'ArrowKeys',\r\n      SwordSlash: 'NumPad0',\r\n      MagicBlast: 'NumPad9'\r\n    }\r\n  });\r\nexport const roomsAtom = atom({});\r\nexport const matchAtom = atom({gameType: 'offline', roomName: '', roomId: ''});\r\nexport const controlsAtom = atom('keyboard')\r\nexport const keyBindingsAtom = atom(true)\r\n\r\n\r\n","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nconst Notes = () => {\r\n  return (\r\n    <div >\r\n      <div style={{ lineHeight: '1.5rem' }}>\r\n        <div style={{ textAlign: 'center' }}><u><b>Patch Notes/Updates</b></u></div>\r\n\r\n        <div style={{ paddingLeft: 27, width: '80%', textAlign: 'left' }}>\r\n          <p><b style={{ display: 'inline-block', marginBottom: '1rem' }}>Hello, and welcome to Mild Mayhem!</b>\r\n            <br></br>The goal is simple, defeat your opponent! Use your lightning bolts and magic blasts. You can deflect the magic blasts with your sword and dodge through attacks.\r\n            </p>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notes","export default __webpack_public_path__ + \"static/media/WorkingShowcase.430d8f0c.mp4\";","import {React, Component} from 'react';\r\nimport ReactPlayer from \"react-player\";\r\nimport styles from '../videos/responsive-player.css';\r\nimport localPVPVideo from '../videos/WorkingShowcase.mp4';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nconst ResponsivePlayer = () => {\r\n    const history = useHistory();\r\n    function startMatch() {\r\n        history.push(\"/game\");\r\n    }    \r\n    \r\n    return (\r\n        <div style={{height: \"100%\"}}>\r\n            <div className='player-wrapper'>\r\n            <ReactPlayer\r\n                className='react-player'\r\n                url={localPVPVideo}\r\n                width='100%'\r\n                height='100%'\r\n                playing={true}\r\n                loop={true}\r\n                muted={true}\r\n                controls={false}\r\n\r\n            />\r\n            <div onClick={startMatch} className='play-button'>\r\n                PLAY\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ResponsivePlayer;","import React from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nimport ReactPlayer from \"react-player\"\r\nimport ResponsivePlayer from '../videos/ResponsivePlayer.js';\r\nconst LocalPVP = () => {\r\n  return (\r\n    <div >\r\n        \r\n        <ResponsivePlayer  />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LocalPVP;","export default __webpack_public_path__ + \"static/media/GameShot5.80361c81.png\";","import React from 'react'\r\nimport LocalGameImage from '../images/GameShot5.png';\r\nimport styled from 'styled-components'\r\n\r\nconst StyledRoomContainer = styled.div`\r\ndisplay: flex;\r\npadding: 0.5em 1em;\r\ncolor: black;\r\nborder: 2px solid black;\r\nmargin: 1rem 0 0 1rem;\r\nborder-radius: 15px;\r\nalign-items: center;\r\n\r\n  .item__image-container {\r\n    height: 50px;\r\n    width: 50px;\r\n    overflow: hidden;\r\n    cursor: pointer;\r\n    border-radius: 50%;\r\n\r\n    .item__image {\r\n      height: 50px;\r\n      width: 50px;\r\n    }\r\n  }\r\n\r\n  .item__name {\r\n    margin: 0 1rem;\r\n    font-size: 1.1rem;\r\n    text-transform: uppercase;\r\n  }\r\n`\r\n\r\nconst Room = ({ room, onClick }) => {\r\n  console.log(room)\r\n  return (\r\n    <StyledRoomContainer onClick={onClick}>\r\n      <div className=\"item__image-container\">\r\n        <img className=\"item__image\" src={LocalGameImage} alt=\"in-game\" />\r\n      </div>\r\n      <div className=\"item__name\">{room.name}</div>\r\n    </StyledRoomContainer>\r\n  )\r\n}\r\n\r\nexport default Room","import io from 'socket.io-client';\r\n//use this for deploying build\r\nconst socket = io();\r\n//use this below for proxy server in development\r\n/*const socket = io('http://localhost:8080', {\r\n                transports: ['websocket'],\r\n                path: '/socket'\r\n            });\r\n*/\r\nfunction subscribeToShowRooms(cb) {\r\n    socket.on('showRooms', room => cb(null,room));\r\n    socket.emit('getRooms', room => cb(null,room));\r\n}\r\nfunction clearSocket() {\r\n    socket.removeAllListeners();\r\n}\r\n\r\nfunction checkRoomCreation(){\r\n    socket.emit('checkRoomCreation');\r\n}\r\nfunction joinRoom(playerId){\r\n    socket.emit('joinRoom', playerId);\r\n}\r\n\r\nexport {subscribeToShowRooms,clearSocket,socket,joinRoom};","import React,{ useRef, useEffect, useState} from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useAtom } from 'jotai'\r\nimport { roomsAtom, matchAtom } from '../jotai'\r\nimport Room from './Room'\r\nimport styled from 'styled-components'\r\nimport { joinRoom } from '../api';\r\n\r\nconst StyledOnlinePVPContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .button-container {\r\n    position: relative;\r\n    width: 100%;\r\n    text-align: center;\r\n    margin: 0;\r\n  }\r\n\r\n  .createRoom-button{\r\n    margin: 1.4rem auto;\r\n    padding: 0.8rem 1.2rem;\r\n    font-size: 1.1rem;\r\n    border-radius: 25px;\r\n    outline: none;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      background-color: rgb(221,221,221)\r\n    }\r\n  }\r\n  .border-elem {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    width: 85%;\r\n    margin: 0 auto;\r\n    border-bottom: 2px solid rgb(79,79,79);\r\n  }\r\n\r\n  .roomlist-container {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .roomlist-title {\r\n      margin-bottom: 0;\r\n      font-size: 1.1rem;\r\n    }\r\n\r\n    .roomlist {\r\n      width: 100%;\r\n      padding: 0 1rem 1rem;\r\n      display: flex;\r\n      flex-direction: row;\r\n      flex-wrap: wrap;\r\n    }\r\n\r\n  }\r\n`\r\nconst OnlinePVP = ({ matchRoomClicked }) => {\r\n  const isPvpClicked = useRef(false);\r\n  const history = useHistory();\r\n  const [rooms, setRooms] = useAtom(roomsAtom);\r\n  const [match, setMatch] = useAtom(matchAtom);\r\n \r\n  useEffect(() => {\r\n    //Wait for rerender to navigate so that Jotai updates necessary states before navigation\r\n    if (isPvpClicked.current){\r\n      //go to game\r\n     history.push(\"/game\")\r\n    }\r\n  });\r\n \r\n  const startMatch = (gameType, roomName, roomId) => {\r\n    setMatch({gameType: gameType, roomName: roomName, roomId: roomId});\r\n   \r\n    isPvpClicked.current = true;\r\n    joinRoom(roomId);\r\n  }\r\n  const createRoom = () => {\r\n    setMatch({gameType: 'createOnline', roomName: '', roomId: ''});\r\n    \r\n    isPvpClicked.current = true;\r\n   \r\n  }\r\n \r\n  return (\r\n    <StyledOnlinePVPContainer>\r\n      <div className=\"button-container\">\r\n        <div style={{ color: 'black' }}>\r\n          <button onClick={createRoom} className=\"createRoom-button\">Create Room</button>\r\n        </div>\r\n        <div className=\"border-elem\"></div>\r\n      </div>\r\n      <div className=\"roomlist-container\">\r\n        <p className=\"roomlist-title\">Available Online rooms</p>\r\n        <div className=\"roomlist\">\r\n          {\r\n            Object.keys(rooms).length\r\n              ? Object.keys(rooms).map((room, index) => {\r\n               return <div style={{textDecoration:'none'}}>\r\n                  <Room key={rooms[room].id} room={rooms[room]} onClick={() => startMatch('joinOnline', rooms[room].name, rooms[room].id)} />\r\n                </div>\r\n              })\r\n              : <p>It Seems there are no rooms available. How about creating your own room? Click the <b>Create Room</b> Button Above.\r\n          </p>\r\n          }\r\n        </div>\r\n      </div>\r\n    </StyledOnlinePVPContainer>\r\n\r\n  )\r\n}\r\n\r\nexport default OnlinePVP\r\n\r\n// Object.keys(roomCount).map((room, index) => (\r\n//   <Grid item xs={4}>\r\n//     <Link to='/game' style={{ color: 'black' }}>\r\n//       <MatchRoomBox key={roomCount[room].id} onClick={() => matchRoomClicked('joinOnline', roomCount[room].name, roomCount[room].id)} image={LocalGameImage} matchType={roomCount[room].name}></MatchRoomBox>\r\n//     </Link>\r\n//   </Grid>","import React from \"react\";\r\nimport { controlsAtom, keyBindingsAtom, controlConfigAtom } from \"../jotai\";\r\nimport { useAtom } from \"jotai\";\r\nimport styled from \"styled-components\";\r\n\r\n// components with styles\r\nconst StyledControls = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  h2 {\r\n    font-size: 1.5rem;\r\n    text-transform: uppercase;\r\n  }\r\n\r\n  .controls-option {\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-bottom: 1.5rem;\r\n\r\n    .keyboard {\r\n      margin: 0 1.5rem 0 0;\r\n    }\r\n\r\n    .gamepad {\r\n      margin: 0 0 0 1.5rem;\r\n    }\r\n\r\n    button {\r\n      border-radius: 15px;\r\n      padding: 10px 30px;\r\n      outline: none;\r\n      font-size: 1.2rem;\r\n      font-weight: bold;\r\n      cursor: pointer;\r\n    }\r\n\r\n    button:hover {\r\n      background-color: rgb(221,221,221);\r\n    }\r\n  }\r\n\r\n  .controls-details {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .player-details {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .players {\r\n        margin: 0 60px;\r\n      }\r\n\r\n      span {\r\n        text-decoration: underline;\r\n        font-size: 1.3rem;\r\n      }\r\n    }\r\n\r\n  }\r\n  .list-container {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n`;\r\nconst KeyTitle = styled.span`\r\ngrid-area: title;\r\nfont-size: 1rem;\r\npadding-left: 10px;\r\n`;\r\nconst KeyValue = styled.span`\r\ngrid-area: value;\r\nfont-size: 1.15rem;\r\njustify-self: center;\r\npadding-left: 10px;\r\n\r\n`;\r\n\r\nconst ListItem = styled.li`\r\ndisplay: grid;\r\ngrid-template: 'title value';\r\ngrid-template-columns: 105px 130px;\r\ngrid-template-rows: 26px;\r\nlist-style: none;\r\nalign-items: center;\r\npadding: 3px 0;\r\n`;\r\n\r\nconst List = styled.ul`\r\nmargin-left: 0;\r\npadding-left: 0;\r\n`;\r\n// controls\r\nconst controlsList = [\r\n  [\"WASD\", \"SPACE\", \"O\", \"P\", \"I\", \"SHIFT\"],\r\n  [\"ArrowKeys\", \"NumPad 0\", \"NumPad 8\", \"NumPad 9\", \"NumPad 1\", \"NumPad 4\"],\r\n  [\"Left Stick\", \"X\", \"Right Trigger\", \"Left Trigger\", \"B\", \"Right Bumper\"],\r\n];\r\n\r\nconst Controls = () => {\r\n  const [controlMode, setControlMode] = useAtom(controlsAtom);\r\n  const [keyBindings, setKeyBindings] = useAtom(keyBindingsAtom);\r\n  const [controlConfig, setControlConfig] = useAtom(controlConfigAtom);\r\n  const toggleControl = (e) => {\r\n    if(e.target.innerText.toLowerCase() === controlMode.toLowerCase()) {\r\n      return\r\n    }\r\n    if (controlMode === \"keyboard\") {\r\n      setControlConfig({player1: {\r\n      Movement: 'WASD',\r\n      SwordSlash: 'SPACE',\r\n      MagicBlast: 'P'\r\n    },\r\n    player2: {\r\n      Movement: 'ArrowKeys',\r\n      SwordSlash: 'NumPad0',\r\n      MagicBlast: 'NumPad9'\r\n    }});\r\n      //setControlMode(\"gamepad\");\r\n      //setKeyBindings(false);\r\n    } else {\r\n      setControlConfig({ player1: {\r\n          Movement: 'GamePad',\r\n          SwordSlash: '',\r\n          MagicBlast: ''\r\n        },player2: {\r\n          Movement: 'ArrowKeys',\r\n          SwordSlash: 'NumPad0',\r\n          MagicBlast: 'NumPad9'\r\n        }});\r\n      //setControlMode(\"keyboard\");\r\n      //setKeyBindings(true);\r\n    }\r\n  };\r\n  // displays keys\r\n  const mapKeys = (item) => {\r\n    return (\r\n      <div className=\"list-container\">\r\n        <List>\r\n          <ListItem>\r\n            <KeyTitle>Movement</KeyTitle>\r\n            <KeyValue>{item[0][0]}</KeyValue>\r\n          </ListItem>\r\n          <ListItem>\r\n            <KeyTitle>Sword Slash</KeyTitle>\r\n            <KeyValue>{item[0][1]}</KeyValue>\r\n          </ListItem>\r\n          <ListItem>\r\n            <KeyTitle>Magic Blast</KeyTitle>\r\n            <KeyValue>{item[0][2]}</KeyValue>\r\n          </ListItem>\r\n          <ListItem>\r\n            <KeyTitle>Lightning</KeyTitle>\r\n            <KeyValue>{item[0][3]}</KeyValue>\r\n          </ListItem>\r\n          <ListItem>\r\n            <KeyTitle>Shield</KeyTitle>\r\n            <KeyValue>{item[0][4]}</KeyValue>\r\n          </ListItem>\r\n          <ListItem>\r\n            <KeyTitle>Dodge</KeyTitle>\r\n            <KeyValue>{item[0][5]}</KeyValue>\r\n          </ListItem>\r\n        </List>\r\n        {item.length > 1 && (\r\n          <List >\r\n            <ListItem>\r\n              <KeyTitle>Movement</KeyTitle>\r\n              <KeyValue>{item[1][0]}</KeyValue>\r\n            </ListItem>\r\n            <ListItem>\r\n              <KeyTitle>Sword Slash</KeyTitle>\r\n              <KeyValue>{item[1][1]}</KeyValue>\r\n            </ListItem>\r\n            <ListItem>\r\n              <KeyTitle>Magic Blast</KeyTitle>\r\n              <KeyValue>{item[1][2]}</KeyValue>\r\n            </ListItem>\r\n            <ListItem>\r\n              <KeyTitle>Lightning</KeyTitle>\r\n              <KeyValue>{item[1][3]}</KeyValue>\r\n            </ListItem>\r\n            <ListItem>\r\n              <KeyTitle>Shield</KeyTitle>\r\n              <KeyValue>{item[1][4]}</KeyValue>\r\n            </ListItem>\r\n            <ListItem>\r\n              <KeyTitle>Dodge</KeyTitle>\r\n              <KeyValue>{item[1][5]}</KeyValue>\r\n            </ListItem>\r\n          </List>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <StyledControls>\r\n      <h2>Controls</h2>\r\n      <div className=\"controls-option\">\r\n        <button onClick={toggleControl} className=\"keyboard\">\r\n          Keyboard\r\n        </button>\r\n        <button onClick={toggleControl} className=\"gamepad\">\r\n          Gamepad\r\n        </button>\r\n      </div>\r\n      <div className=\"controls-details\">\r\n        <div className=\"player-details\">\r\n          {controlMode === \"keyboard\" ? (\r\n            <>\r\n              <span className=\"players\">Player 1</span>\r\n              <span className=\"players\">Player 2</span>\r\n            </>\r\n          ) : (\r\n              <span>All players</span>\r\n            )}\r\n        </div>\r\n        <div className=\"key-bindings\">\r\n          {keyBindings\r\n            ? mapKeys(controlsList.slice(0, 2))\r\n            : mapKeys(controlsList.slice(2))}\r\n        </div>\r\n      </div>\r\n    </StyledControls>\r\n  );\r\n};\r\n\r\nexport default Controls;\r\n","import React from 'react'\r\nimport { useAtom } from 'jotai'\r\nimport { displayModeAtom } from '../jotai'\r\nimport Notes from './Notes'\r\nimport LocalPVP from './LocalPVP'\r\nimport OnlinePVP from './OnlinePVP'\r\nimport Controls from './Controls'\r\nconst DisplayBox = ({matchRoomClicked}) => {\r\n  const [displayMode, setDisplayMode] = useAtom(displayModeAtom)\r\n\r\n  const displayContent = (displayMode) => {\r\n    switch(displayMode) {\r\n      case 'LocalPVP': return (<LocalPVP />)\r\n\r\n      case 'OnlinePVP': return (<OnlinePVP matchRoomClicked={matchRoomClicked}/>)\r\n\r\n      case 'Stats': return displayMode\r\n\r\n      case 'Controls': return (<Controls />)\r\n\r\n      case 'Tutorial': return displayMode\r\n\r\n       case 'Notes': return (<Notes />)\r\n\r\n      default: return (<LocalPVP />)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"display-container\">\r\n      { displayContent(displayMode) }\r\n    </div>\r\n  )\r\n}\r\nexport default DisplayBox","import React, { useState,useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../styles/main.scss';\r\nimport BrickImage from '../images/ImpressionistBrickButtonG.jpg';\r\nimport SwordMarker from '../images/SwordMarker.png';\r\nconst MenuTabButton = (props) => {\r\n    const toggle = () => {\r\n        props.onClick();\r\n    };\r\n        let highlightColor;\r\n        let swordMarker;\r\n        let underline = 'none';\r\n        if (props.selected){\r\n            highlightColor = \"#005cff\";\r\n            underline = 'underline';\r\n            swordMarker = <img style={{backgroundSize: 'cover', height: 30, position: 'absolute', top: 4, left: 10}} src={SwordMarker} alt=\"this is car image\" />;\r\n        }\r\n        else {\r\n            highlightColor = \"black\";\r\n            swordMarker = <div></div>\r\n        }\r\n        return <div>\r\n            <div onClick={toggle} className=\"menuTabButton\" style = {{ position: 'relative', textAlign: 'center', margin: 'auto', height: 39.5, backgroundColor: 'grey', width: '70%', cursor: 'pointer', borderRadius: 3, border: (\".2px solid \"+ highlightColor)}}>\r\n                <img style={{backgroundSize: 'cover', opacity: .3, position: 'relative', width: '100%', top: 0, left: 0}} src={BrickImage} alt=\"this is car image\" />\r\n                {swordMarker}\r\n                <div style={{fontSize: 20, textDecoration: underline, fontFamily: 'Audiowide', position: 'absolute', textAlign: 'center', top: 4, left: 38}}>\r\n                \r\n                {props.title}\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    \r\n}\r\nexport default MenuTabButton;","export default \"data:image/png;base64,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\"","export default \"data:image/jpeg;base64,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\"","export default __webpack_public_path__ + \"static/media/DeepArted.e7580b01.jpg\";","import React, { useCallback } from 'react';\r\nimport { useAtom } from 'jotai';\r\nimport { displayModeAtom, roomsAtom } from '../jotai';\r\nimport '../styles/main.scss';\r\nimport ReactDOM from 'react-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport MatchRoomBox from '../components/MatchRoomBox.js';\r\nimport InfoMenuBox from '../components/InfoMenuBox.js';\r\nimport DisplayBox from '../components/DisplayBox'\r\nimport LocalGameImage from '../images/GameShot5.png';\r\nimport OnlineGameImage from '../images/OnlineGame.png';\r\nimport { Link } from 'react-router-dom';\r\nimport { subscribeToShowRooms, socket, getRooms, joinRoom } from '../api';\r\nimport { useState, useEffect } from 'react';\r\nimport MenuTabButton from '../components/menuTabButton.js';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n//import TestImage from '../images/VanGogh.png';\r\nimport TestImage from '../images/DeepArted.jpg';\r\n//import TestImage from '../images/DeepArtedBC.jpg';\r\n//import TestImage from '../images/DeepArtedBC2.jpg';\r\n//import TestImage from '../images/DeepArtedG.jpg';\r\n//import TestImage from '../images/DeepArtedGCY.jpg';\r\nconst styles = {\r\n  menuTabButton: {\r\n    padding: '16px 0px 16px 0px',\r\n    paddingTop: 7,\r\n    paddingBottom: 7,\r\n    textAlign: 'center',\r\n    margin: 'auto',\r\n    backgroundColor: 'grey',\r\n    width: '70%',\r\n    cursor: 'pointer',\r\n    borderRadius: 5,\r\n    border: \"3px solid black\",\r\n    '& a:hover': {\r\n      border: \"3px solid green\",\r\n    }\r\n  }\r\n\r\n};\r\nconst MenuPage = (props) => {\r\n  const [displayMode, setDisplayMode] = useAtom(displayModeAtom);\r\n  const [menuTabButtonSelection, setMenuTabButtonSelection] = useState({\r\n    LocalPVP: true,\r\n    OnlinePVP: false,\r\n    Stats: false,\r\n    Controls: false,\r\n    Tutorial: false,\r\n    Notes: false,\r\n  });\r\n  const updateDisplayMode = useCallback((DisplayModeString) => {\r\n    console.log(\"displayModeStringis: \" + DisplayModeString);\r\n\r\n    let newSelection = {\r\n    LocalPVP: false,\r\n    OnlinePVP: false,\r\n    Stats: false,\r\n    Controls: false,\r\n    Tutorial: false,\r\n    Notes: false\r\n    }\r\n   \r\n    newSelection[DisplayModeString] = true;\r\n    //console.log('newSelection is: ' + JSON.stringify(newSelection));\r\n    setMenuTabButtonSelection(() => newSelection);\r\n\r\n    setDisplayMode(() => DisplayModeString);\r\n\r\n  }, [ setDisplayMode ]);\r\n\r\n\r\n  const [rooms, setRooms] = useAtom(roomsAtom)\r\n  const [controls, setControls] = useState({\r\n    player1: {\r\n      Movement: 'WASD',\r\n      SwordSlash: 'SPACE',\r\n      MagicBlast: 'P'\r\n    },\r\n    player2: {\r\n      Movement: 'ArrowKeys',\r\n      SwordSlash: 'NumPad0',\r\n      MagicBlast: 'NumPad9'\r\n    }\r\n  })\r\n  //   this.state = {\r\n  //     rooms: {},\r\n  //     controls: {\r\n  //       player1: {\r\n  //         Movement: 'WASD',\r\n  //         SwordSlash: 'SPACE',\r\n  //         MagicBlast: 'P'\r\n  //       },\r\n  //       player2: {\r\n  //         Movement: 'ArrowKeys',\r\n  //         SwordSlash: 'NumPad0',\r\n  //         MagicBlast: 'NumPad9'\r\n  //       }\r\n  //     }\r\n  //   };\r\n  // };\r\n  useEffect(() => {\r\n    //This runs once at the beginning so that if players press back on OnlinePvp sthey don't see the localpvp tab with onlinepvp displayMode option\r\n    setDisplayMode('LocalPVP');\r\n    //Remove event listeners in case user pressed back from online game\r\n\r\n    //Whenever the rooms on the server are updated, the room state is set again\r\n    subscribeToShowRooms((err, room) => {\r\n      console.log(\"showRooms called was received in menupage\")\r\n      let newRooms = room;\r\n      setRooms(newRooms);\r\n    });\r\n  }, [setRooms])\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket.removeAllListeners()\r\n    }\r\n  }, [])\r\n  \r\n  // redundant code\r\n\r\n  // const setRoomState = (newRooms) => {\r\n  //   setRooms(newRooms)\r\n  // }\r\n\r\n  /*Function passed into the infoMenuBox, Sets the control config object which then gets passed up to App.js and then down into the GamePage component and the phaser game \r\n  Perhaps custom controls here can detect keycodes and translate directly into a keycode value that gets passed into phaser\r\n  For example, an option to click on swordslash and press a key to get the key code(ex: SPACE), then send that to the phaser game where it will\r\n  be set as the attack.*/\r\n  /*const controlConfigSelected = (controlConfig) => {\r\n    if (controlConfig === \"keyboard1\") {\r\n      setControls({\r\n        player1: {\r\n          Movement: 'WASD',\r\n          SwordSlash: 'SPACE',\r\n          MagicBlast: 'P'\r\n        },\r\n        player2: controls.player2\r\n      });\r\n    }\r\n    else if (controlConfig === \"keyboard2\") {\r\n      setControls({\r\n        player1: controls.player1,\r\n        player2: {\r\n          Movement: 'ArrowKeys',\r\n          SwordSlash: 'NumPad0',\r\n          MagicBlast: 'NumPad9'\r\n        },\r\n      });\r\n    }\r\n    else if (controlConfig === \"gamepad1\") {\r\n      setControls({\r\n        player1: {\r\n          Movement: 'GamePad',\r\n          SwordSlash: '',\r\n          MagicBlast: ''\r\n        },\r\n        player2: controls.player2\r\n\r\n      });\r\n    }\r\n    else if (controlConfig === \"gamepad2\") {\r\n      setControls({\r\n        player1: controls.player1,\r\n        player2: {\r\n          Movement: 'GamePad',\r\n          SwordSlash: '',\r\n          MagicBlast: ''\r\n        },\r\n      });\r\n    }\r\n  };\r\n  */\r\n  //When a match room is clicked, the control config is passed to the game for the game start\r\n  /*const matchRoomClicked = (gameType, roomName, playerId) => {\r\n    if (gameType === 'joinOnline') {\r\n      joinRoom(playerId);\r\n    }\r\n\r\n    props.passGameConfig(gameType, roomName);\r\n    props.passControlConfig(controls);\r\n    console.log('room created')\r\n  };\r\n  */\r\n  let roomCount = rooms;\r\n\r\n  let joinMatchBox;\r\n\r\n  //I set the resolution to 800*600, which is the size of an old school NewGrounds web game. It is currently not responsive\r\n  //This could be changed for a mobile depoloyment or something\r\n  return (\r\n    <div style={{ backgroundImage: `url(${TestImage})`,  backgroundSize: '100% 100%', borderRadius: 15, maxWidth: 800, minWidth: 800, minHeight: 600, maxHeight: 600, margin: 'auto' }}>\r\n      {/* for border box */}\r\n      <CssBaseline />\r\n      <Grid container style={{ height: '600px' }}>\r\n        {/*Title Bar*/}\r\n        <Grid item xs={12}>\r\n          <div style={{ textAlign: 'center', borderRadius: 15, background: 'rgba(0, 0, 0, 0.6)', fontSize: 40, fontFamily: 'Audiowide', padding: 20, }}>\r\n            <div style={{ color: '#39FF14' }}>\r\n              <u>\r\n                Mild Mayhem\r\n                    </u>\r\n            </div>\r\n\r\n          </div>\r\n        </Grid>\r\n        {/*Interactive information box*/}\r\n        <Grid item xs={12} container style={{ padding: '60px 0',height: '510px' }}>\r\n          <Grid item xs={4}>\r\n            <div>\r\n              <MenuTabButton selected={menuTabButtonSelection.LocalPVP} onClick={() => updateDisplayMode(\"LocalPVP\")} title=\"Local PVP\"></MenuTabButton>\r\n              <MenuTabButton selected={menuTabButtonSelection.OnlinePVP} onClick={() => updateDisplayMode(\"OnlinePVP\")} title=\"Online PVP\"></MenuTabButton>\r\n              <MenuTabButton selected={menuTabButtonSelection.Stats} onClick={() => updateDisplayMode(\"Stats\")} title=\"Stats\"></MenuTabButton>\r\n              <MenuTabButton selected={menuTabButtonSelection.Controls} onClick={() => updateDisplayMode(\"Controls\")} title=\"Controls\"></MenuTabButton>\r\n              <MenuTabButton selected={menuTabButtonSelection.Tutorial} onClick={() => updateDisplayMode(\"Tutorial\")} title=\"Tutorial\"></MenuTabButton>\r\n              <MenuTabButton selected={menuTabButtonSelection.Notes} onClick={() => updateDisplayMode(\"Notes\")} title=\"Notes\"></MenuTabButton>\r\n            </div>\r\n            {/* <div>\r\n              <MenuTabButton  title=\"Local PVP\"></MenuTabButton>\r\n              <MenuTabButton  title=\"Online PVP\"></MenuTabButton>\r\n              <MenuTabButton  title=\"Stats\"></MenuTabButton>\r\n              <MenuTabButton  title=\"Controls\"></MenuTabButton>\r\n              <MenuTabButton  title=\"Tutorial\"></MenuTabButton>\r\n              <MenuTabButton  title=\"Notes\"></MenuTabButton>\r\n            </div> */}\r\n            {/*<InfoMenuBox setControlConfig={controlConfigSelected}></InfoMenuBox>\r\n          */}\r\n\r\n          </Grid>\r\n\r\n          {/*Online match box*/}\r\n\r\n            {/*\r\n          <div style={{ paddingTop: 40, paddingBottom: 30 }}>\r\n            <Link to='/game' style={{ color: 'black' }}>\r\n              <MatchRoomBox onClick={() => matchRoomClicked('createOnline')} image={OnlineGameImage} matchType={'Start Online Room'}></MatchRoomBox>\r\n            </Link>\r\n            \r\n          </div>\r\n          <div style={{ textAlign: 'center', paddingTop: 25, font: 25, color: '#39FF14' }}>\r\n            <b>Available Online Matches</b>\r\n          </div>\r\n          */}\r\n\r\n          {/* display box */}\r\n          <Grid item xs={8} >\r\n            <DisplayBox />\r\n          </Grid>\r\n\r\n\r\n        </Grid>\r\n        {/*Offline match box*/}\r\n        {/* <Grid item xs={4}> */}\r\n        {/* <div style={{ paddingTop: 40, paddingBottom: 30 }}>\r\n            {/*route to game\r\n            <Link to='/game' style={{ color: 'black' }}>\r\n              <MatchRoomBox onClick={() => matchRoomClicked('offline')} image={LocalGameImage} matchType={'Start Local Room'}></MatchRoomBox>\r\n            </Link>\r\n          </div>\r\n          */}\r\n        {/* </Grid> */}\r\n        {/* \r\n        {/*List of available online rooms\r\n        <Grid item xs={1}>\r\n        </Grid>\r\n\r\n        <Grid item xs={10}>\r\n\r\n\r\n          <div style={{ borderRadius: 15, backgroundColor: '#9A9A9A', align: 'left', textAlign: 'left', minHeight: 200, maxHeight: 200, border: '1px solid' }}>\r\n            <Grid container>\r\n              {\r\n\r\n                Object.keys(roomCount).map((room, index) => (\r\n                  <Grid item xs={4}>\r\n                    <Link to='/game' style={{ color: 'black' }}>\r\n                      <MatchRoomBox key={roomCount[room].id} onClick={() => matchRoomClicked('joinOnline', roomCount[room].name, roomCount[room].id)} image={LocalGameImage} matchType={roomCount[room].name}></MatchRoomBox>\r\n                    </Link>\r\n                  </Grid>\r\n                ))\r\n\r\n\r\n              }\r\n            </Grid>\r\n\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item xs={1}>\r\n        </Grid>\r\n      */}\r\n      </Grid>\r\n\r\n    </div>)\r\n\r\n}\r\n\r\nexport default MenuPage;","\r\nimport Phaser from 'phaser';\r\nexport default class Player extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture)\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            this.body.setSize(30,61);\r\n            this.createAnimations(scene);\r\n            //Tracks changes in player orientation\r\n            //Player starts out looking forwards so x: 0, y: -1 makes sense as initial value\r\n            this.orientationVector = {x: 0, y: -1};\r\n            //\r\n            this.alive = true;\r\n            this.x = x;\r\n            this.y = y;\r\n            this.dodging = false;\r\n            this.scene = scene;\r\n            this.stunned = false;\r\n            //This can be passed into contructor later\r\n            //Should I use getters and setters like this?\r\n            this.setPlayerSpeed(500);\r\n            this.dodgeSpeed = 1600;\r\n           \r\n        }\r\n        \r\n        //Starts stun for player\r\n        playStun(){\r\n            this.stunned = true;\r\n            this.setAlpha(.5);\r\n            //calls a timer which removes player stun after 1 second\r\n            let timedEvent = this.scene.time.delayedCall(1000, this.stunComplete, [], this);\r\n        }\r\n        knockBack(gameObj){\r\n          //This code finds the angle between the player and the object that damaged the player,\r\n          //then it sends the player flying in the exact opposite direction\r\n          let gameObjCenter = gameObj.getCenter();\r\n          let playerCenter = this.getCenter();\r\n          let vectorAngle = Phaser.Math.Angle.Between(gameObjCenter['x'],gameObjCenter['y'],playerCenter['x'],playerCenter['y']);\r\n          \r\n          let knockBackVel = 1200;\r\n          let movementX = Math.cos(vectorAngle)*knockBackVel;\r\n          let movementY = Math.sin(vectorAngle)*knockBackVel;\r\n          this.setVelocity(movementX,movementY);\r\n        }\r\n        stunComplete(){\r\n          this.setAlpha(1);\r\n          this.stunned = false\r\n        }\r\n        dodge(){\r\n          //Changes player velocity and sets dodge property \r\n          \r\n          this.body.setVelocity(this.orientationVector.x*this.dodgeSpeed,this.orientationVector.y*this.dodgeSpeed);\r\n          this.dodging = true;\r\n          this.setBounce(0);\r\n          console.log(this.orientationVector);\r\n          //This calls after the dodge cooldown completes\r\n          let timedEvent = this.scene.time.delayedCall(150, this.finishedDodging, [], this);\r\n        }\r\n        finishedDodging(){\r\n          this.setBounce(0);\r\n          this.dodging = false;\r\n          this.body.setVelocity(0,0);\r\n        }\r\n        //These two functions are for checking collisions in the scene code,\r\n        //In the event that player is hit while stunned, the player shouldn't take damage or do anything else that's strange.\r\n        getDodging(){\r\n          return this.dodging;\r\n        }\r\n        getStun(){\r\n          return this.stunned;\r\n        }\r\n        setPlayerSpeed(speed)\r\n        {\r\n          this.playerSpeed = speed;\r\n        }\r\n\r\n        setPlayerVelocity(velocityVector)\r\n        {\r\n          \r\n          this.body.setVelocity(velocityVector.x*this.playerSpeed,velocityVector.y*this.playerSpeed);\r\n         \r\n          //Not Moving\r\n          if(velocityVector.x === 0 && velocityVector.y === 0){\r\n            this.anims.stop();\r\n          }\r\n          //Moving Up\r\n          else if (velocityVector.y > 0){\r\n            this.anims.play(this.texture.key + 'down', true);\r\n          }\r\n          //Moving Down\r\n          else if (velocityVector.y < 0){\r\n            this.anims.play(this.texture.key + 'up', true);\r\n          }\r\n          //Moving Right\r\n          else if (velocityVector.x > 0) {\r\n            this.anims.play(this.texture.key + 'right', true);\r\n          }\r\n          //Moving Left\r\n          else if (velocityVector.x < 0) {\r\n            this.anims.play(this.texture.key + 'left', true);\r\n          }\r\n    \r\n        }\r\n        \r\n        setMovementAnim(velocityVector){\r\n          if (typeof this.anims !== 'undefined'){\r\n             //Not Moving\r\n              if(velocityVector.x === 0 && velocityVector.y === 0){\r\n                this.anims.stop();\r\n              }\r\n              //Moving Up\r\n              else if (velocityVector.y > 0){\r\n                this.anims.play(this.texture.key + 'down', true);\r\n              }\r\n              //Moving Down\r\n              else if (velocityVector.y < 0){\r\n                this.anims.play(this.texture.key + 'up', true);\r\n              }\r\n              //Moving Right\r\n              else if (velocityVector.x > 0) {\r\n                this.anims.play(this.texture.key + 'right', true);\r\n              }\r\n              //Moving Left\r\n              else if (velocityVector.x < 0) {\r\n                this.anims.play(this.texture.key + 'left', true);\r\n              }\r\n          }\r\n        }\r\n        setOrientationVector(velocityVector){\r\n          //Check to make sure 0,0 is not passed in(that is not a direction)\r\n          if(Math.abs(velocityVector.x)+Math.abs(velocityVector.y)>0){\r\n             \r\n            //Check to see if there is a change in orientation\r\n            if (this.orientationVector.x !== velocityVector.x || this.orientationVector.y !== velocityVector.y){\r\n              this.orientationVector = velocityVector;\r\n            }\r\n\r\n          }\r\n        }\r\n        gameOver(){\r\n          this.alive = false;\r\n        }\r\n        isAlive(){\r\n          return this.alive;\r\n        }\r\n        getOrientationVector(){\r\n          return this.orientationVector;\r\n        }\r\n        setHealthBar(healthBar){\r\n          this.healthBar = healthBar;\r\n        }\r\n        getHealthBar(){\r\n          return this.healthBar;\r\n        }\r\n        getX()\r\n        {\r\n          return this.x;\r\n        }\r\n        getY()\r\n        {\r\n          return this.y;\r\n        }\r\n        //Create player animations\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: this.texture.key + 'left',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 4, end: 5 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: this.texture.key + 'up',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 0, end: 1 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: this.texture.key + 'right',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 2, end: 3 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: this.texture.key + 'down',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 6, end: 7 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          \r\n        }\r\n    }\r\n","import Phaser from 'phaser';\r\nexport default class Controls extends Phaser.GameObjects.Sprite\r\n    {\r\n\r\n        constructor (scene,type,gamePadCount,gamePadNumber)\r\n        {\r\n            //Information is being passed from the react application into here for control config\r\n            super(scene,type,gamePadCount,gamePadNumber);\r\n            this.setKeyInput(scene,type);\r\n            this.scene = scene;\r\n            //The gamePad Count and gamePad number are tracked to make sure that the passed\r\n            //gamepad amounts are equal to the detected gamepads in the scene,\r\n            //Otherwise errors will occurs\r\n            //The onConnect listener does not seem to work normally,  \r\n            //But I am sure there is a better solution for this\r\n            this.gamePadCount = gamePadCount;\r\n            this.gamePadNumber = gamePadNumber;\r\n            \r\n        }\r\n\r\n        setWASDControls(){\r\n          this.directionals = this.directionals = this.scene.input.keyboard.addKeys({\r\n                up:Phaser.Input.Keyboard.KeyCodes.W,\r\n                down:Phaser.Input.Keyboard.KeyCodes.S,\r\n                left:Phaser.Input.Keyboard.KeyCodes.A,\r\n                right:Phaser.Input.Keyboard.KeyCodes.D\r\n            });\r\n          this.magicBlastAttack = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P);\r\n          this.swordSwing = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\r\n          this.dodge = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SHIFT);\r\n          this.lightningBolt = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.O);\r\n          this.shield =  this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.I);\r\n        }\r\n        setArrowKeyControls(){\r\n          this.directionals = this.scene.input.keyboard.createCursorKeys();\r\n          this.magicBlastAttack = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_NINE);\r\n          this.swordSwing = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_ZERO);\r\n          this.dodge = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_FOUR);\r\n          this.lightningBolt = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_EIGHT);\r\n          this.shield = this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.NUMPAD_ONE);\r\n        }\r\n        setKeyInput(scene,{directionals,magicBlast,swordSwing,dodge,shield}={}){\r\n          //Potentially can add more configurable controls by using passing keycodes in here in the future\r\n          if (directionals === 'WASD'){\r\n           this.setWASDControls();\r\n          }\r\n          else if (directionals === 'ArrowKeys'){\r\n           this.setArrowKeyControls();\r\n          }\r\n          else if (directionals === 'GamePad'){\r\n            \r\n            this.gamePadMode = true;\r\n            console.log(\"game pad mode active\" + this.gamePadMode);\r\n            this.lightningBolt = {};\r\n            this.swordSwing = {};\r\n            this.magicBlastAttack = {};\r\n            this.dodge = {};\r\n            this.shield = {};\r\n\r\n            const xAxis = 0;\r\n            const yAxis = 0;\r\n            this.directionals = {\r\n                up: {isDown: yAxis > 0 ? true : false},\r\n                down: {isDown: yAxis < 0 ? true : false},\r\n                left: {isDown: xAxis > 0 ? true : false},\r\n                right: {isDown: xAxis > 0 ? true : false},\r\n              };\r\n            this.scene.input.gamepad.once('connected', function (pad, event) {\r\n             \r\n            }, this);\r\n            this.scene.input.gamepad.on('down', function (pad, button, index) {\r\n              \r\n             \r\n              this.swordSwing.isDown = pad.X;\r\n              this.magicBlastAttack.isDown = pad.R2;\r\n              this.dodge.isDown = pad.R1;\r\n              this.lightningBolt.isDown = pad.L2;\r\n              this.shield.isDown = pad.B;\r\n              \r\n              \r\n            }, this);\r\n           this.scene.input.gamepad.on('up', function (pad, button, index) {\r\n              this.swordSwing.isDown = false;\r\n              this.magicBlastAttack.isDown = false;\r\n              this.dodge.isDown = false;\r\n              this.lightningBolt.isDown = false;\r\n              this.shield.isDown = false;\r\n              \r\n            }, this);\r\n          }\r\n          \r\n          \r\n          \r\n          \r\n          \r\n         \r\n        }\r\n        \r\n        getMovementVector(){\r\n         //This function returns an x and y value that can easily be multiplied onto\r\n         //direction values in the scene, ex: {x:0*velocity,y:1*velocity}, \r\n          if (this.gamePadMode){\r\n            let pad: Phaser.Input.Gamepad.Gamepad;\r\n\r\n            //If there are any controllers connected and the gamepad isActive at all then...\r\n            if (this.scene.input.gamepad.total&&this.scene.input.gamepad.isActive()){ \r\n               \r\n                //If the total amount of gamepads are greater than or equal to the desired amount...\r\n                if (this.scene.input.gamepad.total>=this.gamePadCount){\r\n                 \r\n                  pad = this.scene.input.gamepad.pad1\r\n                  \r\n                  if (this.scene.input.gamepad.pad2 && this.gamePadNumber===2){\r\n                    pad = this.scene.input.gamepad.pad2;\r\n                  }\r\n\r\n                  const xAxis = pad.axes[0].getValue();\r\n                  const yAxis = pad.axes[1].getValue();\r\n                \r\n                  this.directionals = {\r\n                    up: {isDown: yAxis < 0 ? true : false},\r\n                    down: {isDown: yAxis > 0 ? true : false},\r\n                    left: {isDown: xAxis < 0 ? true : false},\r\n                    right: {isDown: xAxis > 0 ? true : false},\r\n                  }\r\n                }\r\n                \r\n                \r\n                \r\n            }\r\n            else {\r\n                  console.log(\"Hey you didn't connect enough controllers\");\r\n                  //We should create a callback function here that resets the control scheme that is missing\r\n                  //and inform the user of the error of their ways.\r\n                  //We need the player number which is\r\n                  if (this.gamePadNumber == 1){\r\n                    //set controls back to keyboard wasd\r\n                    console.log(\"WASD keyboard Set\");\r\n                    this.setWASDControls();\r\n                    this.gamePadCount-=1;\r\n                  }\r\n                  else\r\n                  {\r\n                    //set controls to arrowkeys\r\n                    console.log(\"Arrow keyboard Set\");\r\n                    this.setArrowKeyControls();\r\n                    this.gamePadCount-=1;\r\n                  }\r\n                }\r\n\r\n       \r\n           }\r\n         return {\r\n           //Gets the vector for a directional press(y is inverted as it is in phaser/html5)\r\n           x: ((this.directionals.right.isDown)? 1:0)+((this.directionals.left.isDown)? -1:0),\r\n           y: ((this.directionals.up.isDown)? -1:0)+((this.directionals.down.isDown)? 1:0)};\r\n        }\r\n        getMoveInput(){\r\n          return {lightningBoltFiring: this.lightningBolt.isDown, dodgeFiring: this.dodge.isDown, magicBlastFiring: this.magicBlastAttack.isDown,swordSwingFiring: this.swordSwing.isDown, shieldFiring: this.shield.isDown};\r\n          \r\n        }\r\n        \r\n       \r\n    }","import Phaser from 'phaser';\r\nexport default class MagicBlast extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        //https://www.youtube.com/watch?v=jEaoeEdv7eU I used this tutorial to for extending a sprite in phaser3\r\n        constructor (scene,x,y,texture,{owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            //Make sprite .4 times the size\r\n            this.setScale(.4);\r\n            this.magicSpeed = 800;\r\n            //Turns hitbox into circle\r\n            this.setCircle(85);\r\n            this.createAnimations(scene);\r\n            this.anims.play('magicBlastSpin',true);\r\n            //Set which player owns the magic blast\r\n            this.owner = owner;\r\n            this.x = x;\r\n            this.y = y;\r\n            let magicBlastTimeOut = this.scene.time.delayedCall(1000, this.explodeTimer, [], this);\r\n            //this callback plays at the end of an animation sequence\r\n            this.on('animationcomplete', function(anim) {\r\n              //This nested event emit allows for specific animations to trigger specific actions\r\n              //Without it, the object would destroy itself at the end of any animation loop, \r\n              //AKA before it explodes\r\n              this.emit('animationcomplete_' + anim.key, anim);\r\n            },this);\r\n            this.on('animationcomplete_magicBlastExplode', function() {\r\n              this.destroy();\r\n            });\r\n            \r\n        }\r\n        //Callback for magicBlast timeout timer, \r\n        //this runs if the magicBlast hasn't been destroyed by some other means\r\n        //(Hits player) after a certain amount of time\r\n        explodeTimer(){\r\n          this.explode();\r\n        }\r\n\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'magicBlastSpin',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 1, end: 12 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n          scene.anims.create({\r\n            key: 'magicBlastExplode',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 13,end: 29 }),\r\n            frameRate: 20,\r\n           \r\n          });\r\n          \r\n        }\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n        \r\n        setMagicBlastVelocity(velocity){\r\n          \r\n          let vectorAngle = Phaser.Math.Angle.Between(0,0,velocity.x,velocity.y);\r\n          this.body.setVelocity(velocity.x*Math.abs(Math.cos(vectorAngle))*this.magicSpeed,velocity.y*Math.abs(Math.sin(vectorAngle))*this.magicSpeed);\r\n        }\r\n        explode(){\r\n          if (this.body){\r\n            this.body.enable = false;\r\n            this.anims.play('magicBlastExplode',\r\n            true);\r\n          }\r\n         \r\n        }\r\n        deflectFrom(player){\r\n          //This code takes an input object \r\n          //and sets a velocity that moves the magicblast directly away from it\r\n          let vectorAngle = Phaser.Math.Angle.Between(player.x,player.y,this.x,this.y);\r\n          this.body.setVelocity(Math.cos(vectorAngle)*this.magicSpeed,Math.sin(vectorAngle)*this.magicSpeed);\r\n        }\r\n    }","import Phaser from 'phaser';\r\nexport default class SwordSwing extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,{owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n            //Pair sprite to owner sprite(Either will be a player or opponent)\r\n            this.owner = owner;\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n           \r\n            \r\n            \r\n            this.setCircle(220);\r\n            \r\n            this.body.setOffset(this.owner.displayWidth/2,this.owner.displayHeight/2);\r\n            this.setScale(.4);\r\n          \r\n          \r\n            this.createAnimations(scene);\r\n            //When the swing completes, the sword is destroyed\r\n            this.on('animationcomplete', function() {\r\n              this.swinging = false;\r\n              this.destroy();\r\n            },this);\r\n           \r\n\r\n           \r\n            this.x = x;\r\n            this.y = y;\r\n            this.swinging = false;\r\n        }\r\n       \r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'swordSlash',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 1, end: 5 }),\r\n            frameRate: 30,\r\n            hideOnComplete: true\r\n          });\r\n          \r\n          \r\n        }\r\n        update(){\r\n          //This is called in the update l\r\n          if (this.swinging){\r\n            this.followOwner();\r\n          }\r\n        }\r\n        //Orients sword to player, so that the sword doesn't just swing up all the time\r\n        orientSword(playerOrientationVector){\r\n         \r\n          //Convert orientation vector to degrees, shift 90 degrees(The sword animation starts by facing up, it also inverts the orientation y vector as the yaxis is inverted)\r\n          let newOrientation = (Math.atan2(-playerOrientationVector.y,-playerOrientationVector.x)*180/Math.PI-90);\r\n         \r\n          this.angle = newOrientation; \r\n          \r\n        }\r\n        \r\n        swingSword(){\r\n\r\n          this.swinging = true;\r\n          this.orientSword(this.owner.getOrientationVector());\r\n          this.anims.play('swordSlash');\r\n        }\r\n        isSwinging(){\r\n          return this.swinging;\r\n        }\r\n\r\n        followOwner(){\r\n          this.x = this.owner.x;\r\n          this.y = this.owner.y;\r\n        }\r\n        inSwordSweep(gameObject){\r\n          //Checks to see if an object is within the sweep of the sword attack\r\n          //converts the angle between objects to rotate counter clockwise\r\n          //in order to match the rotation of the sword angle math in orient sword\r\n          //**A -270 degrees seems to be automatically converted to 90 inside of phaser.arcade.sprite.angle after it is set\r\n          let collisionAngle = Phaser.Math.Angle.Between(gameObject.x,gameObject.y,this.x,this.y)*180/Math.PI-90;\r\n         \r\n          //This is the collision width of the object\r\n          if (collisionAngle>this.angle-60&&collisionAngle<this.angle+60){\r\n            return true;\r\n          }\r\n          else{\r\n            return false;\r\n          }\r\n        }\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n    }","import Phaser from 'phaser';\r\nexport default class HealthBar extends Phaser.GameObjects.Sprite\r\n {\r\n    //This is from the Phaser3 healthbar example,\r\n    //https://phaser.io/examples/v3/view/game-objects/graphics/health-bars-demo\r\n    // with a few tweaks it seems to work great for this game\r\n    constructor (config)\r\n    {\r\n        super(config.scene,config.x,config.y);\r\n        config.scene.add.existing(this);\r\n        var scene = config.scene;\r\n        var x = config.x;\r\n        var y = config.y;\r\n        this.bar = new Phaser.GameObjects.Graphics(scene);\r\n        this.canTakeDamage = true;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.value = 100;\r\n        //What is this.p?\r\n        this.p = 76 / 100;\r\n\r\n        this.draw();\r\n\r\n        scene.add.existing(this.bar);\r\n    }\r\n\r\n    decrease (amount)\r\n    {\r\n        let concurrentDamageCheck = this.scene.time.delayedCall(200, this.setTakeDamage, [], this);\r\n        if (this.canTakeDamage){\r\n             this.value -= amount*10;\r\n             this.canTakeDamage = false;\r\n        }\r\n       \r\n        if (this.value < 0)\r\n        {\r\n            this.value = 0;\r\n        }\r\n\r\n        this.draw();\r\n\r\n        return (this.value === 0);\r\n    }\r\n\r\n    setTakeDamage()\r\n    {\r\n        this.canTakeDamage = true\r\n    }\r\n\r\n    draw ()\r\n    {\r\n        this.bar.clear();\r\n\r\n        //  BG\r\n        this.bar.fillStyle(0x000000);\r\n        this.bar.fillRect(this.x, this.y, 800, 16);\r\n\r\n        //  Health\r\n\r\n        this.bar.fillStyle(0xffffff);\r\n        this.bar.fillRect(this.x + 2, this.y + 2, 792, 12);\r\n\r\n        if (this.value < 30)\r\n        {\r\n            this.bar.fillStyle(0xff0000);\r\n        }\r\n        else\r\n        {\r\n            this.bar.fillStyle(0x00ff00);\r\n        }\r\n\r\n        var d = Math.floor(this.p * this.value);\r\n\r\n        this.bar.fillRect(this.x + 2, this.y + 2, d*10, 12);\r\n    }\r\n\r\n}","import Phaser from 'phaser';\r\nexport default class CoolDownBar extends Phaser.GameObjects.Sprite\r\n {\r\n    //This is from the Phaser3 healthbar example,\r\n    //https://phaser.io/examples/v3/view/game-objects/graphics/health-bars-demo\r\n    // with a few tweaks it seems to work great for this game\r\n    constructor (config,{duration})\r\n    {\r\n        super(config.scene,config.x,config.y);\r\n        config.scene.add.existing(this);\r\n        this.scene = config.scene;\r\n        this.duration = duration;\r\n        var x = config.x;\r\n        var y = config.y;\r\n        this.bar = new Phaser.GameObjects.Graphics(this.scene);\r\n        this.canTakeDamage = true;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.running = false;\r\n        this.value = 72;\r\n        \r\n        //What is this.p?\r\n        this.p = 100 / 100;\r\n\r\n        this.draw();\r\n\r\n        this.scene.add.existing(this.bar);\r\n    }\r\n\r\n    decrease (amount)\r\n    {\r\n        let concurrentDamageCheck = this.scene.time.delayedCall(40, this.setTakeDamage, [], this);\r\n        if (this.canTakeDamage){\r\n             this.value -= amount;\r\n             this.canTakeDamage = false;\r\n        }\r\n       \r\n        if (this.value < 0)\r\n        {\r\n            this.value = 0;\r\n        }\r\n\r\n        this.draw();\r\n\r\n        return (this.value === 0);\r\n    }\r\n\r\n    setTakeDamage()\r\n    {\r\n        this.canTakeDamage = true\r\n    }\r\n    start()\r\n    {\r\n        console.log(\"start was called\");\r\n        this.running = true;\r\n        this.p = 0;\r\n        this.timer = this.scene.time.delayedCall(this.duration, null, [], this);\r\n    }\r\n    update()\r\n    {\r\n        //if it's running\r\n        if (this.running){\r\n            var progress = this.timer.getProgress();   // ms\r\n            this.p = progress\r\n            //console.log(\"elapsed is:\" + elapsed);\r\n            this.draw();\r\n            if (this.p>=1){\r\n                this.p = 1;\r\n            }\r\n        }\r\n    }\r\n    draw ()\r\n    {\r\n        this.bar.clear();\r\n\r\n        //  BG\r\n        //this.bar.fillStyle(0x000000);\r\n        //this.bar.fillRect(this.x, this.y, 46, 72);\r\n\r\n        //  Health\r\n\r\n        //this.bar.fillStyle(0xffffff);\r\n        //this.bar.fillRect(this.x , this.y ,46, 72);\r\n\r\n       \r\n        this.bar.fillStyle(0x0000ff);\r\n        \r\n\r\n        var d = Math.floor(this.p * this.value);\r\n\r\n        this.bar.fillRect(this.x , this.y + 72, 46, -d);\r\n    }\r\n\r\n}","import Phaser from 'phaser';\r\nimport CoolDownBar from \"../sprites/CoolDownBar.js\"\r\nexport default class CoolDown extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,coolDownMS)\r\n        {\r\n            super(scene,x,y,texture);\r\n            \r\n            //Adds sprite to screen\r\n            this.scene = scene;\r\n            this.coolDownBar = new CoolDownBar({scene: this.scene, x: x-23, y: y-34},{duration: coolDownMS});\r\n            \r\n            //scene.add.existing(this.coolDownBar);\r\n            scene.add.existing(this);\r\n            \r\n            this.setScale(.5);\r\n            this.active = false;\r\n            //Duration of cooldown\r\n            this.coolDownMS = coolDownMS;\r\n            this.x = x;\r\n            this.y = y;\r\n           \r\n            \r\n            \r\n        }\r\n        startCoolDown(){\r\n            this.active = true;\r\n            this.coolDownBar.start();\r\n            //Change opacity\r\n            this.setAlpha(.5);\r\n            console.log('scene is: ' + this.scene);\r\n            if(this.scene){\r\n                let timedEvent = this.scene.time.delayedCall(this.coolDownMS, this.onEvent, [], this);\r\n            }\r\n            //let timedEvent = this.scene.time.delayedCall(this.coolDownMS, this.onEvent, [], this);\r\n        }\r\n        update(){\r\n            this.coolDownBar.update();\r\n        }\r\n        isActive()\r\n        {\r\n            return this.active;\r\n        }\r\n        onEvent(){\r\n            this.setAlpha(1);\r\n            this.active = false;\r\n        }\r\n    }","import Phaser from 'phaser';\r\nexport default class LightningBolt extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n        //This object is purely an animation, it has no hitbox as Axis aligned bounding boxes (AABB)\r\n        //The reason is that to implement a diagonal attack, one would need to create a diagonal bounding box\r\n        //This is impossible with AABB, so another solution was used with\r\n        //a series of lightningBolt Hitbox objects \r\n        constructor (scene,x,y,texture,{owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n           \r\n            scene.add.existing(this);\r\n            \r\n            //create and play lightning strike animations\r\n            this.createAnimations(scene);\r\n            this.anims.play('lightningStrike',true);\r\n            \r\n            //set angle of object to match that of the player\r\n            let vectorAngle = Phaser.Math.Angle.Between(0,0,owner.getOrientationVector().x,owner.getOrientationVector().y);\r\n           \r\n            //Angle is in degrees in phaser,\r\n            //as well, the object needs to be rotated 90 extra degrees to actually line up with the player\r\n            this.angle = vectorAngle*180/Math.PI+90;\r\n            this.owner = owner;\r\n            \r\n            //This code sets the animation position at a distance just outside the width/height\r\n            //of the player so it doesn't look like it spawned right on top of them \r\n            this.x = x + (owner.getOrientationVector().x*owner.width/2) + (owner.getOrientationVector().x*this.height/2*Math.abs(Math.cos(vectorAngle)));\r\n            this.y = y + (owner.getOrientationVector().y*owner.height/2) + (owner.getOrientationVector().y*this.height/2*Math.abs(Math.sin(vectorAngle)));\r\n           \r\n           //This timer is for if the lightning bolt doesn't collide with a player and times out.\r\n           //it then destroys the animation object\r\n            let timedEvent = this.scene.time.delayedCall(3000, this.endLightningBolt, [], this);\r\n            \r\n            this.on('animationcomplete', function(anim) {\r\n              this.emit('animationcomplete_' + anim.key, anim);\r\n            },this);\r\n            //This animation runs once the lightning has reached it's peak 'size'\r\n            //and spreads across the screen, it basically \r\n            //just sits there until a collision or timeout\r\n            this.on('animationcomplete_lightningStrike', function() {\r\n              this.anims.play('lightningSizzle');\r\n            });\r\n            \r\n        }\r\n        endLightningBolt(){\r\n          this.destroy();\r\n        }\r\n        //Creates lightning animations\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'lightningStrike',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 1, end: 17 }),\r\n            frameRate: 30,\r\n          });\r\n          scene.anims.create({\r\n            key: 'lightningSizzle',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 15, end: 17 }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n          });\r\n        }\r\n        //Used for checking collisions, etc\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n       \r\n        \r\n       \r\n    }","import Phaser from 'phaser';\r\nexport default class lightningHB extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,{owner, animationSprite, Olength}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            //Adds sprite to screen\r\n            scene.add.existing(this);\r\n\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            this.setCircle(16);\r\n            //The sprite is an invisible hitbox\r\n            this.setVisible(false);\r\n\r\n            this.texture = texture;\r\n\r\n            //Track which animation sprite this lightning hitbox belongs to. This is needed for collisions.\r\n            this.animationSprite = animationSprite;\r\n\r\n            this.owner = owner;\r\n            \r\n            //Center \r\n            this.x = x+owner.width-8;\r\n            this.y = y+owner.height-8;\r\n            this.oscillationLength = Olength;\r\n            this.startingOlength = Olength;\r\n            this.orientationx = owner.getOrientationVector().x;\r\n            this.orientationy = owner.getOrientationVector().y;\r\n            \r\n            //Creates a recursive, growing oscillation distance that accelerates with the lightning \r\n            //bolt. \r\n            //This allows for an illision of a diagonal, rotating hitbox that arcade physics cannot create,\r\n            //I'd rather not have to use matter just for diagonal hitboxes,\r\n            //or resort to custom hitboxes and collision detection in the update loop\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                x: this.x + this.oscillationLength*this.orientationx,\r\n                y: this.y + this.oscillationLength*this.orientationy,\r\n                duration: 100,\r\n                yoyo: true,\r\n                onComplete: onCompleteHandler,\r\n                onCompleteParams: [this.scene]\r\n            });\r\n           //Recursive callback function that allows for a growing oscillation length to our circular hitbox, simulating a non AABB hitbox effectively\r\n           function onCompleteHandler(tween, targets, scene){\r\n                let self = targets[0];\r\n                if(self){\r\n                        //Each iteration, this multiplies the distance,\r\n                        //an exponential growth occurs\r\n                        self.oscillationLength *= 3;\r\n                    //This runs while the hitboxes don't move at max length\r\n                    if (self.oscillationLength <= 1000*self.startingOlength/100){\r\n                            self.scene.tweens.add({\r\n                            targets: self,\r\n                            x: self.x + self.oscillationLength*self.orientationx,\r\n                            y: self.y + self.oscillationLength*self.orientationy,\r\n                            duration: 100,\r\n                            yoyo: true,\r\n                            onComplete: onCompleteHandler,\r\n                        \r\n                        });\r\n                    }\r\n                    //This runs once the hitboxes have reached the maximum range of movement\r\n                    else {\r\n                        if (self){\r\n                            self.scene.tweens.add({\r\n                            targets: self,\r\n                            //1000 is maximum blast length, then a ratio of that length is calculated in x and y distances\r\n                            x: self.x + 1000*self.orientationx*self.startingOlength/100,\r\n                            y: self.y + 1000*self.orientationy*self.startingOlength/100,\r\n                            duration: 100,\r\n                            onComplete: countRuns,\r\n                            repeat: 10,\r\n                            yoyo: true,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n               \r\n            };\r\n            //This function destroys the object\r\n            function countRuns(tween, targets, scene){\r\n                let self = targets[0];\r\n                self.destroy();\r\n            }\r\n            \r\n        }\r\n        //Reference to animation sprite to destroy for collisions\r\n        destroyAnimationSprite(){\r\n            this.animationSprite.destroy();\r\n        }\r\n        getOwner(){\r\n          return this.owner;\r\n        }\r\n        \r\n        \r\n      \r\n    }","import Phaser from 'phaser';\r\n\r\nexport default class Shield extends Phaser.Physics.Arcade.Sprite\r\n    {\r\n\r\n        constructor (scene,x,y,texture,{duration,owner}={})\r\n        {\r\n            super(scene,x,y,texture);\r\n            \r\n            //Adds sprite to screen\r\n            this.scene = scene;\r\n            this.owner = owner;\r\n            //scene.add.existing(this.coolDownBar);\r\n            scene.add.existing(this);\r\n            //Adds physics to sprite\r\n            scene.physics.add.existing(this);\r\n            this.setBounce(.1);\r\n            this.duration = duration;\r\n            //this.texture = texture;\r\n            this.x = x;\r\n            this.y = y;\r\n            let shieldTimeOut = this.scene.time.delayedCall(this.duration, this.shieldTimer, [], this);\r\n            this.createAnimations(scene);\r\n            this.anims.play('shieldExist',true);\r\n            this.setCollideWorldBounds(true);\r\n            //Set shield orientation to owner orientation\r\n            let ownerOrientation = owner.getOrientationVector();\r\n\r\n            //right\r\n            if (ownerOrientation.x>0){\r\n                this.setFrame(2)\r\n                this.x += 40;\r\n                this.body.setSize(30, 100, {x: this.x + 40, y: this.y});\r\n                this.body.setOffset(60,0);\r\n               \r\n            }\r\n            //left\r\n            if (ownerOrientation.x<0){\r\n                this.setFrame(3)\r\n                this.x -= 40;\r\n                this.body.setSize(30, 100, {x: this.x - 40, y: this.y});\r\n                this.body.setOffset(15,0);\r\n            }\r\n            //bottom\r\n            if (ownerOrientation.y>0){\r\n                this.setFrame(2)\r\n                this.angle += 90;\r\n                this.y += 40;\r\n                this.body.setSize(100, 30, {x: this.x, y: this.y + 40});\r\n                this.body.setOffset(0,60);\r\n            }\r\n            //top\r\n            if (ownerOrientation.y<0){\r\n                this.setFrame(2)\r\n                this.angle -= 90;\r\n                this.y -= 40;\r\n                this.body.setSize(100, 30, {x: this.x, y: this.y - 40});\r\n                this.body.setOffset(0,15);\r\n            }\r\n\r\n        }\r\n        getOwner(){\r\n            return this.owner;\r\n        }\r\n        createAnimations(scene){\r\n          scene.anims.create({\r\n            key: 'shieldExist',\r\n            frames: scene.anims.generateFrameNumbers(this.texture.key, { start: 0, end: 3 }),\r\n            frameRate: 0,\r\n            repeat: -1\r\n          });\r\n          \r\n        }\r\n       shieldTimer(){\r\n           this.destroy();\r\n       }\r\n    }","import { Scene } from 'phaser';\r\nimport Player from \"../sprites/Player.js\";\r\nimport Controls from \"../controls/Controls.js\";\r\nimport MagicBlast from \"../sprites/MagicBlast.js\";\r\nimport SwordSwing from \"../sprites/SwordSwing.js\";\r\nimport Phaser from 'phaser';\r\nimport bckg from '../assets/bckg.png';\r\nimport HealthBar from \"../sprites/HealthBar.js\";\r\nimport CoolDown from \"../sprites/CoolDown.js\";\r\nimport LightningBolt from '../sprites/lightningBolt.js';\r\nimport LightningHB from '../sprites/lightningBoltHitbox.js';\r\nimport Shield from '../sprites/Shield.js';\r\n\r\n\r\n//import proxy from 'socket.io-proxy';\r\nlet LocalGameScene = {\r\n    \r\n    \r\n    preload: function()\r\n        {\r\n            //I load the images from my publicly hosted imgur\r\n            //because the file system seems to break for some reason when this is run in IonPhaser\r\n            //(Which is inside a React application)\r\n            //I make these drawings/spritesheets in piskel\r\n            this.load.image('bckg', 'https://i.imgur.com/DMVC2IQ.png');\r\n            this.load.image('wall', 'https://i.imgur.com/av8q7Or.png');\r\n            this.load.image('vwall', 'https://i.imgur.com/UB2GdEL.png');\r\n            this.load.spritesheet('swordSwing', 'https://i.imgur.com/ULyXfap.png', {frameWidth: 500, frameHeight: 500});\r\n            this.load.image('swordCool', 'https://i.imgur.com/SnLjQdR.png');\r\n            this.load.image('blastCool', 'https://i.imgur.com/d4Enueh.png');\r\n            this.load.spritesheet('magicBlast', 'https://i.imgur.com/dEhNPqO.png', {frameWidth: 150, frameHeight: 150});\r\n            this.load.spritesheet('explosion','https://i.imgur.com/UHZiUKC.png', {frameWidth: 192, frameHeight: 192});\r\n            this.load.spritesheet('player', 'https://i.imgur.com/WlEeiKT.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('otherPlayer','https://i.imgur.com/NYAJusD.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('Background','https://i.imgur.com/T6q69wx.png', {frameWidth: 800, frameHeight: 600});\r\n            this.load.image('dodgeCool', 'https://i.imgur.com/mTklmkU.png');\r\n            this.load.spritesheet('lightningBolt', 'https://i.imgur.com/3MskIUy.png', {frameWidth: 16, frameHeight: 1000});\r\n            this.load.image('lightningCool', 'https://i.imgur.com/FVquIxw.png');\r\n            this.load.spritesheet('shield', 'https://i.imgur.com/xiVxzaW.png', {frameWidth: 100, frameHeight: 100});\r\n            this.load.image('shieldCool', 'https://i.imgur.com/2u16NSJ.png');\r\n        },\r\n\r\n    create: function()\r\n        {   \r\n           \r\n           \r\n           /*I define some of the functions ex:this.deflectBlast\r\n           this way instead of outside of the preload/create/update\r\n           because that is the way they don't throw an error while using IonPhaser,\r\n           Perhaps they can be moved to another file and imported in*/\r\n\r\n          //Deflect Magic Blast with sword\r\n            this.deflectBlast = function(magicBlast,swordHitbox){\r\n                if(swordHitbox.inSwordSweep(magicBlast)){\r\n                    magicBlast.deflectFrom(swordHitbox.getOwner());\r\n                }\r\n            };\r\n           //Create explosion animation\r\n            this.explosionAnim = this.anims.create({\r\n                key: 'explode',\r\n                frames: this.anims.generateFrameNumbers('explosion',{ start: 1, end: 23}),\r\n                frameRate: 10,\r\n                repeat: -1\r\n            });\r\n            //Callback function for player/magicBlast Collision\r\n            this.playerHit = function(magicBlast,player){\r\n               //Check that the magicBlast is hitting the right player\r\n                if (magicBlast.getOwner()!==player){\r\n                    magicBlast.explode();\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        player.playStun();\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function \r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(magicBlast);\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            this.playerHitSwordSwing = function(swordSwing, player){\r\n           \r\n                if(swordSwing.getOwner()!==player){\r\n\r\n                    //Problem, this code isn't working. It's because the stun check isn't working at the correct time \r\n                    //and the player set function isn't set before the player takes like double or triple damage\r\n                    //Since the hitbox isn't destroy on impact it does a lot of other stuff\r\n                    //Potential Fixes: \r\n                    //Destroy sword hitbox\r\n                    //Don't let the player take damage within like, a certain amount of time. \r\n                    //Somehow wait for the decrease to happen and then rechecking the stun, async functions?\r\n                    //\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        \r\n                        \r\n                        player.playStun();\r\n\r\n\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function \r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(swordSwing);\r\n                    }\r\n                }\r\n            }\r\n            this.shieldHitLightningBolt = function(shield, lightningBolt){\r\n                 console.log(\"shield hit lightning Bolt\");\r\n                if(shield.getOwner() !== lightningBolt.getOwner()){\r\n                    console.log(\"Opponent shield collision\");\r\n                        //Destroy the animation associated with these hitboxes\r\n                        lightningBolt.destroyAnimationSprite();\r\n\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        lightningBolt.scene.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== shield.getOwner()) {\r\n                                lightningBolt.body.enable = false;\r\n                            }\r\n                    });\r\n                }\r\n            }\r\n            this.shieldHitMagicBlast = function(shield, magicBlast){\r\n                console.log(\"shield hit magic Blast\");\r\n                if (shield.getOwner() !== magicBlast.getOwner()){\r\n                     console.log(\"Opponenet shield collision\");\r\n                    magicBlast.explode();\r\n                }\r\n            }\r\n            //Collision between lightning and player\r\n            this.playerHitLightning = function(lightningBolt,player){\r\n                //Players cannot hit themselves with their own attacks\r\n                if(lightningBolt.getOwner()!==player){\r\n                   \r\n                    if (player.getStun() === false && player.getDodging() === false){\r\n                        \r\n                        //Stun is started for player\r\n                        player.playStun();\r\n\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //Player dies\r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Send players back to main menu\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        }\r\n                        \r\n                        player.knockBack(lightningBolt);\r\n                      \r\n                        //Destroy the animation associated with these hitboxes\r\n                        lightningBolt.destroyAnimationSprite();\r\n\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        lightningBolt.scene.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== player) {\r\n                                lightningBolt.body.enable = false;\r\n                            }\r\n                    });\r\n                }\r\n            }\r\n            }\r\n            //Callback for sending user back to main page when game ends\r\n            this.redirect = function(){\r\n                  window.location.replace('https://mildmayhem.herokuapp.com/');\r\n            }\r\n            //Glowing Background Sprite\r\n            this.background = this.add.sprite(400,300,'Background');\r\n            this.anims.create({\r\n                key: 'glow',\r\n                frames: this.anims.generateFrameNumbers('Background', { start: 1, end: 12 }),\r\n                frameRate: 4,\r\n                repeat: -1,\r\n                yoyo: true\r\n            });\r\n            this.background.anims.play('glow');\r\n            \r\n            //Refactoring idea: make every variable passed into constructors \r\n            //descriptive javascript properties for readability\r\n\r\n            //Create Both Players\r\n            this.player1 = new Player(this, 400, 500,'player', this.explosionAnim);\r\n            this.player2 = new Player(this, 400, 100, 'otherPlayer', this.explosionAnim);\r\n            \r\n            //Create Win Text\r\n            this.youWin = this.add.text(150,300-60,'PLAYER2 WINS ',{fontSize: '70px', color: '#66FF00'});\r\n            this.youWin.setVisible(false);\r\n\r\n            //Create Health Bars\r\n            this.healthBarP1 = new HealthBar({scene: this, x: 0, y:584});\r\n            this.healthBarP2 = new HealthBar({scene: this, x: 0, y:0});\r\n\r\n            //Create Cooldowns: Note, final variable passed in is a timer, it sets how long the cooldown lasts in milliseconds            \r\n            this.swordCoolDownP1 = new CoolDown(this, 230, 560, 'swordCool', 700);\r\n            this.swordCoolDownP2 = new CoolDown(this, 570, 40, 'swordCool', 700);\r\n           \r\n            this.magicCoolDownP1 = new CoolDown(this, 278, 560, 'blastCool', 1000);\r\n            this.magicCoolDownP2 = new CoolDown(this, 618, 40, 'blastCool', 1000);\r\n            \r\n            this.dodgeCoolDownP1 = new CoolDown(this, 326, 560, 'dodgeCool', 1000);\r\n            this.dodgeCoolDownP2 = new CoolDown(this, 665, 40, 'dodgeCool', 1000);\r\n\r\n            this.lightningCoolDownP1 = new CoolDown(this, 374, 560, 'lightningCool', 5000);\r\n            this.lightningCoolDownP2 = new CoolDown(this, 713, 40, 'lightningCool', 5000);\r\n\r\n            this.shieldCoolDownP1 = new CoolDown(this, 422, 560, 'shieldCool', 7000);\r\n            this.shieldCoolDownP2 = new CoolDown(this, 760, 40, 'shieldCool', 7000);\r\n\r\n            //Checks for the amount of gamepads connected to the phaser game, if the passed controls do not match the quantity of connected gamepads,\r\n            //the controls will be reset, this can be fixed later\r\n            let pad: Phaser.Input.Gamepad.Gamepad;\r\n            let gamePadCount = ((this.controlConfig.player1.Movement==='GamePad')? 1:0);\r\n            gamePadCount += ((this.controlConfig.player2.Movement=='GamePad')? 1:0);\r\n\r\n            //Create controls object which can be accessed in the update logic for game object interactions\r\n            this.controlsP1 = new Controls(this,{directionals: this.controlConfig.player1.Movement, magicBlast: this.controlConfig.player1.MagicBlast, swordSwing: this.controlConfig.player1.SwordSlash, shield: \"L1\"},gamePadCount,1);\r\n            this.controlsP2 = new Controls(this,{directionals: this.controlConfig.player2.Movement, magicBlast: this.controlConfig.player2.MagicBlast, swordSwing: this.controlConfig.player2.SwordSlash, shield: \"L1\"},gamePadCount,2);\r\n            \r\n            //These phaser groups allow for collisino detection of classes of objects at scale, for example all magic blasts have the same collision callack that is called\r\n            this.magicBlasts = this.physics.add.group();\r\n            this.swordHitBoxes = this.physics.add.group();\r\n            this.lightningBolts = this.physics.add.group();\r\n            this.shields = this.physics.add.group();\r\n\r\n            //Create a sprite group in order to handle collisions\r\n            this.players = this.physics.add.group();\r\n            this.players.add(this.player1);\r\n            this.players.add(this.player2);\r\n\r\n            //Attach healthbars to the selected players, this is so the game knows whose healthbar is whose\r\n            this.player1.setHealthBar(this.healthBarP1);\r\n            this.player2.setHealthBar(this.healthBarP2);\r\n\r\n            //phaser has a prebuilt bounce physics setup, any value greater than 1 causes an exponential growth in object velocity as it multiplies each bounce\r\n            this.player1.setBounce(1);\r\n            this.player2.setBounce(1);\r\n\r\n            //Collision handling for object groups (group1, group2, callback)\r\n            this.physics.add.overlap(this.magicBlasts,this.swordHitBoxes,this.deflectBlast);\r\n            this.physics.add.overlap(this.magicBlasts,this.players,this.playerHit);\r\n            this.physics.add.overlap(this.lightningBolts,this.players,this.playerHitLightning);\r\n            this.physics.add.overlap(this.swordHitBoxes,this.players,this.playerHitSwordSwing);\r\n            this.physics.add.overlap(this.shields,this.magicBlasts, this.shieldHitMagicBlast);\r\n            this.physics.add.overlap(this.shields,this.lightningBolts, this.shieldHitLightningBolt);\r\n            //this.physics.add.collider(this.shields,this.players);\r\n           \r\n            \r\n\r\n            //4 walls on the outside\r\n            this.leftWall = this.physics.add.sprite(-55,300,'vwall');\r\n            //Set immovable allows the objects to not move on collision\r\n            this.leftWall.body.immovable = true;\r\n            this.rightWall = this.physics.add.sprite(855,300,'vwall');\r\n            this.rightWall.body.immovable = true;\r\n            this.topWall = this.physics.add.sprite(400,-55,'wall');\r\n            this.topWall.body.immovable = true;\r\n            this.bottomWall = this.physics.add.sprite(400,655,'wall');\r\n            this.bottomWall.body.immovable = true;\r\n            \r\n            //staticGroup is a different type of group that doesn't move I believe\r\n            this.walls = this.physics.add.staticGroup();\r\n            this.walls.add(this.leftWall);\r\n            this.walls.add(this.rightWall);\r\n            this.walls.add(this.topWall);\r\n            this.walls.add(this.bottomWall);\r\n            \r\n            //midline barrier wall\r\n            this.midWall = this.physics.add.sprite(400,300,'wall');\r\n            this.midWall.setScale(1,.08);\r\n            this.midWall.setVisible(false);\r\n            this.midWall.body.immovable = true;\r\n\r\n            this.physics.add.collider(this.midWall,this.players);\r\n            \r\n            //The order of the objects in the collider matters, magicBlasts \r\n            //will only bounce off the walls if this.magicBlasts is the first argument\r\n            this.physics.add.collider(this.magicBlasts,this.walls);\r\n            this.physics.add.collider(this.walls,this.players);\r\n            \r\n            \r\n            this.createMagicBlast = function(player){\r\n                    //Create magic Blast\r\n                    var magicBlast = new MagicBlast(this,player.getX(),\r\n                    player.getY(),'magicBlast',{owner: player});\r\n                    //Add to collision group\r\n                    this.magicBlasts.add(magicBlast);\r\n                    //Fire in direction of player orientation\r\n                    magicBlast.setMagicBlastVelocity(player.getOrientationVector());\r\n                    //Set magicBlast bounce\r\n                    magicBlast.setCollideWorldBounds(true);\r\n                    magicBlast.setBounce(1);\r\n                    \r\n            };\r\n            this.checkForSwingThenSwing = function(attackInput, player, coolDown){\r\n                //Check if swordSwing exists, and then check if it belongs to the player\r\n                this.swordHitBoxes.getChildren().forEach(swordSwing => {\r\n                    if (swordSwing.getOwner() === player) {\r\n                        let swordToCheck = swordSwing;\r\n                    }\r\n                });\r\n                //Check if sword swing can be activated\r\n                //if the attack button is pressed,\r\n                //and there is no sword currently active on the player,\r\n                //and the cooldown is no active, then the sword can be swung\r\n                 if ((attackInput.swordSwingFiring && typeof swordToCheck == 'undefined' && !coolDown.isActive())){\r\n                    //Set sword swing spawn point\r\n                    let swordSpawnX = player.getX();\r\n                    let swordSpawnY = player.getY();\r\n                   \r\n                    //Create new sword swing\r\n                    let newSwordSwing = new SwordSwing(this,swordSpawnX,swordSpawnY,'swordSwing',{owner: player});\r\n                    newSwordSwing.swingSword();\r\n                    coolDown.startCoolDown();\r\n                    this.swordHitBoxes.add(newSwordSwing);\r\n                   \r\n                 }\r\n            };\r\n        },\r\n\r\n    update: function()\r\n        {\r\n        //Checks if player 1 or player2 have lost, can events be used for this instead?\r\n        if (!this.player1.isAlive()){\r\n            this.youWin.setVisible(true);\r\n            this.youWin.setText('PLAYER2 WINS');\r\n        }\r\n        else if(!this.player2.isAlive()){\r\n            this.youWin.setVisible(true);\r\n            this.youWin.setText('PLAYER1 WINS');\r\n        }\r\n\r\n        //CoolDownAnims\r\n        this.swordCoolDownP1.update();\r\n        this.swordCoolDownP2.update();\r\n        this.magicCoolDownP1.update();\r\n        this.magicCoolDownP2.update();\r\n        this.dodgeCoolDownP1.update();\r\n        this.dodgeCoolDownP2.update();\r\n        this.lightningCoolDownP1.update();\r\n        this.lightningCoolDownP2.update();\r\n        this.shieldCoolDownP1.update();\r\n        this.shieldCoolDownP2.update();\r\n        //Get Player input\r\n        this.movementVectorP1 = this.controlsP1.getMovementVector();\r\n        this.movementVectorP2 = this.controlsP2.getMovementVector();\r\n\r\n        //Set the orientation of the player\r\n        this.player1.setOrientationVector(this.movementVectorP1);\r\n        this.player2.setOrientationVector(this.movementVectorP2);\r\n\r\n        //Check to make sure the player is not stunned, alive, and is not dodging\r\n        if(!this.player1.getStun() && this.player1.isAlive() && !this.player1.getDodging()){\r\n            this.player1.setPlayerVelocity(this.movementVectorP1);\r\n        }\r\n\r\n        if(!this.player2.getStun() && this.player2.isAlive() && !this.player2.getDodging()){\r\n            this.player2.setPlayerVelocity(this.movementVectorP2);\r\n        }\r\n\r\n        //Get attack inputs every update cycle\r\n        let attackInputsP1 = this.controlsP1.getMoveInput();\r\n        let attackInputsP2 = this.controlsP2.getMoveInput();\r\n\r\n        //Check for user firing magic blast and that the cooldown is not active\r\n        if (attackInputsP1.magicBlastFiring && !this.magicCoolDownP1.isActive()){\r\n           this.magicCoolDownP1.startCoolDown();\r\n           this.createMagicBlast(this.player1);\r\n        };\r\n        \r\n        if(attackInputsP1.shieldFiring && !this.shieldCoolDownP1.isActive()){\r\n            let shield = new Shield(this,this.player1.getX(),this.player1.getY(),'shield', {duration: 5000, owner: this.player1});\r\n            this.shieldCoolDownP1.startCoolDown();\r\n            this.shields.add(shield);\r\n        }\r\n        if(attackInputsP2.shieldFiring && !this.shieldCoolDownP2.isActive()){\r\n            let shield = new Shield(this,this.player2.getX(),this.player2.getY(),'shield', {duration: 5000, owner: this.player2});\r\n            this.shieldCoolDownP2.startCoolDown();\r\n            this.shields.add(shield);\r\n        }\r\n         if (attackInputsP2.magicBlastFiring && !this.magicCoolDownP2.isActive()){\r\n           this.magicCoolDownP2.startCoolDown();\r\n           this.createMagicBlast(this.player2);\r\n        };\r\n\r\n        //Check for user firing Lightning Bolt\r\n        if (attackInputsP1.lightningBoltFiring && !this.lightningCoolDownP1.isActive()){\r\n           this.lightningCoolDownP1.startCoolDown();\r\n           \r\n           //create lightning Bolt animation object\r\n           let lightningBolt = new LightningBolt(this,this.player1.getX(),this.player1.getY(),'lightningBolt',{owner: this.player1});\r\n           //Creates 4 lightning bolt hitboxes which are the WIDTH of the lightning bolt, they travel \r\n           //at a speed so fast that it mimics a diagonal hitbox. This normally\r\n           //can't be created using Arcade physics and its Axis aligned bounding boxes;\r\n           let lightningBoltHB1 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 100});\r\n           let lightningBoltHB2 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 50});\r\n           let lightningBoltHB3 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 25});\r\n           let lightningBoltHB4 = new LightningHB(this,this.player1.getX(),this.player1.getY(),'magicBlast',{owner: this.player1, animationSprite: lightningBolt, Olength: 75});\r\n           //Add to collision group\r\n           this.lightningBolts.add(lightningBoltHB1);\r\n           this.lightningBolts.add(lightningBoltHB2);\r\n           this.lightningBolts.add(lightningBoltHB3);\r\n           this.lightningBolts.add(lightningBoltHB4);\r\n        };\r\n        if (attackInputsP2.lightningBoltFiring && !this.lightningCoolDownP2.isActive()){\r\n           this.lightningCoolDownP2.startCoolDown();\r\n           let lightningBolt = new LightningBolt(this,this.player2.getX(),this.player2.getY(),'lightningBolt',{owner: this.player2});\r\n           let lightningBoltHB1 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 100});\r\n           let lightningBoltHB2 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 50});\r\n           let lightningBoltHB3 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 25});\r\n           let lightningBoltHB4 = new LightningHB(this,this.player2.getX(),this.player2.getY(),'magicBlast',{owner: this.player2, animationSprite: lightningBolt, Olength: 75});\r\n           this.lightningBolts.add(lightningBoltHB1);\r\n           this.lightningBolts.add(lightningBoltHB2);\r\n           this.lightningBolts.add(lightningBoltHB3);\r\n           this.lightningBolts.add(lightningBoltHB4);\r\n        };\r\n\r\n       \r\n        //Check for user dodging and check that they aren't already in dodge mode\r\n        if (attackInputsP1.dodgeFiring && !this.player1.getDodging() && !this.dodgeCoolDownP1.isActive()){\r\n            this.dodgeCoolDownP1.startCoolDown();\r\n            this.player1.dodge();\r\n        };\r\n        if (attackInputsP2.dodgeFiring && !this.player2.getDodging() && !this.dodgeCoolDownP2.isActive()){\r\n            this.dodgeCoolDownP2.startCoolDown();\r\n            this.player2.dodge();\r\n        };\r\n\r\n        //Check if sword swings exist, and update them as needed, \r\n        //this is the best way I can think of for tracking and following player position in the main loop\r\n        //Perhaps there's a better way? Without it \r\n        //the sword is stuck in place, perhaps it can be attached to a reference to player position?\r\n        //I took a look at an update pattern for a situation like this\r\n        let swordSwings = this.swordHitBoxes.getChildren();\r\n        if (swordSwings.length>0){\r\n            swordSwings.forEach(swordSwing => {\r\n                swordSwing.update();\r\n            }\r\n            );\r\n            \r\n        }\r\n        \r\n        //Check for user swinging sword and then swing, starting the cooldown\r\n        //I think functions are supposed to do only one thing, I'll fix this later\r\n        this.checkForSwingThenSwing(attackInputsP1, this.player1, this.swordCoolDownP1);\r\n        this.checkForSwingThenSwing(attackInputsP2, this.player2, this.swordCoolDownP2);\r\n        }\r\n    \r\n    \r\n\r\n\r\n}\r\n\r\nexport default LocalGameScene;","import { Scene } from 'phaser';\r\nimport Player from \"../sprites/Player.js\";\r\nimport Controls from \"../controls/Controls.js\";\r\nimport MagicBlast from \"../sprites/MagicBlast.js\";\r\nimport SwordSwing from \"../sprites/SwordSwing.js\";\r\nimport Phaser from 'phaser';\r\nimport bckg from '../assets/bckg.png';\r\nimport HealthBar from \"../sprites/HealthBar.js\";\r\nimport CoolDown from \"../sprites/CoolDown.js\";\r\nimport LightningBolt from '../sprites/lightningBolt.js';\r\nimport LightningHB from '../sprites/lightningBoltHitbox.js';\r\nimport io from 'socket.io-client';\r\nimport Shield from '../sprites/Shield.js';\r\n//import proxy from 'socket.io-proxy';\r\nlet LocalGameScene = {\r\n    \r\n    \r\n    preload: function()\r\n        {\r\n            //I load the images from my publicly hosted imgur\r\n            //because the file system seems to break for some reason when this is run in IonPhaser\r\n            //(Which is inside a React application)\r\n            //I make these drawings/spritesheets in piskel\r\n            this.load.image('bckg', 'https://i.imgur.com/DMVC2IQ.png');\r\n            this.load.image('wall', 'https://i.imgur.com/av8q7Or.png');\r\n            this.load.image('vwall', 'https://i.imgur.com/UB2GdEL.png');\r\n            this.load.spritesheet('swordSwing', 'https://i.imgur.com/ULyXfap.png', {frameWidth: 500, frameHeight: 500});\r\n            this.load.image('swordCool', 'https://i.imgur.com/SnLjQdR.png');\r\n            this.load.image('blastCool', 'https://i.imgur.com/d4Enueh.png');\r\n            this.load.spritesheet('magicBlast', 'https://i.imgur.com/dEhNPqO.png', {frameWidth: 150, frameHeight: 150});\r\n            this.load.spritesheet('explosion','https://i.imgur.com/UHZiUKC.png', {frameWidth: 192, frameHeight: 192});\r\n            this.load.spritesheet('player', 'https://i.imgur.com/WlEeiKT.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('otherPlayer','https://i.imgur.com/NYAJusD.png', { frameWidth: 68, frameHeight: 68 });\r\n            this.load.spritesheet('Background','https://i.imgur.com/T6q69wx.png', {frameWidth: 800, frameHeight: 600});\r\n            this.load.image('dodgeCool', 'https://i.imgur.com/mTklmkU.png');\r\n            this.load.spritesheet('lightningBolt', 'https://i.imgur.com/3MskIUy.png', {frameWidth: 16, frameHeight: 1000});\r\n            this.load.image('lightningCool', 'https://i.imgur.com/FVquIxw.png');\r\n            this.load.spritesheet('shield', 'https://i.imgur.com/xiVxzaW.png', {frameWidth: 100, frameHeight: 100});\r\n            this.load.image('shieldCool', 'https://i.imgur.com/2u16NSJ.png');\r\n        },\r\n\r\n    create: function()\r\n        {   \r\n             let self = this;\r\n           /*I define some of the functions ex:this.deflectBlast\r\n           this way instead of outside of the preload/create/update\r\n           because that is the way they don't throw an error while using IonPhaser,\r\n           Perhaps they can be moved to another file and imported in*/\r\n\r\n          //Deflect Magic Blast with sword\r\n            this.deflectBlast = function(magicBlast,swordHitbox){\r\n                if(swordHitbox.inSwordSweep(magicBlast)){\r\n                    magicBlast.deflectFrom(swordHitbox.getOwner());\r\n                }\r\n            };\r\n           //Create explosion animation\r\n            this.explosionAnim = this.anims.create({\r\n                key: 'explode',\r\n                frames: this.anims.generateFrameNumbers('explosion',{ start: 1, end: 23}),\r\n                frameRate: 10,\r\n                repeat: -1\r\n            });\r\n            //This needs to be added because the player2 animation breaks when called for some reason, unsure why?\r\n            //It must have to do with something where 'explode' is played\r\n            this.explosionAnim = this.anims.create({\r\n                key: 'explode2',\r\n                frames: this.anims.generateFrameNumbers('explosion',{ start: 1, end: 23}),\r\n                frameRate: 10,\r\n                repeat: -1\r\n            });\r\n            //Callback function for player/magicBlast Collision\r\n            this.playerHit = function(magicBlast,player){\r\n               //Check that the magicBlast is hitting the right player\r\n                if (magicBlast.getOwner()!==player){\r\n                    //In online mode, only the opposing player(who does not active hitbox in your game) will get hit, when they do, this is called\r\n                    //Depending on how we implement magic blasts, this may require an index to be sent through for selecting and destroy the object\r\n                    console.log('this.roomName is: ' + self.roomName);\r\n                    self.socket.emit('destroyMagicBlast', self.roomName);\r\n                   \r\n                    magicBlast.explode();\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        self.socket.emit('damagePlayer', self.roomName);\r\n                        player.playStun();\r\n                        //Reduce player health\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function has the player blow up\r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(magicBlast);\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            this.playerHitSwordSwing = function(swordSwing, player){\r\n        \r\n                if(swordSwing.getOwner()!==player){\r\n\r\n                    //Problem, this code isn't working. It's because the stun check isn't working at the correct time \r\n                    //and the player set function isn't set before the player takes like double or triple damage\r\n                    //Since the hitbox isn't destroy on impact it does a lot of other stuff\r\n                    //Potential Fixes: \r\n                    //Destroy sword hitbox\r\n                    //Don't let the player take damage within a certain amount of time. \r\n                    //Somehow wait for the decrease to happen and then rechecking the stun, async functions?\r\n                    //Check if player is stunned or dodging, if neither is true, play stun animation and calculate damage\r\n                    if (player.getStun() === false || player.getDodging() === false){\r\n                        \r\n                        self.socket.emit('damagePlayer', self.roomName);\r\n                        \r\n                        player.playStun();\r\n\r\n\r\n                        //When the healthbar reaches 0, this evaluates to true\r\n                        if(player.getHealthBar().decrease(4)){\r\n                            //This function \r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Win Screen and link people back to main menu   \r\n                            //How could we access the react router DOM here?\r\n\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        };\r\n                        //Knock opponent backwards\r\n                        player.knockBack(swordSwing);\r\n                    }\r\n                }\r\n            }\r\n            //Collision between lightning and player\r\n            this.playerHitLightning = function(lightningBolt,player){\r\n                //Players cannot hit themselves with their own attacks\r\n                if(lightningBolt.getOwner()!==player){\r\n                   \r\n                    if (player.getStun() === false && player.getDodging() === false){\r\n                        \r\n                        //Stun is started for player\r\n                        player.playStun();\r\n                        self.socket.emit('destroyLightningBolt', self.roomName);\r\n                        self.socket.emit('damagePlayer', self.roomName);\r\n                        if(player.getHealthBar().decrease(4)){\r\n                           \r\n                            //Player dies\r\n                            player.gameOver();\r\n                            player.anims.play('explode', true);\r\n                            //Send players back to main menu\r\n                            let timedEvent = player.scene.time.delayedCall(3000, player.scene.redirect, [], this);\r\n                        }\r\n                        \r\n                        player.knockBack(lightningBolt);\r\n                      \r\n                        //Destroy the animation associated with these hitboxes\r\n                        lightningBolt.destroyAnimationSprite();\r\n\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        lightningBolt.scene.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== player) {\r\n                                lightningBolt.body.enable = false;\r\n                            }\r\n                    });\r\n                }\r\n            }\r\n            }\r\n            this.shieldHitLightningBolt = function(shield, lightningBolt){\r\n                 console.log(\"shield hit lightning Bolt\");\r\n                if(shield.getOwner() !== lightningBolt.getOwner()){\r\n                    console.log(\"Opponent shield collision\");\r\n                    self.socket.emit('destroyLightningBolt', self.roomName);\r\n                        //Destroy the animation associated with these hitboxes\r\n                        lightningBolt.destroyAnimationSprite();\r\n\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        lightningBolt.scene.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== shield.getOwner()) {\r\n                                lightningBolt.body.enable = false;\r\n                            }\r\n                    });\r\n                }\r\n            }\r\n            this.shieldHitMagicBlast = function(shield, magicBlast){\r\n                console.log(\"shield hit magic Blast\");\r\n                if (shield.getOwner() !== magicBlast.getOwner()){\r\n                    console.log(\"Opponenet shield collision\");\r\n                    self.socket.emit('destroyMagicBlast', self.roomName);\r\n                    magicBlast.explode();\r\n                }\r\n            }\r\n\r\n\r\n            //Callback for sending user back to main page when game ends\r\n            this.redirect = function(){\r\n                 window.location.replace('https://mildmayhem.herokuapp.com/');\r\n            }\r\n            //Glowing Background Sprite\r\n            this.background = this.add.sprite(400,300,'Background');\r\n            this.anims.create({\r\n                key: 'glow',\r\n                frames: this.anims.generateFrameNumbers('Background', { start: 1, end: 12 }),\r\n                frameRate: 4,\r\n                repeat: -1,\r\n                yoyo: true\r\n            });\r\n            this.background.anims.play('glow');\r\n            \r\n            //Refactoring idea: make every variable passed into constructors \r\n            //descriptive javascript properties for readability\r\n            this.setCoolDowns = function(swordCoolDown,dodgeCoolDown,magicCoolDown,lightningCoolDown,shieldCoolDown,position){\r\n               if (position === 'top'){\r\n                //Create Cooldowns: Note, final variable passed in is a timer, it sets how long the cooldown lasts in milliseconds            \r\n                this[swordCoolDown] = new CoolDown(this, 570, 40, 'swordCool', 700); \r\n                this[magicCoolDown] = new CoolDown(this, 618, 40, 'blastCool', 1000);  \r\n                this[dodgeCoolDown] = new CoolDown(this, 665, 40, 'dodgeCool', 1000);\r\n                this[lightningCoolDown] = new CoolDown(this, 713, 40, 'lightningCool', 5000);\r\n                this[shieldCoolDown] = new CoolDown(this, 761, 40, 'shieldCool', 7000);\r\n               }\r\n               else if(position === 'bottom'){\r\n                this[swordCoolDown] = new CoolDown(this, 230, 560, 'swordCool', 700);\r\n                this[magicCoolDown] = new CoolDown(this, 278, 560, 'blastCool', 1000);\r\n                this[dodgeCoolDown] = new CoolDown(this, 326, 560, 'dodgeCool', 1000);\r\n                this[lightningCoolDown] = new CoolDown(this, 374, 560, 'lightningCool', 5000);\r\n                this[shieldCoolDown] = new CoolDown(this, 422, 560, 'shieldCool', 7000);\r\n               }\r\n            }\r\n           //Create Health Bars\r\n            this.healthBarP1 = new HealthBar({scene: this, x: 0, y:584});\r\n            this.healthBarP2 = new HealthBar({scene: this, x: 0, y:0});\r\n\r\n            //console.log('gameconfig is: ' + this.gameConfig);\r\n            if (this.gameConfig === 'joinOnline') {\r\n                this.player1 = new Player(this, 400, 200,'otherPlayer', this.explosionAnim);\r\n                this.player2 = new Player(this, 400, 500,'player', this.explosionAnim);\r\n                this.player1.setHealthBar(this.healthBarP2);\r\n                this.player2.setHealthBar(this.healthBarP1);\r\n                this.setCoolDowns('swordCoolDownP1','dodgeCoolDownP1','magicCoolDownP1','lightningCoolDownP1','shieldCoolDownP1',\"top\");\r\n                this.setCoolDowns('swordCoolDownP2','dodgeCoolDownP2','magicCoolDownP2','lightningCoolDownP2','shieldCoolDownP2',\"bottom\");\r\n                this.player1.createAnimations(this);\r\n                this.player2.createAnimations(this);\r\n                console.log('my id is: ' + this.socket.id);    \r\n                this.player2.setVisible(true);\r\n                \r\n               \r\n            }\r\n            console.log('gameConfig is: '+ this.gameConfig);\r\n            if (this.gameConfig === 'createOnline'){\r\n                this.player1 = new Player(this, 400, 500,'player', this.explosionAnim);\r\n                this.player2 = new Player(this, 400, 200,'otherPlayer', this.explosionAnim);\r\n                this.player1.setHealthBar(this.healthBarP1);\r\n                this.player2.setHealthBar(this.healthBarP2);\r\n                this.player1.createAnimations(this);\r\n                this.setCoolDowns('swordCoolDownP1','dodgeCoolDownP1','magicCoolDownP1','lightningCoolDownP1','shieldCoolDownP1',\"bottom\");\r\n                this.setCoolDowns('swordCoolDownP2','dodgeCoolDownP2','magicCoolDownP2','lightningCoolDownP2','shieldCoolDownP2',\"top\");\r\n                this.player2.createAnimations(this);\r\n                this.player2.setVisible(false);\r\n                this.socket.emit('createOnlineRoom');\r\n                this.socket.emit('getRoomName');\r\n                \r\n            }\r\n            \r\n           /* //Create Cooldowns: Note, final variable passed in is a timer, it sets how long the cooldown lasts in milliseconds            \r\n            this.swordCoolDownP1 = new CoolDown(this, 230, 560, 'swordCool', 700);\r\n            this.swordCoolDownP2 = new CoolDown(this, 570, 40, 'swordCool', 700);\r\n           \r\n            this.magicCoolDownP1 = new CoolDown(this, 278, 560, 'blastCool', 1000);\r\n            this.magicCoolDownP2 = new CoolDown(this, 618, 40, 'blastCool', 1000);\r\n            \r\n            this.dodgeCoolDownP1 = new CoolDown(this, 326, 560, 'dodgeCool', 1000);\r\n            this.dodgeCoolDownP2 = new CoolDown(this, 665, 40, 'dodgeCool', 1000);\r\n            this.lightningCoolDownP1 = new CoolDown(this, 374, 560, 'lightningCool', 5000);\r\n            this.lightningCoolDownP2 = new CoolDown(this, 713, 40, 'lightningCool', 5000);\r\n            */\r\n            this.player2.moving = false;\r\n            this.player2.moveTimer = 0;\r\n            this.socket.on('yourRoomName', function(roomName) {\r\n                //console.log('myroomName is called here');\r\n                self.roomName = roomName;\r\n            });\r\n            this.socket.on('opponentJoined', function(opponentSocketId) {\r\n                self.player2.setVisible(true);\r\n                //console.log('opponentJoined, id: ' + opponentSocketId);\r\n                self.opponentSocketId = opponentSocketId;\r\n                self.socket.emit('confirmJoinRoom', opponentSocketId);\r\n            });\r\n            this.socket.on('joinedRoom', function(opponentSocketId) {\r\n                //console.log('joined Room socket event happened')\r\n                self.opponentSocketId = opponentSocketId;\r\n            });\r\n            this.socket.on('playerMoved', function (player2Movement){\r\n               \r\n                    self.player2.moving = true;\r\n                    self.player2.x = player2Movement.x;\r\n                    self.player2.y = player2Movement.y;\r\n                    self.player2.setOrientationVector(player2Movement.direction);\r\n                    if(self.player2.isAlive()){\r\n                         self.player2.setMovementAnim(player2Movement.direction);\r\n                    }\r\n                   \r\n            });\r\n            this.socket.on('shieldCreated', function(){\r\n                let shield = new Shield(self,self.player2.getX(),self.player2.getY(),'shield', {duration: 5000, owner: self.player2});\r\n                self.shieldCoolDownP2.startCoolDown();\r\n                self.shields.add(shield);\r\n            });\r\n           this.socket.on('swordSwung', function(){\r\n               self.onlinePlayerSwing(self.player2, self.swordCoolDownP2);\r\n           })\r\n           this.socket.on('magicBlastCreated', function(){\r\n               self.magicCoolDownP2.startCoolDown();\r\n               self.createMagicBlast(self.player2);\r\n           });\r\n           this.socket.on('magicBlastDestroyed', function(){\r\n               //console.log('magicBlastDestroyed ran');\r\n               \r\n                self.magicBlasts.getChildren().forEach(magicBlast => {\r\n                    if (magicBlast.getOwner() !== self.player2) {\r\n                        magicBlast.explode();\r\n                    }\r\n                });\r\n           });\r\n           this.socket.on('playerDamaged', function() {\r\n               self.player2.playStun();\r\n               if (self.player2.getHealthBar().decrease(4)){\r\n                   self.player2.gameOver();\r\n                   self.player2.anims.play('explode2', false);\r\n                   \r\n                   \r\n                   let timedEvent = self.time.delayedCall(3000, self.redirect, [], self);\r\n               }\r\n           });\r\n           this.socket.on('dodgeCoolDownStarted', function(){\r\n               self.dodgeCoolDownP2.startCoolDown();\r\n           });\r\n           this.socket.on('lightningBoltCreated', function(){\r\n               self.lightningCoolDownP2.startCoolDown();\r\n               self.createLightningBolt(self.player2);\r\n           });\r\n           this.socket.on('lightningBoltDestroyed', function(){\r\n               //console.log('animation destruction ran');\r\n                         //Destroy the animation associated with these hitboxes\r\n                        let lightningAnimDestroyed = false;\r\n                        //Find all other associated lightning bolt hitboxes and destroy them\r\n                        self.lightningBolts.getChildren().forEach(lightningBolt => {\r\n                            if (lightningBolt.getOwner() !== self.player2) {\r\n                                lightningBolt.body.enable = false;\r\n                                if (lightningAnimDestroyed === false){\r\n                                    //console.log('animation destruction ran');\r\n                                    lightningAnimDestroyed = true;\r\n                                    lightningBolt.destroyAnimationSprite();\r\n                                }\r\n                            }\r\n                    });\r\n           });\r\n            //Create Win Text\r\n            this.youWin = this.add.text(150,300-60,'PLAYER2 WINS ',{fontSize: '70px', color: '#66FF00'});\r\n            this.youWin.setVisible(false);\r\n\r\n            \r\n          \r\n\r\n            //Checks for the amount of gamepads connected to the phaser game, if the passed controls do not match the quantity of connected gamepads,\r\n            //the controls will be reset, this can be fixed later\r\n            let pad: Phaser.Input.Gamepad.Gamepad;\r\n            let gamePadCount = ((this.controlConfig.player1.Movement==='GamePad')? 1:0);\r\n           \r\n\r\n            //Create controls object which can be accessed in the update logic for game object interactions\r\n            this.controlsP1 = new Controls(this,{directionals: this.controlConfig.player1.Movement, magicBlast: this.controlConfig.player1.MagicBlast, swordSwing: this.controlConfig.player1.SwordSlash},gamePadCount,1);\r\n           \r\n            \r\n            //These phaser groups allow for collisino detection of classes of objects at scale, for example all magic blasts have the same collision callack that is called\r\n            this.magicBlasts = this.physics.add.group();\r\n            this.swordHitBoxes = this.physics.add.group();\r\n            this.lightningBolts = this.physics.add.group();\r\n            this.shields = this.physics.add.group();\r\n            //Create a sprite group in order to handle collisions\r\n            this.players = this.physics.add.group();\r\n            this.players.add(this.player1);\r\n          \r\n\r\n            //Attach healthbars to the selected players, this is so the game knows whose healthbar is whose\r\n            //this.player1.setHealthBar(this.healthBarP1);\r\n\r\n          \r\n\r\n            //phaser has a prebuilt bounce physics setup, any value greater than 1 causes an exponential growth in object velocity as it multiplies each bounce\r\n            this.player1.setBounce(1);\r\n\r\n\r\n            //Collision handling for object groups (group1, group2, callback)\r\n            this.physics.add.overlap(this.magicBlasts,this.swordHitBoxes,this.deflectBlast);\r\n            this.physics.add.overlap(this.magicBlasts,this.players,this.playerHit);\r\n            this.physics.add.overlap(this.lightningBolts,this.players,this.playerHitLightning);\r\n            this.physics.add.overlap(this.swordHitBoxes,this.players,this.playerHitSwordSwing);\r\n            this.physics.add.overlap(this.shields,this.magicBlasts, this.shieldHitMagicBlast);\r\n            this.physics.add.overlap(this.shields,this.lightningBolts, this.shieldHitLightningBolt);\r\n            //4 walls on the outside\r\n            this.leftWall = this.physics.add.sprite(-55,300,'vwall');\r\n            //Set immovable allows the objects to not move on collision\r\n            this.leftWall.body.immovable = true;\r\n            this.rightWall = this.physics.add.sprite(855,300,'vwall');\r\n            this.rightWall.body.immovable = true;\r\n            this.topWall = this.physics.add.sprite(400,-55,'wall');\r\n            this.topWall.body.immovable = true;\r\n            this.bottomWall = this.physics.add.sprite(400,655,'wall');\r\n            this.bottomWall.body.immovable = true;\r\n            \r\n            //staticGroup is a different type of group that doesn't move I believe\r\n            this.walls = this.physics.add.staticGroup();\r\n            this.walls.add(this.leftWall);\r\n            this.walls.add(this.rightWall);\r\n            this.walls.add(this.topWall);\r\n            this.walls.add(this.bottomWall);\r\n            \r\n            //midline barrier wall\r\n            this.midWall = this.physics.add.sprite(400,300,'wall');\r\n            this.midWall.setScale(1,.08);\r\n            this.midWall.setVisible(false);\r\n            this.midWall.body.immovable = true;\r\n\r\n            this.physics.add.collider(this.midWall,this.players);\r\n            \r\n            //The order of the objects in the collider matters, magicBlasts \r\n            //will only bounce off the walls if this.magicBlasts is the first argument\r\n            this.physics.add.collider(this.magicBlasts,this.walls);\r\n            this.physics.add.collider(this.walls,this.players);\r\n             \r\n            self.createMagicBlast = function(player){\r\n                    //Create magic Blast\r\n                    var magicBlast = new MagicBlast(self,player.getX(),\r\n                    player.getY(),'magicBlast',{owner: player});\r\n                    //Add to collision group\r\n                    self.magicBlasts.add(magicBlast);\r\n                    //Fire in direction of player orientation\r\n                    magicBlast.setMagicBlastVelocity(player.getOrientationVector());\r\n                    //Set magicBlast bounce\r\n                    magicBlast.setCollideWorldBounds(true);\r\n                    magicBlast.setBounce(1);\r\n                    \r\n            };\r\n            this.createLightningBolt = function(player)\r\n            {\r\n                //DO NOT CALL SOCKET EMITS IN HERE, INFINITE FEEDBACK LOOP\r\n                 //create lightning Bolt animation object\r\n                let lightningBolt = new LightningBolt(this,player.getX(),player.getY(),'lightningBolt',{owner: player});\r\n                //Creates 4 lightning bolt hitboxes which are the WIDTH of the lightning bolt, they travel \r\n                //at a speed so fast that it mimics a diagonal hitbox. This normally\r\n                //can't be created using Arcade physics and its Axis aligned bounding boxes;\r\n                let lightningBoltHB1 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 100});\r\n                let lightningBoltHB2 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 50});\r\n                let lightningBoltHB3 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 25});\r\n                let lightningBoltHB4 = new LightningHB(this,player.getX(),player.getY(),'magicBlast',{owner: player, animationSprite: lightningBolt, Olength: 75});\r\n                //Add to collision group\r\n                this.lightningBolts.add(lightningBoltHB1);\r\n                this.lightningBolts.add(lightningBoltHB2);\r\n                this.lightningBolts.add(lightningBoltHB3);\r\n                this.lightningBolts.add(lightningBoltHB4);\r\n\r\n            }\r\n            this.checkForSwingThenSwing = function(attackInput, player, coolDown){\r\n                //Check if swordSwing exists, and then check if it belongs to the player\r\n                this.swordHitBoxes.getChildren().forEach(swordSwing => {\r\n                    if (swordSwing.getOwner() === player) {\r\n                        let swordToCheck = swordSwing;\r\n                    }\r\n                });\r\n                //Check if sword swing can be activated\r\n                //if the attack button is pressed,\r\n                //and there is no sword currently active on the player,\r\n                //and the cooldown is no active, then the sword can be swung\r\n                 if ((attackInput.swordSwingFiring && typeof swordToCheck == 'undefined' && !coolDown.isActive())){\r\n                   \r\n                   \r\n                    //Send sword swing to server\r\n                    this.socket.emit('swingSword',this.roomName);\r\n                    //Set sword swing spawn point\r\n                    let swordSpawnX = player.getX();\r\n                    let swordSpawnY = player.getY();\r\n                    //emit sword swing event:\r\n                    //Create new sword swing\r\n                    let newSwordSwing = new SwordSwing(this,swordSpawnX,swordSpawnY,'swordSwing',{owner: player});\r\n                    newSwordSwing.swingSword();\r\n                    coolDown.startCoolDown();\r\n                    this.swordHitBoxes.add(newSwordSwing);\r\n                   \r\n                 }\r\n            };\r\n            this.onlinePlayerSwing = function (player, coolDown){\r\n                //Set sword swing spawn point\r\n                let swordSpawnX = player.getX();\r\n                let swordSpawnY = player.getY();\r\n                //emit sword swing event:\r\n                //Create new sword swing\r\n                let newSwordSwing = new SwordSwing(this,swordSpawnX,swordSpawnY,'swordSwing',{owner: player});\r\n                newSwordSwing.body.active = false;\r\n                newSwordSwing.swingSword();\r\n                coolDown.startCoolDown();\r\n                this.swordHitBoxes.add(newSwordSwing);\r\n            };\r\n           \r\n        },\r\n\r\n    update: function()\r\n        {\r\n        \r\n        //Checks if player 1 or player2 have lost, can events be used for this instead?\r\n        if (!this.player1.isAlive()){\r\n            this.youWin.setVisible(true);\r\n           this.youWin.setText('OPPONENT WINS');\r\n        }\r\n        //Checks if player 1 or player2 have lost, can events be used for this instead?\r\n        else if (!this.player2.isAlive()){\r\n            this.youWin.setVisible(true);\r\n            this.youWin.setText('YOU WIN');\r\n            console.log(\"is player 2 anim playing?\" + this.player2.anims.getTotalFrames());\r\n        }\r\n        \r\n        //CoolDownAnims\r\n        this.swordCoolDownP1.update();\r\n        this.swordCoolDownP2.update();\r\n        this.magicCoolDownP1.update();\r\n        this.magicCoolDownP2.update();\r\n        this.dodgeCoolDownP1.update();\r\n        this.dodgeCoolDownP2.update();\r\n        this.lightningCoolDownP1.update();\r\n        this.lightningCoolDownP2.update();\r\n        this.shieldCoolDownP1.update();\r\n        this.shieldCoolDownP2.update();\r\n        //Get Player inputgetMovementVector\r\n        this.movementVectorP1 = this.controlsP1.getMovementVector();\r\n        \r\n\r\n        //Set the orientation of the player\r\n        this.player1.setOrientationVector(this.movementVectorP1);\r\n        \r\n        // emit player movement data\r\n        var x = this.player1.x;\r\n        var y = this.player1.y;\r\n        var d = this.player1.getOrientationVector();\r\n        if (this.player1.oldPosition && (x !== this.player1.oldPosition.x || y !== this.player1.oldPosition.y || d !== this.player1.oldPosition.direction)) {\r\n         \r\n            this.socket.emit('playerMovement', { x: x, y: y, direction: d , roomName: this.roomName});\r\n        }\r\n \r\n        // save old position data\r\n        this.player1.oldPosition = {\r\n          x: x,\r\n          y: y,\r\n          direction: d\r\n        };\r\n        //Stop animation if not moving and alive(explode animation can play)\r\n        if (this.player2.moving === false && this.player2.isAlive())\r\n        {\r\n            this.player2.anims.pause();\r\n            \r\n            \r\n        }\r\n        else\r\n        {\r\n            \r\n            //Count some update frames, compensating for server delay,\r\n            //If there is an acceptable delay from the server, then it can be assumed that the opponent\r\n            //has stopped moving since the last time\r\n            //They triggered a movmement event\r\n            this.player2.moveTimer += 1;\r\n            if (this.player2.moveTimer > 17){\r\n                this.player2.moving = false;\r\n                this.player2.moveTimer = 0;\r\n            }\r\n            \r\n        }\r\n        //Check to make sure the player is not stunned, alive, and is not dodging\r\n        if(!this.player1.getStun() && this.player1.isAlive() && !this.player1.getDodging()){\r\n            this.player1.setPlayerVelocity(this.movementVectorP1);\r\n            this.player1.setMovementAnim(this.movementVectorP1);\r\n        }\r\n\r\n\r\n\r\n        //Get attack inputs every update cycle\r\n        let attackInputsP1 = this.controlsP1.getMoveInput();\r\n       \r\n        //Check for user firing magic blast and that the cooldown is not active\r\n        if (attackInputsP1.magicBlastFiring && !this.magicCoolDownP1.isActive()){\r\n           this.magicCoolDownP1.startCoolDown();\r\n           this.socket.emit('createMagicBlast', this.roomName);\r\n           this.createMagicBlast(this.player1);\r\n        };\r\n        \r\n        //Check for user firing Lightning Bolt\r\n        if (attackInputsP1.lightningBoltFiring && !this.lightningCoolDownP1.isActive()){\r\n           this.lightningCoolDownP1.startCoolDown();\r\n           this.socket.emit('createLightningBolt',this.roomName);\r\n           this.createLightningBolt(this.player1);\r\n          \r\n        };\r\n        \r\n\r\n       \r\n        //Check for user dodging and check that they aren't already in dodge mode\r\n        if (attackInputsP1.dodgeFiring && !this.player1.getDodging() && !this.dodgeCoolDownP1.isActive()){\r\n            this.dodgeCoolDownP1.startCoolDown();\r\n            this.socket.emit('startDodgeCoolDown',this.roomName);\r\n            this.player1.dodge();\r\n        };\r\n        \r\n         if(attackInputsP1.shieldFiring && !this.shieldCoolDownP1.isActive()){\r\n            let shield = new Shield(this,this.player1.getX(),this.player1.getY(),'shield', {duration: 5000, owner: this.player1});\r\n            this.shieldCoolDownP1.startCoolDown();\r\n            this.shields.add(shield);\r\n            this.socket.emit('createShield',this.roomName);\r\n        }\r\n\r\n        //Check if sword swings exist, and update them as needed, \r\n        //this is the best way I can think of for tracking and following player position in the main loop\r\n        //Perhaps there's a better way? Without it \r\n        //the sword is stuck in place, perhaps it can be attached to a reference to player position?\r\n        //I took a look at an update pattern for a situation like this\r\n        let swordSwings = this.swordHitBoxes.getChildren();\r\n        if (swordSwings.length>0){\r\n            swordSwings.forEach(swordSwing => {\r\n                swordSwing.update();\r\n            }\r\n            );\r\n            \r\n        }\r\n        \r\n        //Check for user swinging sword and then swing, starting the cooldown\r\n        //I think functions are supposed to do only one thing, I'll fix this later\r\n        this.checkForSwingThenSwing(attackInputsP1, this.player1, this.swordCoolDownP1);\r\n\r\n        }\r\n    \r\n    \r\n\r\n\r\n}\r\n\r\nexport default LocalGameScene;","import React, { Component } from 'react'\r\nimport Phaser from 'phaser';\r\nimport { IonPhaser } from '@ion-phaser/react';\r\nimport LocalGameScene from '../phaser/scenes/LocalGameScene.js';\r\nimport OnlineGameScene from '../phaser/scenes/OnlineGameScene.js';\r\nimport {socket} from '../api';\r\nclass GamePage extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    let gameConfig = this.props.gameConfig;\r\n    console.log(\"gameConfig is: \" + gameConfig);\r\n    let roomName = this.props.roomName;\r\n    //console.log(\"gameConfig is: \" + gameConfig);\r\n    //let newScene = new Object();\r\n    console.log('gamePage constructor called');\r\n    let newScene = LocalGameScene;\r\n    if (gameConfig==='createOnline'){\r\n      newScene = OnlineGameScene;\r\n    }\r\n    else if (gameConfig=='joinOnline'){\r\n      newScene = OnlineGameScene;\r\n    }\r\n    let controlConfig = this.props.controlConfig;\r\n    this.state = {\r\n    initialize: true,\r\n    //This is the Phaser game code\r\n    game: {\r\n      type: Phaser.AUTO,\r\n      width: 800,\r\n      height: 600,\r\n      physics: {\r\n        default: 'arcade',\r\n        arcade: {\r\n          debug: false,\r\n          gravity: { y: 0 }\r\n        }\r\n      },\r\n      input: {\r\n        gamepad: true\r\n      },\r\n      scene: {\r\n        init: function() {\r\n          //Here we can pass in the Control Config and any other data the Phaser scene needs from React\r\n          this.controlConfig = controlConfig;\r\n          this.gameConfig = gameConfig;\r\n          this.roomName = roomName;\r\n          this.socket = socket;\r\n        },\r\n        preload: newScene.preload,\r\n        create: newScene.create,\r\n        update: newScene.update,\r\n      }\r\n      \r\n    }\r\n  }\r\n  }\r\n  componentWillUnmount() {\r\n    console.log('componentUnmounted');\r\n    socket.removeAllListeners()\r\n    socket.emit('destroyOnlineRoom');\r\n}\r\n  \r\n  render() {\r\n    const { initialize, game } = this.state\r\n    return (\r\n      <div style={{maxWidth: 800, minWidth:800, minHeight:600, maxHeight:600, margin: 'auto'}}>\r\n      {/*Take a look at: https://github.com/proyecto26/ion-phaser/tree/master/react in order to see how this is implemented*/}\r\n        <IonPhaser game={game} initialize={initialize} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GamePage;","import React, { Component, useState } from 'react';\r\nimport styles from './styles/main.css';\r\nimport MenuPage from './pages/MenuPage.js';\r\nimport GamePage from './pages/GamePage.js';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Phaser from 'phaser'\r\nimport { useAtom, atom } from 'jotai'\r\nimport { IonPhaser } from '@ion-phaser/react';\r\nimport { matchAtom, controlConfigAtom } from './jotai'\r\n\r\nconst App = () => {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  //listens for a new online room creation\r\n\r\n\r\n  //ControlConfig is a default value\r\n  //   this.state = {\r\n  //     controlConfig: {\r\n  //       player1: {\r\n  //         Movement: 'WASD',\r\n  //         SwordSlash: 'SPACE',\r\n  //         MagicBlast: 'P'\r\n  //       },\r\n  //       player2: {\r\n  //         Movement: 'ArrowKeys',\r\n  //         SwordSlash: 'NumPad0',\r\n  //         MagicBlast: 'NumPad9'\r\n  //       }\r\n  //     },\r\n  //     gameConfig: 'offline',\r\n  //     roomName: 'Null'\r\n  //   }\r\n  // };\r\n  /*\r\n  const [controlConfig, setControlConfig] = useState({\r\n    player1: {\r\n      Movement: 'WASD',\r\n      SwordSlash: 'SPACE',\r\n      MagicBlast: 'P'\r\n    },\r\n    player2: {\r\n      Movement: 'ArrowKeys',\r\n      SwordSlash: 'NumPad0',\r\n      MagicBlast: 'NumPad9'\r\n    }\r\n  })\r\n  */\r\n  const [match, setMatch] = useAtom(matchAtom);\r\n  const [gameConfig, setGameConfig] = useState('offline');\r\n  const [roomName, setRoomName] = useState('Null');\r\n  const [controlConfig, setControlConfig] = useAtom(controlConfigAtom);\r\n  //Callback function which comes all the way from the button component in the React application, without redux, \r\n  //I believe state has to be managed/updated like this, which I think it isn't the best way to do it\r\n  //I forget the term but basically you have to pass this one callback function through the entire program if there\r\n  // isn't a common parent component\r\n\r\n  // controlConfig = (dataFromMenuPage) => {\r\n  //   this.setState({ controlConfig: dataFromMenuPage });\r\n  // };\r\n  // gameConfig = (gameSelectionFromMenuPage, roomNameFromMenuPage) => {\r\n  //   this.setState({ gameConfig: gameSelectionFromMenuPage, roomName: roomNameFromMenuPage });\r\n\r\n  // }\r\n\r\n  /*const controlConfigHandler = (dataFromMenuPage) => {\r\n    setControlConfig(dataFromMenuPage);\r\n  };\r\n  const gameConfigHandler = (gameSelectionFromMenuPage, roomNameFromMenuPage) => {\r\n    setGameConfig(gameSelectionFromMenuPage)\r\n    setRoomName(roomNameFromMenuPage)\r\n  }\r\n  */\r\n\r\n\r\n  return (\r\n    \r\n    <Router>\r\n      <div>\r\n        <Switch>\r\n          <Route path=\"/\" exact >\\\r\n           \r\n            {/*Getting the control configuration from here*/}\r\n            {/* <MenuPage passControlConfig={controlConfigHandler} addNewRoom={this.addNewRoom} passGameConfig={gameConfigHandler} /> */}\r\n            <MenuPage />\r\n          </Route>\r\n          <Route path=\"/game\">\r\n           {console.log('matchAtom is: ' + JSON.stringify(match))}\r\n            {/*We are passing the control configuration into the game*/}\r\n            <GamePage controlConfig={controlConfig} gameConfig={match.gameType} roomName={match.roomName} />\r\n          </Route>\r\n        </Switch>\r\n\r\n      </div>\r\n    </Router>\r\n\r\n  )\r\n\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'jotai';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}