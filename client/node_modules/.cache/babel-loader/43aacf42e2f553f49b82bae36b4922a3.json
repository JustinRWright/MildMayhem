{"ast":null,"code":"/**\n * socket.io\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n * MIT Licensed\n */\n(function (exports, io) {\n  /**\n   * Expose constructor.\n   */\n  exports.SocketNamespace = SocketNamespace;\n  /**\n   * Socket namespace constructor.\n   *\n   * @constructor\n   * @api public\n   */\n\n  function SocketNamespace(socket, name) {\n    this.socket = socket;\n    this.name = name || '';\n    this.flags = {};\n    this.json = new Flag(this, 'json');\n    this.ackPackets = 0;\n    this.acks = {};\n  }\n\n  ;\n  /**\n   * Apply EventEmitter mixin.\n   */\n\n  io.util.mixin(SocketNamespace, io.EventEmitter);\n  /**\n   * Copies emit since we override it\n   *\n   * @api private\n   */\n\n  SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\n  /**\n   * Creates a new namespace, by proxying the request to the socket. This\n   * allows us to use the synax as we do on the server.\n   *\n   * @api public\n   */\n\n  SocketNamespace.prototype.of = function () {\n    return this.socket.of.apply(this.socket, arguments);\n  };\n  /**\n   * Sends a packet.\n   *\n   * @api private\n   */\n\n\n  SocketNamespace.prototype.packet = function (packet) {\n    packet.endpoint = this.name;\n    this.socket.packet(packet);\n    this.flags = {};\n    return this;\n  };\n  /**\n   * Sends a message\n   *\n   * @api public\n   */\n\n\n  SocketNamespace.prototype.send = function (data, fn) {\n    var packet = {\n      type: this.flags.json ? 'json' : 'message',\n      data: data\n    };\n\n    if ('function' == typeof fn) {\n      packet.id = ++this.ackPackets;\n      packet.ack = true;\n      this.acks[packet.id] = fn;\n    }\n\n    return this.packet(packet);\n  };\n  /**\n   * Emits an event\n   *\n   * @api public\n   */\n\n\n  SocketNamespace.prototype.emit = function (name) {\n    var args = Array.prototype.slice.call(arguments, 1),\n        lastArg = args[args.length - 1],\n        packet = {\n      type: 'event',\n      name: name\n    };\n\n    if ('function' == typeof lastArg) {\n      packet.id = ++this.ackPackets;\n      packet.ack = 'data';\n      this.acks[packet.id] = lastArg;\n      args = args.slice(0, args.length - 1);\n    }\n\n    packet.args = args;\n    return this.packet(packet);\n  };\n  /**\n   * Disconnects the namespace\n   *\n   * @api private\n   */\n\n\n  SocketNamespace.prototype.disconnect = function () {\n    if (this.name === '') {\n      this.socket.disconnect();\n    } else {\n      this.packet({\n        type: 'disconnect'\n      });\n      this.$emit('disconnect');\n    }\n\n    return this;\n  };\n  /**\n   * Handles a packet\n   *\n   * @api private\n   */\n\n\n  SocketNamespace.prototype.onPacket = function (packet) {\n    var self = this;\n\n    function ack() {\n      self.packet({\n        type: 'ack',\n        args: io.util.toArray(arguments),\n        ackId: packet.id\n      });\n    }\n\n    ;\n\n    switch (packet.type) {\n      case 'connect':\n        this.$emit('connect');\n        break;\n\n      case 'disconnect':\n        if (this.name === '') {\n          this.socket.onDisconnect(packet.reason || 'booted');\n        } else {\n          this.$emit('disconnect', packet.reason);\n        }\n\n        break;\n\n      case 'message':\n      case 'json':\n        var params = ['message', packet.data];\n\n        if (packet.ack == 'data') {\n          params.push(ack);\n        } else if (packet.ack) {\n          this.packet({\n            type: 'ack',\n            ackId: packet.id\n          });\n        }\n\n        this.$emit.apply(this, params);\n        break;\n\n      case 'event':\n        var params = [packet.name].concat(packet.args);\n        if (packet.ack == 'data') params.push(ack);\n        this.$emit.apply(this, params);\n        break;\n\n      case 'ack':\n        if (this.acks[packet.ackId]) {\n          this.acks[packet.ackId].apply(this, packet.args);\n          delete this.acks[packet.ackId];\n        }\n\n        break;\n\n      case 'error':\n        if (packet.advice) {\n          this.socket.onError(packet);\n        } else {\n          if (packet.reason == 'unauthorized') {\n            this.$emit('connect_failed', packet.reason);\n          } else {\n            this.$emit('error', packet.reason);\n          }\n        }\n\n        break;\n    }\n  };\n  /**\n   * Flag interface.\n   *\n   * @api private\n   */\n\n\n  function Flag(nsp, name) {\n    this.namespace = nsp;\n    this.name = name;\n  }\n\n  ;\n  /**\n   * Send a message\n   *\n   * @api public\n   */\n\n  Flag.prototype.send = function () {\n    this.namespace.flags[this.name] = true;\n    this.namespace.send.apply(this.namespace, arguments);\n  };\n  /**\n   * Emit an event\n   *\n   * @api public\n   */\n\n\n  Flag.prototype.emit = function () {\n    this.namespace.flags[this.name] = true;\n    this.namespace.emit.apply(this.namespace, arguments);\n  };\n})('undefined' != typeof io ? io : module.exports, 'undefined' != typeof io ? io : module.parent.exports);","map":{"version":3,"sources":["C:/Users/Human/Documents/MildMayhemFull/mildmayhem/client/node_modules/socket.io-proxy/node_modules/socket.io-client/lib/namespace.js"],"names":["exports","io","SocketNamespace","socket","name","flags","json","Flag","ackPackets","acks","util","mixin","EventEmitter","prototype","$emit","emit","of","apply","arguments","packet","endpoint","send","data","fn","type","id","ack","args","Array","slice","call","lastArg","length","disconnect","onPacket","self","toArray","ackId","onDisconnect","reason","params","push","concat","advice","onError","nsp","namespace","module","parent"],"mappings":"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","sourcesContent":["/**\n * socket.io\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n * MIT Licensed\n */\n\n(function (exports, io) {\n\n  /**\n   * Expose constructor.\n   */\n\n  exports.SocketNamespace = SocketNamespace;\n\n  /**\n   * Socket namespace constructor.\n   *\n   * @constructor\n   * @api public\n   */\n\n  function SocketNamespace (socket, name) {\n    this.socket = socket;\n    this.name = name || '';\n    this.flags = {};\n    this.json = new Flag(this, 'json');\n    this.ackPackets = 0;\n    this.acks = {};\n  };\n\n  /**\n   * Apply EventEmitter mixin.\n   */\n\n  io.util.mixin(SocketNamespace, io.EventEmitter);\n\n  /**\n   * Copies emit since we override it\n   *\n   * @api private\n   */\n\n  SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\n\n  /**\n   * Creates a new namespace, by proxying the request to the socket. This\n   * allows us to use the synax as we do on the server.\n   *\n   * @api public\n   */\n\n  SocketNamespace.prototype.of = function () {\n    return this.socket.of.apply(this.socket, arguments);\n  };\n\n  /**\n   * Sends a packet.\n   *\n   * @api private\n   */\n\n  SocketNamespace.prototype.packet = function (packet) {\n    packet.endpoint = this.name;\n    this.socket.packet(packet);\n    this.flags = {};\n    return this;\n  };\n\n  /**\n   * Sends a message\n   *\n   * @api public\n   */\n\n  SocketNamespace.prototype.send = function (data, fn) {\n    var packet = {\n        type: this.flags.json ? 'json' : 'message'\n      , data: data\n    };\n\n    if ('function' == typeof fn) {\n      packet.id = ++this.ackPackets;\n      packet.ack = true;\n      this.acks[packet.id] = fn;\n    }\n\n    return this.packet(packet);\n  };\n\n  /**\n   * Emits an event\n   *\n   * @api public\n   */\n  \n  SocketNamespace.prototype.emit = function (name) {\n    var args = Array.prototype.slice.call(arguments, 1)\n      , lastArg = args[args.length - 1]\n      , packet = {\n            type: 'event'\n          , name: name\n        };\n\n    if ('function' == typeof lastArg) {\n      packet.id = ++this.ackPackets;\n      packet.ack = 'data';\n      this.acks[packet.id] = lastArg;\n      args = args.slice(0, args.length - 1);\n    }\n\n    packet.args = args;\n\n    return this.packet(packet);\n  };\n\n  /**\n   * Disconnects the namespace\n   *\n   * @api private\n   */\n\n  SocketNamespace.prototype.disconnect = function () {\n    if (this.name === '') {\n      this.socket.disconnect();\n    } else {\n      this.packet({ type: 'disconnect' });\n      this.$emit('disconnect');\n    }\n\n    return this;\n  };\n\n  /**\n   * Handles a packet\n   *\n   * @api private\n   */\n\n  SocketNamespace.prototype.onPacket = function (packet) {\n    var self = this;\n\n    function ack () {\n      self.packet({\n          type: 'ack'\n        , args: io.util.toArray(arguments)\n        , ackId: packet.id\n      });\n    };\n\n    switch (packet.type) {\n      case 'connect':\n        this.$emit('connect');\n        break;\n\n      case 'disconnect':\n        if (this.name === '') {\n          this.socket.onDisconnect(packet.reason || 'booted');\n        } else {\n          this.$emit('disconnect', packet.reason);\n        }\n        break;\n\n      case 'message':\n      case 'json':\n        var params = ['message', packet.data];\n\n        if (packet.ack == 'data') {\n          params.push(ack);\n        } else if (packet.ack) {\n          this.packet({ type: 'ack', ackId: packet.id });\n        }\n\n        this.$emit.apply(this, params);\n        break;\n\n      case 'event':\n        var params = [packet.name].concat(packet.args);\n\n        if (packet.ack == 'data')\n          params.push(ack);\n\n        this.$emit.apply(this, params);\n        break;\n\n      case 'ack':\n        if (this.acks[packet.ackId]) {\n          this.acks[packet.ackId].apply(this, packet.args);\n          delete this.acks[packet.ackId];\n        }\n        break;\n\n      case 'error':\n        if (packet.advice){\n          this.socket.onError(packet);\n        } else {\n          if (packet.reason == 'unauthorized') {\n            this.$emit('connect_failed', packet.reason);\n          } else {\n            this.$emit('error', packet.reason);\n          }\n        }\n        break;\n    }\n  };\n\n  /**\n   * Flag interface.\n   *\n   * @api private\n   */\n\n  function Flag (nsp, name) {\n    this.namespace = nsp;\n    this.name = name;\n  };\n\n  /**\n   * Send a message\n   *\n   * @api public\n   */\n\n  Flag.prototype.send = function () {\n    this.namespace.flags[this.name] = true;\n    this.namespace.send.apply(this.namespace, arguments);\n  };\n\n  /**\n   * Emit an event\n   *\n   * @api public\n   */\n\n  Flag.prototype.emit = function () {\n    this.namespace.flags[this.name] = true;\n    this.namespace.emit.apply(this.namespace, arguments);\n  };\n\n})(\n    'undefined' != typeof io ? io : module.exports\n  , 'undefined' != typeof io ? io : module.parent.exports\n);\n"]},"metadata":{},"sourceType":"script"}