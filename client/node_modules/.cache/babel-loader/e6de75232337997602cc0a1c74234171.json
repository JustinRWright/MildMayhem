{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { attachEventProps } from './utils/attachEventProps';\nexport function createOverlayComponent(displayName, controller) {\n  const dismissEventName = `on${displayName}DidDismiss`;\n  return class ReactOverlayComponent extends React.Component {\n    constructor(props) {\n      super(props);\n      this.el = document.createElement('div');\n    }\n\n    static get displayName() {\n      return displayName;\n    }\n\n    componentDidMount() {\n      if (this.props.isOpen) {\n        this.present();\n      }\n    }\n\n    componentDidUpdate(prevProps) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n          this.present(prevProps);\n        }\n\n        if (this.controller && prevProps.isOpen !== this.props.isOpen && this.props.isOpen === false) {\n          yield this.controller.dismiss();\n        }\n      });\n    }\n\n    present(prevProps) {\n      return __awaiter(this, void 0, void 0, function* () {\n        // tslint:disable-next-line:no-empty\n        const _a = this.props,\n              {\n          children,\n          isOpen,\n          onDidDismiss = () => {}\n        } = _a,\n              cProps = __rest(_a, [\"children\", \"isOpen\", \"onDidDismiss\"]);\n\n        const elementProps = Object.assign(Object.assign({}, cProps), {\n          [dismissEventName]: onDidDismiss\n        });\n        this.controller = yield controller.create(Object.assign(Object.assign({}, elementProps), {\n          component: this.el,\n          componentProps: {}\n        }));\n        attachEventProps(this.controller, elementProps, prevProps);\n        this.controller.present();\n      });\n    }\n\n    render() {\n      return ReactDOM.createPortal(this.props.children, this.el);\n    }\n\n  };\n}","map":{"version":3,"sources":["../../src/react-component-lib/createOverlayComponent.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,QAAP,MAAqB,WAArB;AACA,SAAS,gBAAT,QAAiC,0BAAjC;AAYA,OAAM,SAAU,sBAAV,CAIJ,WAJI,EAIiB,UAJjB,EAIsF;AAC1F,QAAM,gBAAgB,GAAG,KAAK,WAAW,YAAzC;AAIA,SAAO,MAAM,qBAAN,SAAoC,KAAK,CAAC,SAA1C,CAA0D;AAI/D,IAAA,WAAA,CAAY,KAAZ,EAAwB;AACtB,YAAM,KAAN;AACA,WAAK,EAAL,GAAU,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;AACD;;AAED,eAAW,WAAX,GAAsB;AACpB,aAAO,WAAP;AACD;;AAED,IAAA,iBAAiB,GAAA;AACf,UAAI,KAAK,KAAL,CAAW,MAAf,EAAuB;AACrB,aAAK,OAAL;AACD;AACF;;AAEK,IAAA,kBAAkB,CAAC,SAAD,EAAiB;;AACvC,YAAI,SAAS,CAAC,MAAV,KAAqB,KAAK,KAAL,CAAW,MAAhC,IAA0C,KAAK,KAAL,CAAW,MAAX,KAAsB,IAApE,EAA0E;AACxE,eAAK,OAAL,CAAa,SAAb;AACD;;AACD,YACE,KAAK,UAAL,IACA,SAAS,CAAC,MAAV,KAAqB,KAAK,KAAL,CAAW,MADhC,IAEA,KAAK,KAAL,CAAW,MAAX,KAAsB,KAHxB,EAIE;AACA,gBAAM,KAAK,UAAL,CAAgB,OAAhB,EAAN;AACD;AACF,O;AAAA;;AAEK,IAAA,OAAO,CAAC,SAAD,EAAkB;;AAC7B;AACA,cAAM,EAAA,GAAA,KAAA,KAAN;AAAA,cAAM;AAAE,UAAA,QAAF;AAAY,UAAA,MAAZ;AAAoB,UAAA,YAAY,GAAG,MAAK,CAAG;AAA3C,YAA2C,EAAjD;AAAA,cAAmD,MAAA,GAAA,MAAA,CAAA,EAAA,EAAA,CAAA,UAAA,EAAA,QAAA,EAAA,cAAA,CAAA,CAAnD;;AACA,cAAM,YAAY,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACb,MADa,CAAA,EACP;AACT,WAAC,gBAAD,GAAoB;AADX,SADO,CAAlB;AAKA,aAAK,UAAL,GAAkB,MAAM,UAAU,CAAC,MAAX,CAAiB,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACpC,YADoC,CAAA,EACxB;AACf,UAAA,SAAS,EAAE,KAAK,EADD;AAEf,UAAA,cAAc,EAAE;AAFD,SADwB,CAAjB,CAAxB;AAMA,QAAA,gBAAgB,CAAC,KAAK,UAAN,EAAyB,YAAzB,EAAuC,SAAvC,CAAhB;AAEA,aAAK,UAAL,CAAgB,OAAhB;AACD,O;AAAA;;AAED,IAAA,MAAM,GAAA;AACJ,aAAO,QAAQ,CAAC,YAAT,CAAsB,KAAK,KAAL,CAAW,QAAjC,EAA2C,KAAK,EAAhD,CAAP;AACD;;AArD8D,GAAjE;AAuDD","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { attachEventProps } from './utils/attachEventProps';\nexport function createOverlayComponent(displayName, controller) {\n    const dismissEventName = `on${displayName}DidDismiss`;\n    return class ReactOverlayComponent extends React.Component {\n        constructor(props) {\n            super(props);\n            this.el = document.createElement('div');\n        }\n        static get displayName() {\n            return displayName;\n        }\n        componentDidMount() {\n            if (this.props.isOpen) {\n                this.present();\n            }\n        }\n        componentDidUpdate(prevProps) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n                    this.present(prevProps);\n                }\n                if (this.controller &&\n                    prevProps.isOpen !== this.props.isOpen &&\n                    this.props.isOpen === false) {\n                    yield this.controller.dismiss();\n                }\n            });\n        }\n        present(prevProps) {\n            return __awaiter(this, void 0, void 0, function* () {\n                // tslint:disable-next-line:no-empty\n                const _a = this.props, { children, isOpen, onDidDismiss = () => { } } = _a, cProps = __rest(_a, [\"children\", \"isOpen\", \"onDidDismiss\"]);\n                const elementProps = Object.assign(Object.assign({}, cProps), { [dismissEventName]: onDidDismiss });\n                this.controller = yield controller.create(Object.assign(Object.assign({}, elementProps), { component: this.el, componentProps: {} }));\n                attachEventProps(this.controller, elementProps, prevProps);\n                this.controller.present();\n            });\n        }\n        render() {\n            return ReactDOM.createPortal(this.props.children, this.el);\n        }\n    };\n}\n//# sourceMappingURL=createOverlayComponent.js.map"]},"metadata":{},"sourceType":"module"}